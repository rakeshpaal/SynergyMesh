name: 08-sync-subdirs
true:
  push:
    branches:
    - main
    paths:
    - templates/**
    - island.bootstrap.stage0.yaml
  schedule:
  - cron: 0 * * * *
  workflow_dispatch: null
jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Ensure python dependencies
      run: pip install pyyaml
    - name: Materialize scaffold from manifest
      run: python tools/bootstrap_from_manifest.py island.bootstrap.stage0.yaml --apply
        --steps scaffold.directories materialize.templates
    - env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      name: Commit sync changes
      run: "if git status --short | grep -q '.'; then\n  git config user.name \"island-sync-bot\"\
        \n  git config user.email \"sync-bot@src/ai.io\"\n  git commit -am \"chore:\
        \ sync scaffold from manifest\"\n  git push\nelse\n  echo \"No changes detected\"\
        \nfi\n"

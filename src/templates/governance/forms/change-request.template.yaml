apiVersion: machinenativeops.io/v2
kind: ChangeRequest
metadata:
  id: CHG-YYYY-NNN
  title: 简要描述变更内容
  createdAt: YYYY-MM-DDTHH:MM:SSZ
  labels:
    machinenativeops.io/service: ''
    machinenativeops.io/team: ''
    machinenativeops.io/priority: ''
spec:
  type: 常规变更
  requester:
    userId: ''
    name: ''
    email: ''
    team: ''
  riskLevel: 中
  priority: P2
  impactAssessment:
    servicesAffected:
    - service-name-1
    - service-name-2
    downtimeExpected: 0 min
    usersImpacted: 0
    dataImpact: none
    dependencies:
    - 其他变更或服务的依赖
  approval:
    method: CAB
    status: Pending
    approver: ''
    approvedAt: ''
    comments: ''
  scheduledWindow:
    startTime: YYYY-MM-DDTHH:MM:SSZ
    endTime: YYYY-MM-DDTHH:MM:SSZ
    timezone: UTC
  implementationPlan:
    steps:
    - order: 1
      description: '步骤1: 备份当前配置'
      estimatedDuration: 5 min
      assignee: ''
      validationCriteria: 备份文件存在且可恢复
    - order: 2
      description: '步骤2: 执行变更'
      estimatedDuration: 10 min
      assignee: ''
      validationCriteria: 变更成功，无错误日志
    - order: 3
      description: '步骤3: 验证变更效果'
      estimatedDuration: 5 min
      assignee: ''
      validationCriteria: 服务健康检查通过
    preChecks:
    - 确认备份已完成
    - 验证回滚方案可用
    - 确认监控和告警正常
    - 通知相关团队
    postChecks:
    - 检查服务健康状态
    - 验证关键业务流程
    - 监控错误率和性能指标
    - 确认无告警触发
  rollbackPlan:
    steps:
    - order: 1
      description: '步骤1: 停止新版本'
    - order: 2
      description: '步骤2: 恢复到前一版本'
    - order: 3
      description: '步骤3: 验证回滚成功'
    triggers:
    - 健康检查连续失败 3 次
    - 错误率超过 5%
    - 响应时间超过基线 200%
    - 业务流程验证失败
    estimatedTime: 10 min
  testing:
    environment: staging
    testCases:
    - '功能测试: 验证新功能正常工作'
    - '性能测试: 响应时间符合预期'
    - '集成测试: 与其他服务正常交互'
    testResults: https://link-to-test-report
  metrics:
    kpi:
    - name: response_time
      baseline: 100ms
      target: <150ms
    - name: error_rate
      baseline: 0.1%
      target: <0.2%
    audit:
      logEnabled: true
      reviewer: ''
  communication:
    stakeholders:
    - team-lead@example.com
    - product-manager@example.com
    notificationChannels:
    - slack:#engineering
    - email:team@example.com
    statusPageUpdate: false
status:
  phase: Draft
  lastUpdate: ''
  notes: []
--- null
...

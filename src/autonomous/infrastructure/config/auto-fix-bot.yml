<<<<<<< HEAD
advanced_architecture_sync:
  source_patterns:
  - destination: advanced-system-dist/
    pattern: advanced-system-src/**/*.py
    transformation: compile_and_optimize
    validation: run_unit_tests
  - destination: advanced-system-dist/
    pattern: advanced-system-src/**/*.yaml
    transformation: validate_and_minify
    validation: schema_check
  - destination: advanced-system-dist/
    pattern: advanced-system-src/**/*.json
    transformation: validate_and_compress
    validation: json_schema_validate
  sync_commands:
  - command: "python scripts/validate_architecture_integrity.py \\\n  --src advanced-system-src/\
      \ \\\n  --checks all \\\n  --output root-evidence/architecture/pre-sync-validation.json\n"
    name: pre_sync_validation
  - command: "python scripts/build/sync_architecture.py \\\n  --src advanced-system-src/\
      \ \\\n  --dist advanced-system-dist/ \\\n  --apply-transformations \\\n  --verify-integrity\
      \ \\\n  --evidence root-evidence/build-sync/\n"
    name: sync_with_transformation
  - command: "python scripts/verify_sync_completeness.py \\\n  --src advanced-system-src/\
      \ \\\n  --dist advanced-system-dist/ \\\n  --evidence root-evidence/architecture/post-sync-verification.json\n"
    name: post_sync_verification
audit:
  audit_format:
    actor: auto-fix-bot
    event_type: string
    evidence_hash: sha256
    signature: cosign
    target_files: array
    timestamp: RFC3339
=======
# ============================================================================
# AUTO-FIX-BOT 配置文件 - Enterprise Code Intelligence Platform
# ============================================================================
# Project: SynergyMesh - Senior Automation Architect & Code Intelligence Engineer
# Version: 3.0.0 (Phase 1 Production Ready)
# Target: 月收入千萬美元企劃 - 第一版落地實作
# ============================================================================

# ==================== Metadata ====================
name: "Enterprise Code Intelligence Platform"
id: machinenativeops-auto-fix-bot
version: "3.0.0"
owner:
  team: platform-governance
  contacts: ["platform@imachinenativeops.com"]
  approvers: ["tech-lead", "security-head"]

metadata:
  created_at: "2025-01-17T12:00:00Z"
  updated_at: "2025-11-25T14:39:00Z"
  labels: [auto-fix, governance, policy-enforcement, deep-validation, hyperautomation]
  compliance_tags: [slsa-l3, in-toto, audit-trail, machinenativeops-free, enterprise-grade]
  project_structure: machinenativeops
  architecture_pattern: "智能超自動化治理架構"

description: >
  企業級自動化代碼分析與修復系統。整合深度可驗證模組、Policy Gate驗證、
  多層證據生成與審計追蹤。符合碎片化YAML提升為深度可驗證模組的治理原則。
  支援月收入千萬美元規模的自動化運營。

# ==================== Project Structure Mapping ====================
project_mapping:
  config_root: ".config"
  policies_root: "governance/policies/conftest"
  governance_root: ".governance"
  evidence_root: "root-evidence"
  schemas_root: "schemas"
  scripts_root: "scripts"
  templates_root: "templates"
  docs_root: "docs"
  mcp_servers_root: "mcp-servers"
  test_vectors_root: "test-vectors"
  autofix_root: "config/autofix"
  agent_root: "agent"
  hyperautomation_root: "intelligent-hyperautomation"
  core_root: "advanced-system-src/core"

# ============================================================================
# 系統設置 (System Settings)
# ============================================================================
system:
  environment: "production"
  log_level: "INFO"
  max_workers: 16
  timeout: 300
  retry_attempts: 3
  
  # 性能配置
  performance:
    cache_enabled: true
    cache_ttl: 3600
    parallel_analysis: true
    incremental_analysis: true
    batch_size: 100
    
  # 監控配置
  monitoring:
    enabled: true
    metrics_port: 9090
    health_check_interval: 30
    alert_threshold: 0.8
    distributed_tracing: true

# ============================================================================
# 代碼分析配置 (Code Analysis Configuration)
# ============================================================================
code_analysis:
>>>>>>> main
  enabled: true
  immutable_storage: true
  retention_days: 365
  storage_path: root-evidence/audit/auto-fix/
  tracked_events:
  - fix_triggered
  - fix_applied
  - fix_failed
  - policy_gate_checked
  - evidence_generated
  - notification_sent
auto_repair:
  enabled: true
  repair_rules:
  - auto_apply: false
    categories:
    - sql_injection
    - xss
    - hardcoded_secrets
    - insecure_dependencies
    enabled: true
    name: security_fixes
    priority: 1
    require_review: true
  - auto_apply: true
    enabled: true
    name: code_style
    priority: 3
    require_review: false
    tools:
    - black
    - prettier
    - gofmt
    - rustfmt
  - auto_apply: false
    enabled: true
    name: performance_optimization
    priority: 2
    require_review: true
    thresholds:
      complexity: 10
      duplication: 0.05
      n_plus_one: true
  - auto_apply: false
    enabled: true
    exclude_major: true
    name: dependency_updates
    priority: 2
    require_review: true
    strategies:
    - minor
    - patch
  repair_strategies:
  - enabled: true
    name: rule_based
    priority: 1
    rules_dir: config/autofix/rules
  - enabled: true
    name: ast_based
    priority: 2
    transformations_dir: config/autofix/transformations
  - confidence_threshold: 0.85
    enabled: true
    model_path: models/repair-model.pkl
    name: ml_based
    priority: 3
  verification:
    coverage_threshold: 0.85
    performance_check: true
    rollback_on_failure: true
    run_tests: true
    security_rescan: true
    test_timeout: 300
bot_config:
  auto_merge: false
  enabled: true
  max_fixes_per_run: 10
  require_human_approval: true
  scopes:
  - enabled: true
    name: deep-yaml-validation
    paths:
    - templates/**/*.yaml
    - schemas/**/*.json
    - config/**/*.yaml
    - .governance/**/*.yaml
  - enabled: true
    name: mcp-servers-validation
    paths:
    - mcp-servers/**/*.py
    - mcp-servers/**/*.json
  - enabled: true
    name: advanced-architecture-sync
    paths:
    - advanced-architecture/**/*
    - advanced-system-src/**/*
    - advanced-system-dist/**/*
  - enabled: true
    name: evidence-chain-validation
    paths:
    - root-evidence/**/*.json
    - attest-build-provenance-main/**/*
  timeout: 30m
  trigger_events:
  - push
  - pull_request
  - schedule
  - workflow_dispatch
changelog:
- by: platform-governance
  change: 初始Auto-Fix Bot配置，支援基本YAML驗證與修復
  ts: '2025-01-17T12:00:00Z'
  version: 1.0.0
- by: security-team
  change: 新增Policy Gate整合與證據鏈生成
  ts: '2025-01-17T12:15:00Z'
  version: 1.5.0
- by: platform-governance
  change: 完整整合深度可驗證模組、去標籤化架構策略與Imachinenativeops專案架構適配
  ts: '2025-01-17T12:30:00Z'
  version: 2.0.0
- by: automation-architect
  change: Phase 1 生產就緒配置：企業級代碼分析、自動修復、監控告警、多語言治理架構
  ts: '2025-11-25T14:39:00Z'
  version: 3.0.0
cicd:
  enabled: true
  git_hooks:
    pre_commit:
      checks:
      - lint
      - format
      - security
      enabled: true
      timeout: 60
    pre_push:
      checks:
      - test
      - build
      - audit
      enabled: true
      timeout: 120
  workflow_triggers:
  - actions:
    - analyze
    - test
    branches:
    - main
    - develop
    enabled: true
    name: on_commit
  - actions:
    - opened
    - synchronize
    checks:
    - lint
    - test
    - security
    enabled: true
    name: on_pull_request
  - actions:
    - full_scan
    - dependency_audit
    cron: 0 2 * * *
    enabled: true
    name: on_schedule
code_analysis:
  dynamic_analysis:
    enabled: true
    tools:
    - check_leaks: true
      enabled: true
      name: valgrind
    - enabled: true
      name: address_sanitizer
    - enabled: true
      name: thread_sanitizer
    - enabled: true
      name: memory_profiler
  enabled: true
  performance_analysis:
    enabled: true
    tools:
    - enabled: true
      name: perf
    - enabled: true
      name: flamegraph
    - enabled: true
      name: py_spy
    - enabled: true
      name: benchmark
      threshold: 0.95
  security_scanning:
    enabled: true
    tools:
    - enabled: true
      name: semgrep
      rules: p/security-audit
      severity:
      - ERROR
      - WARNING
    - enabled: true
      fail_on: upgradable
      name: snyk
      token: ${SNYK_TOKEN}
    - enabled: true
      name: trivy
      scan_types:
      - vuln
      - config
      - secret
      severity: HIGH,CRITICAL
    - enabled: true
      fail_on_cvss: 7.0
      name: owasp_dependency_check
  static_analysis:
    enabled: true
    tools:
    - enabled: true
      name: sonarqube
      quality_gate: true
      token: ${SONARQUBE_TOKEN}
      url: http://sonarqube:9000
    - config: .pylintrc
      enabled: true
      min_score: 8.0
      name: pylint
    - config: .eslintrc.json
      enabled: true
      max_warnings: 0
      name: eslint
    - deny_warnings: true
      enabled: true
      name: clippy
cross_layer_bridges:
  evidence_to_trust:
    attestation_format: in-toto
    enabled: true
    generators:
    - command: "python cross-layer-bridges/evidence-to-trust/generate_attestation.py\
        \ \\\n  --type build \\\n  --builder ${GITHUB_WORKFLOW} \\\n  --source ${GITHUB_REPOSITORY}\
        \ \\\n  --commit ${GITHUB_SHA} \\\n  --output root-evidence/attestation/build-attestation.json\n"
      name: build_attestation
      predicate_type: https://slsa.dev/provenance/v1
      trigger: build_complete
    - command: "python cross-layer-bridges/evidence-to-trust/generate_attestation.py\
        \ \\\n  --type deployment \\\n  --environment ${DEPLOY_ENVIRONMENT} \\\n \
        \ --artifacts ${DEPLOYED_ARTIFACTS} \\\n  --output root-evidence/attestation/deployment-attestation.json\n"
      name: deployment_attestation
      predicate_type: https://imachinenativeops.com/src/autonomous/deployment/v1
      trigger: deployment_complete
    signing_key_type: cosign
    trust_root: root-evidence/trust-anchors/
deep_validation_schema:
  yaml_structure_requirements:
    mandatory_sections:
    - metadata
    - version
    - owner
    - audit
    metadata_requirements:
      compliance_tags_allowed:
<<<<<<< HEAD
      - slsa-l3
      - in-toto
      - audit-trail
      - axiom-free
      - deep-validation
      labels_min_count: 2
=======
        - slsa-l3
        - in-toto
        - audit-trail
        - machinenativeops-free
        - deep-validation
    
    versioning_requirements:
      format: "semantic"
      pattern: "^\\d+\\.\\d+\\.\\d+$"
      changelog_required: true
    
    owner_requirements:
>>>>>>> main
      required_fields:
      - created_at
      - updated_at
      - labels
      - compliance_tags
      timestamp_format: RFC3339
    owner_requirements:
      contact_format: email
      required_fields:
      - team
      - contacts
      team_allowed_values:
      - platform-governance
      - security-team
      - development-team
    versioning_requirements:
      changelog_required: true
      format: semantic
      pattern: ^\d+\.\d+\.\d+$
description: '企業級自動化代碼分析與修復系統。整合深度可驗證模組、Policy Gate驗證、 多層證據生成與審計追蹤。符合碎片化YAML提升為深度可驗證模組的治理原則。
  支援月收入千萬美元規模的自動化運營。

  '
error_recovery:
  procedures:
  - description: Schema驗證失敗時的復原程序
    name: schema_validation_failure
    steps:
    - backup_current_file
    - restore_from_template
    - merge_existing_data
    - re_validate
    - notify_team
  - description: 證據完整性受損時的應急程序
    name: evidence_corruption_detected
    steps:
    - isolate_corrupted_evidence
    - restore_from_backup
    - re_generate_signatures
    - audit_corruption_cause
    - escalate_to_security_team
  - description: Policy Gate持續失敗的處理程序
    name: policy_gate_permanent_failure
    steps:
    - create_emergency_issue
    - disable_auto_merge
    - require_manual_review
    - escalate_to_governance_team
    - document_exception_request
evidence_chain_validation:
  attestation_requirements:
    format: in-toto
    predicate_required: true
    statement_type: https://in-toto.io/Statement/v0.1
    subject_digest: sha256
  provenance_requirements:
    build_type_required: true
    builder_id_required: true
    format: SLSA v1.0
    invocation_required: true
    materials_complete: true
  signature_requirements:
    algorithm: ES256
    certificate_chain: true
    key_type: ECDSA P-256
    timestamp_required: true
  validation_chain:
  - command: "find root-evidence/ -name \"*.json\" -exec \\\n  cosign verify-blob\
      \ --signature {}.sig \\\n  --certificate-identity-regexp \".*@imachinenativeops\\\
      .com\" {} \\;\n"
    step: verify_signatures
  - command: "python scripts/validate_attestations.py \\\n  --evidence-dir root-evidence/\
      \ \\\n  --schema schemas/attestation-schema.json \\\n  --output root-evidence/validation/attestation-validation.json\n"
    step: validate_attestations
  - command: "python scripts/verify_provenance_chain.py \\\n  --provenance-dir root-evidence/provenance/\
      \ \\\n  --trust-root root-evidence/trust-anchors/ \\\n  --output root-evidence/validation/provenance-validation.json\n"
    step: verify_provenance_chain
evidence_generation:
  enabled: true
  generators:
  - command: "syft packages ./ -o spdx-json \\\n  --file root-evidence/provenance/rag-provenance/sbom/auto-fix-sbom.json\n\
      cosign sign-blob root-evidence/provenance/rag-provenance/sbom/auto-fix-sbom.json\
      \ \\\n  --output-signature root-evidence/provenance/rag-provenance/sbom/auto-fix-sbom.json.sig\n"
    name: sbom-generator
    trigger: any_code_change
  - command: "python cross-layer-bridges/evidence-to-trust/generate_attestation.py\
      \ \\\n  --type auto-fix \\\n  --subject ${CHANGED_FILES} \\\n  --predicate-type\
      \ \"https://imachinenativeops.com/auto-fix/v1\" \\\n  --output root-evidence/attestation/auto-fix-attestation.json\n"
    name: attestation-generator
    trigger: fix_applied
  - command: "python scripts/generate_slsa_provenance.py \\\n  --workflow-run ${GITHUB_RUN_ID}\
      \ \\\n  --output root-evidence/provenance/auto-fix-provenance.json \\\n  --format\
      \ slsa-v1.0\n"
    name: provenance-generator
    trigger: workflow_complete
  immutable: true
  storage_backend: root-evidence/
fix_rules:
- actions:
  - command: "python tools/validate_vectors.py ${FILE_PATH} \\\n  --schema schemas/template-schema.json\
      \ \\\n  --output-format slsa \\\n  --evidence-dir root-evidence/validation/\n"
    name: schema-validation
  - command: "python scripts/auto-fix/add_metadata.py ${FILE_PATH} \\\n  --template\
      \ templates/metadata-template.yaml \\\n  --audit-trail root-evidence/audit/\n"
    name: auto-fix-missing-metadata
    when: missing_fields.contains('metadata')
  - command: "python scripts/auto-fix/generate_test_vectors.py ${FILE_PATH} \\\n \
      \ --output test-vectors/${BASE_NAME}_vectors.json \\\n  --validate-against schemas/\n"
    name: generate-test-vectors
    when: missing_fields.contains('test_vectors')
  enabled: true
  name: deep-yaml-schema-validation
  priority: critical
  scope: deep-yaml-validation
  triggers:
  - file_pattern: templates/**/*.yaml
  - schema_violation: true
  - missing_required_fields: true
- actions:
  - command: "python scripts/auto-fix/fix_mcp_imports.py ${FILE_PATH} \\\n  --allowed-imports\
      \ config/mcp-allowed-imports.json \\\n  --audit root-evidence/mcp-compliance/\n"
    name: fix-imports
  - command: 'mypy --install-types --non-interactive ${FILE_PATH}

      python scripts/auto-fix/add_type_hints.py ${FILE_PATH}

      '
    name: add-type-hints
  enabled: true
  name: mcp-servers-compliance
  priority: high
  scope: mcp-servers-validation
  triggers:
  - file_pattern: mcp-servers/**/*.py
  - import_violations: true
  - missing_type_hints: true
- actions:
  - command: "python scripts/build/sync_architecture.py \\\n  --src advanced-system-src/\
      \ \\\n  --dist advanced-system-dist/ \\\n  --verify-integrity \\\n  --evidence\
      \ root-evidence/build-sync/\n"
    name: sync-to-dist
  enabled: true
  name: architecture-consistency
  priority: medium
  scope: advanced-architecture-sync
  triggers:
  - file_pattern: advanced-system-src/**/*
  - build_mismatch: true
- actions:
  - command: "cosign verify-blob \\\n  --signature ${FILE_PATH}.sig \\\n  --certificate-identity-regexp\
      \ \".*@imachinenativeops\\.com\" \\\n  --certificate-oidc-issuer \"https://token.actions.githubusercontent.com\"\
      \ \\\n  ${FILE_PATH}\n"
    name: verify-signatures
  - command: "python cross-layer-bridges/evidence-to-trust/generate_attestation.py\
      \ \\\n  --input ${FILE_PATH} \\\n  --output ${FILE_PATH}.att \\\n  --format\
      \ in-toto \\\n  --sign-key ${COSIGN_PRIVATE_KEY}\n"
    name: regenerate-attestation
    when: attestation_invalid == true
  enabled: true
  name: evidence-chain-integrity
  priority: critical
  scope: evidence-chain-validation
  triggers:
  - file_pattern: root-evidence/**/*.json
  - signature_missing: true
  - attestation_invalid: true
id: machinenativeops-auto-fix-bot
integration:
  devcontainer:
    dockerfile: config/dev/Dockerfile
    extensions:
    - ms-python.python
    - ms-vscode.vscode-yaml
    - redhat.vscode-yaml
    post_create_commands:
    - pip install -r requirements.txt
    - pre-commit install
    - python scripts/setup_auto_fix.py
  github_actions:
    environment_vars:
    - COSIGN_PRIVATE_KEY
    - SLACK_WEBHOOK_URL
    - SMTP_SERVER
    steps:
    - name: Setup Environment
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    - name: Install Dependencies
      run: 'pip install -r requirements.txt

        pip install cosign syft jsonschema pyyaml

        '
    - env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      name: Run Auto-Fix Bot
      run: python scripts/auto_fix_bot.py --config auto-fix-bot.yml
    trigger_on:
    - push
    - pull_request
    workflow_file: .github/workflows/auto-fix-validation.yml
languages:
  go:
    enabled: true
    test_framework: go test
    tools:
    - golangci-lint
    - gofmt
    - go vet
    version: 1.18+
  java:
    enabled: true
    test_framework: junit
    tools:
    - checkstyle
    - spotbugs
    - pmd
    version: 11+
  javascript:
    enabled: true
    test_framework: jest
    tools:
    - eslint
    - prettier
    - typescript
    version: 14+
  python:
    enabled: true
    test_framework: pytest
    tools:
    - pylint
    - black
    - mypy
    - bandit
    version: 3.9+
  rust:
    enabled: true
    test_framework: cargo test
    tools:
    - clippy
    - rustfmt
    version: 1.60+
  typescript:
    enabled: true
    test_framework: jest
    tools:
    - tslint
    - prettier
    version: 5.0+
mcp_servers_config:
  validation_rules:
  - allowed_imports:
    - json
    - asyncio
    - logging
    - pathlib
    - typing
    - dataclasses
    - enum
    - abc
    - contextlib
    - mcp.server
    - mcp.types
    description: 限制MCP servers的導入模組
    forbidden_imports:
    - os.system
    - subprocess
    - eval
    - exec
    - __import__
    name: import_restrictions
  - checks:
    - no_shell_execution
    - no_file_system_write_outside_sandbox
    - no_network_calls_without_approval
    - input_validation_required
    description: MCP servers安全性檢查
    name: security_checks
  - description: 強制型別標註要求
    name: type_annotation_requirements
    requirements:
    - all_functions_typed
    - all_class_methods_typed
    - return_types_specified
    - parameter_types_specified
metadata:
  architecture_pattern: 智能超自動化治理架構
  compliance_tags:
  - slsa-l3
  - in-toto
  - audit-trail
  - axiom-free
  - enterprise-grade
  created_at: '2025-01-17T12:00:00Z'
  labels:
  - auto-fix
  - governance
  - policy-enforcement
  - deep-validation
  - hyperautomation
  project_structure: machinenativeops
  updated_at: '2025-11-25T14:39:00Z'
monitoring:
  alerts:
  - channels:
    - email
    - slack
    - pagerduty
    condition: vulnerability.severity == CRITICAL
    enabled: true
    name: high_vulnerability_detected
    severity: CRITICAL
  - channels:
    - email
    - slack
    condition: repair_failures / total_repairs > 0.1
    enabled: true
    name: repair_failure_rate
    threshold: 0.1
  - channels:
    - slack
    condition: analysis_duration > 300
    enabled: true
    name: analysis_timeout
    threshold: 300
  enabled: true
  logging:
    format: json
    level: INFO
    loki:
      enabled: true
      retention: 30d
      url: http://loki:3100
    rotation:
      max_age: 7d
      max_size: 100MB
  metrics:
    custom_metrics:
    - issues_detected_total
    - issues_fixed_total
    - analysis_duration_seconds
    - repair_success_rate
    prometheus:
      enabled: true
      port: 9090
      retention: 15d
      scrape_interval: 15s
  tracing:
    jaeger:
      enabled: true
      endpoint: http://jaeger:6831
      sampling_rate: 0.1
multi_language_governance:
  framework_1_popular_languages:
    languages:
    - Python
    - JavaScript
    - TypeScript
    - Go
    - Rust
    name: 流行語言 (Popular Languages)
    use_cases:
    - 快速原型開發
    - 治理模組自動化
    - 跨平台工具鏈
  framework_2_server_side_languages:
    languages:
    - Java
    - C#
    - Node.js
    - Kotlin
    - Scala
    name: 服務器端語言 (Server-side Languages)
    use_cases:
    - 後端 API 開發
    - 微服務治理
    - 企業級系統
  framework_3_web_languages:
    languages:
    - JavaScript
    - TypeScript
    - HTML
    - CSS
    name: Web語言 (Web Languages)
    use_cases:
    - UI 治理觀測
    - 前端 SDK 封裝
    - 治理可視化
  framework_4_mobile_languages:
    languages:
    - Swift
    - Kotlin
    - Dart
    - React Native
    name: 移動語言 (Mobile Languages)
    use_cases:
    - 移動端治理 SDK
    - 觀測模組
    - 跨平台治理工具
  framework_5_data_representation_languages:
    languages:
    - JSON
    - YAML
    - XML
    - Protocol Buffers
    name: 數據表示語言 (Data Representation Languages)
    use_cases:
    - 治理邊界文件
    - 責任矩陣定義
    - 事件日誌記錄
    - 配置管理
  framework_6_other_languages:
    languages:
    - C++
    - Haskell
    - Elixir
    - Zig
    name: 其它語言 (Other Languages)
    use_cases:
    - 高性能治理模組
    - 安全性強化
    - 函數式治理邏輯
name: Enterprise Code Intelligence Platform
notifications:
  channels:
  - enabled: true
    from: autofix@machinenativeops.com
    name: email
    smtp_server: ${SMTP_SERVER}
    to:
    - platform@machinenativeops.com
  - channel: '#auto-fix-alerts'
    enabled: true
    name: slack
    webhook_url: ${SLACK_WEBHOOK}
  - create_issues: true
    create_pr_comments: true
    enabled: true
    name: github
    token: ${GITHUB_TOKEN}
  - enabled: true
    headers:
      Content-Type: application/json
    method: POST
    name: webhook
    url: ${WEBHOOK_URL}
  enabled: true
  rules:
  - channels:
    - email
    - slack
    - github
    name: vulnerability_found
    severity:
    - HIGH
    - CRITICAL
    template: vulnerability_alert
  - channels:
    - github
    create_pr: true
    name: repair_completed
    template: repair_summary
  - channels:
    - email
    - slack
    name: analysis_failed
    template: analysis_error
owner:
  approvers:
  - tech-lead
  - security-head
  contacts:
  - platform@imachinenativeops.com
  team: platform-governance
policy_gates:
- failure_action: block
  name: pre-validation-gate
  notification:
    email:
    - security@imachinenativeops.com
    slack: '#imachinenativeops-alerts'
  policies:
  - engine: OPA
    min_score: 100
    path: governance/policies/conftest/yaml-structure.rego
    required: true
  - engine: kyverno
    path: .governance/security-policy.yaml
    required: true
  stage: pre-fix
- evidence_requirements:
  - sbom_generated: true
  - attestation_signed: true
  - provenance_complete: true
  - audit_trail_immutable: true
  failure_action: create_issue
  name: post-fix-validation-gate
  policies:
  - engine: OPA
    min_score: 95
    path: governance/policies/conftest/deep-validation.rego
    required: true
  - engine: jsonschema
    path: schemas/complete-validation-schema.json
    required: true
  stage: post-fix
  success_action: auto_approve
project_mapping:
  agent_root: agent
  autofix_root: config/autofix
  config_root: .config
  core_root: advanced-system-src/core
  docs_root: docs
  evidence_root: root-evidence
  governance_root: .governance
  hyperautomation_root: intelligent-hyperautomation
  mcp_servers_root: mcp-servers
  policies_root: governance/policies/conftest
  schemas_root: schemas
  scripts_root: scripts
  templates_root: templates
  test_vectors_root: test-vectors
reporting:
  content:
  - summary: true
  - vulnerabilities: true
  - performance_issues: true
  - code_quality: true
  - recommendations: true
  - metrics: true
  - trend_analysis: true
  distribution:
  - email: true
  - slack: true
  - github: true
  - dashboard: true
  - s3: true
  enabled: true
  formats:
  - enabled: true
    name: json
    schema_version: '1.0'
  - enabled: true
    name: html
    template: default
  - enabled: true
    include_charts: true
    name: pdf
  - enabled: true
    include_toc: true
    name: markdown
rollback:
  automatic_rollback: false
  conditions:
  - enabled: true
    name: test_failure_after_fix
    rollback_action: revert_commits
  - enabled: true
    name: policy_gate_failure
    rollback_action: create_issue_and_block
  - enabled: true
    name: evidence_corruption
    rollback_action: emergency_stop
  enabled: true
  require_approval: true
  rollback_steps:
  - command: git stash push -m 'pre-rollback-backup-${TIMESTAMP}'
    name: backup_current_state
  - command: git reset --hard ${BACKUP_COMMIT}
    name: revert_changes
  - command: "python scripts/verify_rollback.py \\\n  --target-state ${BACKUP_COMMIT}\
      \ \\\n  --evidence root-evidence/rollback/\n"
    name: verify_rollback
security:
  audit:
    blockchain_backed: true
    blockchain_provider: hyperledger
    enabled: true
    immutable: true
    log_all_actions: true
    retention_days: 90
  authentication:
    enabled: true
    method: oauth2
    provider: github
    scopes:
    - repo
    - read:org
  authorization:
    enabled: true
    rbac: true
    roles:
    - name: admin
      permissions:
      - read
      - write
      - delete
      - approve
    - name: reviewer
      permissions:
      - read
      - write
      - approve
    - name: developer
      permissions:
      - read
      - write
    - name: viewer
      permissions:
      - read
  encryption:
    algorithm: AES-256-GCM
    at_rest: true
    enabled: true
    in_transit: true
    key_rotation: 86400
storage:
  cache:
    backend: redis
    connection: ${REDIS_URL}
    max_memory: 2GB
    ttl: 3600
  files:
    backend: s3
    bucket: ${S3_BUCKET}
    region: ${AWS_REGION}
    versioning: true
  results:
    backend: postgresql
    connection: ${DATABASE_URL}
    encryption: true
    retention_days: 365
system:
  environment: production
  log_level: INFO
  max_workers: 16
  monitoring:
    alert_threshold: 0.8
    distributed_tracing: true
    enabled: true
    health_check_interval: 30
    metrics_port: 9090
  performance:
    batch_size: 100
    cache_enabled: true
    cache_ttl: 3600
    incremental_analysis: true
    parallel_analysis: true
  retry_attempts: 3
  timeout: 300
version: 3.0.0

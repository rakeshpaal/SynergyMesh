alerting:
  critical:
  - condition: '> 0'
    escalation: immediate
    metric: critical_security_vulnerabilities
    notification:
    - '@security-team'
    - '#security-alerts'
  - condition: '> 5'
    escalation: 1 hour
    metric: dependency_rule_violations
    notification:
    - '@architecture-team'
    - '#architecture-alerts'
  - condition: '> 0'
    escalation: 4 hours
    metric: circular_dependency_count
    notification:
    - '@architecture-team'
  warning:
  - condition: < 70
    escalation: daily
    metric: test_coverage
    notification:
    - '@qa-team'
    - '#quality'
  - condition: '> 3.0'
    escalation: weekly
    metric: technical_debt_score
    notification:
    - '@architecture-team'
architecture_health:
  breaking_changes:
    collection_frequency: on_release
    current_value: 1
    description: Count of breaking changes in last 30 days
    measurement: count
    metric: breaking_api_changes
    severity: high
    target: 0
    threshold: 2
  cross_domain_coupling:
    collection_frequency: weekly
    current_value: 15
    description: Measure of inappropriate cross-domain dependencies
    measurement: score
    metric: cross_domain_coupling_score
    severity: medium
    target: 10
    threshold: 20
  hotspot_count:
    collection_frequency: daily
    current_value: 8
    description: Number of files with hotspot score > 85
    measurement: count
    metric: architecture_hotspot_count
    severity: medium
    target: 5
    threshold: 15
  layer_violations:
    collection_frequency: on_commit
    current_value: 0
    description: Count of cross-layer dependency violations
    measurement: count
    metric: architectural_layer_violations
    severity: critical
    threshold: 0
  module_cohesion:
    collection_frequency: weekly
    current_value: 0.75
    description: Average cohesion score per module (0-1)
    measurement: ratio
    metric: avg_module_cohesion
    severity: low
    target: 0.8
    threshold: 0.6
  technical_debt_score:
    collection_frequency: weekly
    current_value: 2.3
    description: Aggregate technical debt score (1-5 scale)
    measurement: score
    metric: overall_technical_debt_score
    severity: medium
    target: 2.0
    threshold: 3.0
code_quality:
  critical_path_coverage:
    collection_frequency: on_commit
    current_value: 85
    description: Coverage of critical execution paths
    measurement: percentage
    metric: critical_path_test_coverage
    severity: critical
    target: 95
    threshold: 90
  critical_vulnerabilities:
    auto_block: true
    collection_frequency: on_commit
    current_value: 0
    description: Count of critical severity vulnerabilities
    measurement: count
    metric: critical_security_vulnerabilities
    severity: critical
    threshold: 0
  cyclomatic_complexity:
    collection_frequency: daily
    current_value: 8.5
    description: Average cyclomatic complexity per function
    measurement: number
    metric: avg_cyclomatic_complexity
    severity: medium
    target: 10
    threshold: 15
  high_complexity_functions:
    collection_frequency: daily
    current_value: 12
    description: Count of functions with complexity > 20
    measurement: count
    metric: functions_exceeding_complexity_threshold
    severity: medium
    target: 0
    threshold: 10
  high_vulnerabilities:
    collection_frequency: on_commit
    current_value: 0
    description: Count of high severity vulnerabilities
    measurement: count
    metric: high_security_vulnerabilities
    severity: high
    threshold: 0
  language_violations:
    collection_frequency: on_commit
    current_value: 0
    description: Count of banned language usage violations
    measurement: count
    metric: language_policy_violations
    severity: high
    target: 0
    threshold: 10
  medium_vulnerabilities:
    collection_frequency: daily
    current_value: 2
    description: Count of medium severity vulnerabilities
    measurement: count
    metric: medium_security_vulnerabilities
    severity: medium
    target: 0
    threshold: 5
  test_coverage:
    collection_frequency: on_commit
    current_value: 72
    description: Overall code coverage percentage
    measurement: percentage
    metric: overall_test_coverage
    severity: high
    target: 85
    threshold: 70
description: Architecture health metrics and quality gates
governance_compliance:
  circular_dependencies:
    collection_frequency: daily
    current_value: 0
    description: Number of circular dependency chains
    measurement: count
    metric: circular_dependency_count
    severity: critical
    threshold: 0
  contract_coverage:
    collection_frequency: weekly
    current_value: 25
    description: Percentage of critical APIs with contracts
    measurement: percentage
    metric: behavior_contract_coverage
    severity: medium
    target: 100
    threshold: 80
  dependency_violations:
    collection_frequency: on_commit
    current_value: 0
    description: Count of dependency rule violations
    measurement: count
    metric: dependency_rule_violations
    severity: critical
    threshold: 0
  deprecated_without_migration:
    collection_frequency: weekly
    current_value: 0
    description: Deprecated modules lacking migration documentation
    measurement: count
    metric: deprecated_modules_without_migration_path
    severity: high
    threshold: 0
  missing_contracts:
    collection_frequency: weekly
    current_value: 45
    description: Count of active modules without behavior contracts
    improvement_plan:
      milestones:
      - date: '2026-01-31'
        priority: Critical modules first
        target: 40
      - date: '2026-03-31'
        priority: High-usage modules
        target: 30
      - date: '2026-06-30'
        priority: All active modules
        target: 15
      - date: '2026-09-30'
        priority: Legacy modules
        target: 5
      - date: '2026-12-31'
        priority: Complete coverage
        target: 0
      strategy: Reduce by 5 contracts per month
    measurement: count
    metric: modules_without_behavior_contracts
    severity: medium
    target: 0
    threshold: 10
  missing_owners:
    collection_frequency: weekly
    current_value: 0
    description: Count of modules without defined ownership
    measurement: count
    metric: modules_without_owners
    severity: high
    threshold: 5
  module_mapping_completeness:
    collection_frequency: daily
    current_value: 0
    description: Count of code modules not in system-module-map.yaml
    measurement: count
    metric: modules_without_mapping
    severity: high
    threshold: 0
  namespace_compliance:
    collection_frequency: on_commit
    current_value: 0
    description: Count of modules using undefined namespaces
    measurement: count
    metric: undefined_namespace_usage
    severity: critical
    threshold: 0
id: machinenativeops.architecture-health
improvement_tracking:
  q1_2026:
    targets:
    - current: 45
      metric: missing_contracts
      progress: on_track
      target: 30
    - current: 72
      metric: test_coverage
      progress: on_track
      target: 80
    - current: 2.3
      metric: technical_debt_score
      progress: at_risk
      target: 2.0
  trends:
    enabled: true
    lookback_period: 90 days
    metrics_to_track:
    - test_coverage
    - technical_debt_score
    - dependency_rule_violations
    - missing_contracts
    - language_violations
quality_gates:
  pr_merge:
    blocking_conditions:
    - message: PR introduces dependency rule violations
      metric: dependency_rule_violations
      operator: '>'
      value: 0
    - baseline: current
      message: PR introduces circular dependencies
      metric: circular_dependency_count
      operator: '>'
    - message: PR introduces critical vulnerabilities
      metric: critical_security_vulnerabilities
      operator: '>'
      value: 0
    - message: PR introduces high severity vulnerabilities
      metric: high_security_vulnerabilities
      operator: '>'
      value: 0
    - message: PR violates language policy
      metric: language_policy_violations
      operator: '>'
      value: 0
    - baseline: current
      message: PR decreases test coverage
      metric: test_coverage
      operator: <
      tolerance: 0
    enabled: true
    name: Pull Request Merge Gate
    warning_conditions:
    - message: PR contains high complexity functions
      metric: cyclomatic_complexity
      operator: '>'
      value: 15
    - baseline: current
      message: PR adds modules without behavior contracts
      metric: missing_contracts
      operator: '>'
  release:
    blocking_conditions:
    - metric: critical_security_vulnerabilities
      operator: '>'
      value: 0
    - metric: dependency_rule_violations
      operator: '>'
      value: 0
    - metric: test_coverage
      operator: <
      value: 70
    - metric: critical_path_coverage
      operator: <
      value: 90
    - metric: modules_without_owners
      operator: '>'
      value: 5
    enabled: true
    name: Production Release Gate
    warning_conditions:
    - metric: medium_security_vulnerabilities
      operator: '>'
      value: 5
    - metric: technical_debt_score
      operator: '>'
      value: 3.0
references:
  architecture_governance_matrix: governance/29-docs/ARCHITECTURE_GOVERNANCE_MATRIX.md
  behavior_contracts: governance/37-behavior-contracts/
  layers_domains: governance/01-architecture/config/layers-domains.yaml
  ownership_map: governance/34-config/ownership-map.yaml
  policies: governance/23-policies/
reporting:
  dashboards:
  - config: config/grafana-dashboard.json
    name: Architecture Health Dashboard
    refresh: 5 minutes
    tool: Grafana
  - config: config/governance-dashboard.json
    name: Governance Metrics
    refresh: 1 hour
    tool: Grafana
  health_report:
    format: markdown
    frequency: weekly
    output: docs/ARCHITECTURE_HEALTH_REPORT.md
    sections:
    - Executive Summary
    - Governance Compliance
    - Code Quality
    - Architecture Health
    - Trends
    - Recommendations
version: 1.0.0

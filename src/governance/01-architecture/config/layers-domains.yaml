description: Architectural layer and domain definitions for SynergyMesh
domains:
  autonomous:
    capabilities:
    - Drone control and coordination
    - Path planning and navigation
    - Safety monitoring
    - Mission management
    cross_domain_interfaces:
    - domain: security
      integration: Safety boundary enforcement
    - domain: monitoring
      integration: Real-time telemetry
    description: Autonomous drone and UAV operations
    description_zh: 自主無人機和 UAV 操作
    modules:
    - automation.autonomous
    - automation.hyperautomation
    owner: '@automation-team'
  billing:
    capabilities:
    - Usage metering
    - Invoice generation
    - Payment processing
    - Cost allocation
    cross_domain_interfaces:
    - domain: contract
      integration: Contract-based billing
    - domain: monitoring
      integration: Usage metrics
    description: Billing, payments, and financial operations
    description_zh: 計費、支付和財務操作
    modules:
    - services.billing
    owner: '@business-team'
  contract:
    capabilities:
    - Contract creation and validation
    - Signature verification
    - Provenance attestation
    - Contract storage and retrieval
    cross_domain_interfaces:
    - domain: security
      integration: Signature verification and attestation
    - domain: billing
      integration: Contract-based billing triggers
    description: Contract lifecycle and provenance management
    description_zh: 合約生命週期和溯源管理
    modules:
    - core.contract_service.L1
    - core.slsa_provenance
    owner: '@core-platform-team'
  language_governance:
    capabilities:
    - Language boundary enforcement
    - Code quality validation
    - Style guide enforcement
    - Dependency management
    cross_domain_interfaces:
    - domain: quality
      integration: Code quality metrics
    description: Multi-language policy and code quality
    description_zh: 多語言策略和代碼質量
    modules:
    - governance.policies
    - governance.rules
    owner: '@architecture-team'
  monitoring:
    capabilities:
    - Metrics collection
    - Log aggregation
    - Alerting and notifications
    - Performance tracking
    cross_domain_interfaces:
    - domain: autonomous
      integration: Drone telemetry
    - domain: security
      integration: Security event monitoring
    description: System monitoring and observability
    description_zh: 系統監控和可觀測性
    modules:
    - core.monitoring_system
    - ops.monitoring
    owner: '@ops-team'
  security:
    capabilities:
    - Vulnerability scanning
    - Safety mechanism enforcement
    - Compliance validation
    - Access control
    cross_domain_interfaces:
    - domain: contract
      integration: Contract signature verification
    - domain: autonomous
      integration: Safety boundary checks
    description: Security, safety, and compliance
    description_zh: 安全、防護和合規
    modules:
    - core.safety_mechanisms
    - core.slsa_provenance
    - services.security_scanner
    owner: '@security-team'
evolution:
  deprecation_process:
  - Mark domain/layer as deprecated in this file
  - Update ownership-map.yaml with migration path
  - Provide 2 release cycles before removal
  - Document migration in behavior-contracts/
  principles:
  - Layers should remain stable; domains can evolve
  - New domains should be additive, not breaking
  - Layer boundaries are architectural invariants
  - Domain boundaries can be refactored with care
id: machinenativeops.layers-domains
layer_domain_matrix:
  automation:
    allowed_domains:
    - autonomous
    - monitoring
    - language_governance
  core:
    allowed_domains:
    - contract
    - security
    - monitoring
    - language_governance
  governance:
    allowed_domains:
    - language_governance
    - security
  services:
    allowed_domains:
    - contract
    - security
    - billing
    - monitoring
layers:
  apps:
    allowed_languages:
    - typescript
    - python
    - go
    dependencies:
      allowed:
      - services
      - core
      - runtime
      - infrastructure
      prohibited: []
    description: User-facing applications and UIs
    description_zh: 面向用戶的應用程式和使用者界面
    examples:
    - apps/web/ - Web applications
    - apps/cli/ - Command-line tools
    order: 7
    responsibilities:
    - Provide user interfaces
    - Implement user workflows
    - Handle user interactions
    - Compose service capabilities
    - 提供用戶界面
    - 實現用戶工作流
    - 處理用戶交互
    - 組合服務能力
    restrictions:
    - CAN depend on all lower layers
    - SHOULD prefer services over direct core access
    - MUST NOT be depended upon by other layers
    - 可以依賴所有下層
    - 應優先使用服務而非直接訪問核心
    - 不能被其他層依賴
  automation:
    allowed_languages:
    - python
    - typescript
    - go
    - cpp
    dependencies:
      allowed:
      - core
      - runtime
      - services
      - infrastructure
      prohibited:
      - apps
    description: Automation, orchestration, and intelligent agents
    description_zh: 自動化、編排和智能代理
    examples:
    - automation/intelligent/ - Intelligent automation
    - automation/architect/ - Architecture analysis
    - automation/autonomous/ - Autonomous systems
    order: 5
    responsibilities:
    - Orchestrate workflows
    - Manage intelligent automation
    - Coordinate multi-agent systems
    - Handle autonomous operations
    - 編排工作流
    - 管理智能自動化
    - 協調多代理系統
    - 處理自主操作
    restrictions:
    - CANNOT depend on apps
    - SHOULD use services as primary integration point
    - MUST respect safety boundaries
    - 不能依賴應用層
    - 應使用服務作為主要整合點
    - 必須遵守安全邊界
  core:
    allowed_languages:
    - python
    - typescript
    - go
    dependencies:
      allowed:
      - infrastructure
      - runtime
      prohibited:
      - services
      - apps
    description: Core platform modules and fundamental capabilities
    description_zh: 核心平台模組和基本能力
    examples:
    - core/unified_integration/ - Integration hub
    - core/contract_service/ - Contract management
    - core/slsa_provenance/ - Provenance attestation
    - core/safety_mechanisms/ - Safety checks
    order: 4
    responsibilities:
    - Provide platform fundamentals
    - Implement system orchestration
    - Manage configuration and registry
    - Handle security and compliance
    - 提供平台基礎功能
    - 實現系統編排
    - 管理配置和註冊表
    - 處理安全和合規
    restrictions:
    - CANNOT depend on services or apps
    - SHOULD minimize external dependencies
    - MUST maintain backward compatibility
    - 不能依賴服務層或應用層
    - 應最小化外部依賴
    - 必須保持向後兼容
  governance:
    allowed_languages:
    - yaml
    - json
    - rego
    - python
    dependencies:
      allowed: []
      prohibited:
      - core
      - runtime
      - services
      - apps
      - automation
      - infrastructure
    description: Policies, rules, schemas, and compliance definitions
    description_zh: 策略、規則、模式定義和合規性定義
    examples:
    - governance/23-policies/ - OPA/Rego policies
    - governance/31-schemas/ - JSON schemas
    - governance/rules/ - Governance rules
    order: 2
    responsibilities:
    - Define architectural policies
    - Maintain data schemas
    - Document governance rules
    - Provide compliance frameworks
    - 定義架構策略
    - 維護資料模式
    - 記錄治理規則
    - 提供合規框架
    restrictions:
    - CANNOT depend on any implementation
    - MUST be declarative only
    - CANNOT contain executable code (except validators)
    - 不能依賴任何實現
    - 必須僅為聲明式
    - 不能包含可執行代碼（除了驗證器）
  infrastructure:
    allowed_languages:
    - yaml
    - json
    - shell
    dependencies:
      allowed: []
      prohibited:
      - core
      - runtime
      - services
      - apps
      - automation
      - governance
    description: Infrastructure primitives and low-level components
    description_zh: 基礎設施原語和底層組件
    examples:
    - k8s/ - Kubernetes manifests
    - Dockerfile - Container definitions
    - docker-compose.yml - Local infrastructure
    order: 1
    responsibilities:
    - Provide hardware abstraction
    - Container orchestration (Kubernetes)
    - Network primitives
    - Storage primitives
    - 基礎硬體抽象
    - 容器編排 (Kubernetes)
    - 網路原語
    - 儲存原語
    restrictions:
    - CANNOT depend on any other layer
    - CANNOT contain business logic
    - MUST be stateless where possible
    - 不能依賴任何其他層
    - 不能包含業務邏輯
    - 必須盡可能無狀態
  runtime:
    allowed_languages:
    - python
    - typescript
    - go
    dependencies:
      allowed:
      - infrastructure
      prohibited:
      - core
      - services
      - apps
      - automation
    description: Execution environment and runtime systems
    description_zh: 執行環境和運行時系統
    examples:
    - runtime/mind_matrix/ - Cognitive runtime
    order: 3
    responsibilities:
    - Provide execution context
    - Manage process lifecycle
    - Handle resource allocation
    - 提供執行上下文
    - 管理進程生命週期
    - 處理資源分配
    restrictions:
    - CANNOT depend on core or higher layers
    - CANNOT contain business logic
    - MUST be language-agnostic where possible
    - 不能依賴核心層或更高層
    - 不能包含業務邏輯
    - 必須盡可能語言無關
  services:
    allowed_languages:
    - typescript
    - python
    - go
    dependencies:
      allowed:
      - core
      - runtime
      - infrastructure
      prohibited:
      - apps
    description: Business services and domain logic
    description_zh: 業務服務和領域邏輯
    examples:
    - services/mcp/ - MCP protocol services
    - services/agents/ - Agent services
    order: 6
    responsibilities:
    - Implement business capabilities
    - Provide domain services
    - Expose APIs and integrations
    - Handle cross-cutting concerns
    - 實現業務能力
    - 提供領域服務
    - 暴露 API 和整合
    - 處理橫切關注點
    restrictions:
    - CANNOT depend on apps
    - SHOULD minimize direct core dependencies
    - MUST expose well-defined APIs
    - 不能依賴應用層
    - 應最小化直接核心層依賴
    - 必須暴露定義明確的 API
references:
  architecture_governance_matrix: governance/29-docs/ARCHITECTURE_GOVERNANCE_MATRIX.md
  dependency_policies: governance/23-policies/
  module_mapping: config/system-module-map.yaml
  ownership_map: governance/34-config/ownership-map.yaml
validation:
  circular_dependency_check:
    description: Detect and prohibit circular dependencies
    enabled: true
  domain_isolation_check:
    description: Ensure cross-domain communication goes through defined interfaces
    enabled: true
  language_policy_check:
    description: Validate that modules use allowed languages for their layer
    enabled: true
  layer_dependency_check:
    description: Verify that layer dependencies follow the defined hierarchy
    enabled: true
version: 1.0.0

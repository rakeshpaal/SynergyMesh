code_quality:
  complexity_metrics:
    cognitive_complexity:
      enforcement: warn
      max_per_function: 20
    cyclomatic_complexity:
      enforcement: warn
      max_per_function: 15
      max_per_module: 100
    description: 程式碼複雜度指標
    nesting_depth:
      enforcement: warn
      max_depth: 4
  description: 程式碼質量標準與門檻
  language_violations:
    check_method: semgrep-language-policy
    description: 語言政策違規檢查
    enforcement: block_on_exceed
    exemption_process: require @core-owners approval
    max_violations: 5
  static_analysis:
    codeql:
      allow_medium: 5
      block_on_critical: true
      block_on_high: true
      enabled: true
    description: 靜態分析安全檢查
    semgrep:
      enforcement: block_on_high
      exemption_required: true
      high_severity_max: 0
      low_severity_max: 10
      medium_severity_max: 3
  test_coverage:
    coverage_type: line
    description: 測試覆蓋率要求
    enforcement: block_on_decrease
    exemptions:
    - generated code
    - third-party adapters
    measurement_tool: pytest-cov / jest
    minimum_coverage: 70
compliance_quality:
  data_governance:
    access_auditing: true
    audit_logging: true
    description: 數據治理要求
    enforcement: mandatory
    lineage_tracking: true
    retention_policy_defined: true
  description: 合規性要求
  license_compliance:
    allowed_licenses:
    - MIT
    - Apache-2.0
    - BSD-3-Clause
    - GPL-3.0 (with exceptions)
    description: 授權合規
    enforcement: block_on_forbidden
    forbidden_licenses:
    - proprietary (unless approved)
    - AGPL-3.0 (unless approved)
  semantic_web_standards:
    description: 語義網標準合規 (for knowledge processing plugins)
    enforcement: mandatory_for_kg_plugins
    required_standards:
      owl_compliance: OWL 2
      rdf_compliance: RDF 1.1
      sparql_support: SPARQL 1.1 (optional)
continuous_improvement:
  feedback_channels:
  - slack-quality-feedback
  - github-discussions
  - quarterly-survey
  improvement_process:
  - collect quality metrics and feedback
  - identify pain points and bottlenecks
  - propose policy updates
  - implement and communicate changes
  - monitor impact and iterate
  review_frequency: quarterly
  review_participants:
  - '@platform-team'
  - '@quality-team'
  - '@security-team'
documentation_quality:
  description: 文檔完整性要求
  documentation_coverage:
    enforcement: warn_below_threshold
    measurement: documented functions / total functions
    min_coverage: 80%
  documentation_quality:
    code_example_validation: true
    enforcement: warn_on_issues
    link_validation: true
    spelling_check: true
  required_documentation:
  - README.md (plugin overview)
  - API documentation
  - configuration guide
  - troubleshooting guide
  - security considerations
enforcement:
  ci_integration: true
  ci_tools:
  - github-actions
  - semgrep
  - codeql
  - pytest
  - jest
  exemption_process:
    approval_required: true
    approvers:
    - '@core-owners'
    - '@security-team'
    documentation_required: true
    enabled: true
    max_exemption_duration: 90 days
  validation_method: automated-ci-check
  violation_severity:
    blocked: registration/deployment blocked
    info: informational only
    warned: proceed with warning logged
exceptions:
  allowed_exceptions:
  - approval_required: true
    marker_required: alpha-stage
    reason: experimental feature
    relaxed_gates:
    - test_coverage
    - performance_targets
  - approval_required: true
    documentation_required: true
    reason: third-party integration
    relaxed_gates:
    - code_quality.complexity_metrics
  - approval_required: true
    reason: legacy plugin migration
    relaxed_gates:
    - documentation_quality
    sunset_date_required: true
  approval_workflow:
    step1: submit exemption request (GitHub issue)
    step2: platform team review
    step3: security team review (if security-related)
    step4: approval or rejection with rationale
    step5: exemption tracking and monitoring
monitoring:
  alerting:
    alert_conditions:
    - quality_gate_failure > 3 in 24h
    - security_violation detected
    - performance_regression > 20%
    channels:
    - slack-ops
    - email-platform-team
    enabled: true
  quality_dashboard:
    enabled: true
    metrics:
    - plugin_quality_score
    - gate_pass_rate
    - exemption_count
    url: https://monitoring.internal/quality-dashboard
  reporting:
    frequency: weekly
    recipients:
    - '@platform-team'
    - '@core-owners'
    report_type: quality-metrics-report
performance_quality:
  description: 性能指標與服務等級目標
  knowledge_processing:
    description: 知識處理插件專用指標
    extraction_metrics:
      entity_extraction_accuracy:
        enforcement: block_below_0.8
        measurement: F1-score on test dataset
        target: '> 0.85'
      relation_extraction_recall:
        enforcement: warn_below_target
        measurement: recall on test dataset
        target: '> 0.80'
      triple_extraction_rate:
        enforcement: warn_below_target
        measurement: throughput test
        target: '>= 1000 triples/minute'
    ontology_metrics:
      alignment_confidence:
        enforcement: warn_below_target
        measurement: average alignment confidence
        target: '> 0.75'
      ontology_consistency_score:
        enforcement: block_below_0.85
        measurement: OWL reasoner validation
        target: '> 0.90'
    resolution_metrics:
      entity_merge_precision:
        enforcement: warn_below_target
        measurement: false positive rate < 0.1
        target: '> 0.90'
      entity_resolution_accuracy:
        enforcement: block_below_0.8
        measurement: precision on benchmark
        target: '> 0.85'
  latency_targets:
    description: 延遲目標
    processing_latency:
      enforcement: warn_on_regression
      measurement: histogram metrics
      p50: < 10s per document batch
      p95: < 30s per document batch
      p99: < 60s per document batch
    query_latency:
      enforcement: block_on_severe_regression
      measurement: prometheus histogram
      p50: < 50ms
      p95: < 100ms
      p99: < 500ms
  resource_efficiency:
    cpu_utilization:
      auto_scaling_threshold: 85%
      enforcement: warn_on_inefficiency
      target_utilization: 70%
    description: 資源使用效率
    memory_usage:
      enforcement: warn_on_exceed
      max_per_document: 100MB
      max_per_worker: 4Gi
    storage_efficiency:
      enforcement: info
      triple_compression_ratio: '>= 3:1'
policy_metadata:
  created_date: '2025-12-07'
  description: Quality gates for plugin registration and deployment
  enforcement_level: mandatory
  id: plugin-quality-gates
  last_updated: '2025-12-07'
  status: active
  version: 1.0.0
policy_scope:
  applies_to:
  - all plugins
  - knowledge-processing plugins
  - integration-adapter plugins
  - custom plugins
  environments:
  - development
  - staging
  - production
  excludes:
  - experimental plugins (marked as alpha)
references:
  external:
  - https://semver.org/ (Semantic Versioning)
  - https://owasp.org/www-project-top-ten/ (OWASP Top 10)
  - https://www.w3.org/TR/owl2-overview/ (OWL 2 Standard)
  internal:
  - config/system-module-map.yaml (quality_thresholds)
  - governance/31-schemas/plugin-specification.schema.json
  - docs/ARCHITECTURE/plugin-architecture-pattern.md
reliability_quality:
  availability:
    enforcement: alert_on_breach
    max_downtime_per_month: 43.8 minutes
    measurement: uptime monitoring
    target_uptime: 99.9%
  data_integrity:
    description: 數據完整性要求
    provenance:
      audit_trail_retention: 90 days
      enforcement: mandatory
      provenance_tracking_required: true
    validation:
      consistency_check_required: true
      enforcement: block_on_failure
      schema_validation_required: true
  description: 可靠性與容錯要求
  error_handling:
    description: 錯誤處理要求
    error_rate:
      enforcement: alert_on_exceed
      max_error_rate: 1%
      measurement: errors / total requests
    recovery_time:
      enforcement: warn
      max_recovery_time: 5 minutes
    required_strategies:
    - graceful_degradation
    - retry_with_backoff
    - circuit_breaker
security_quality:
  authentication_authorization:
    authentication:
      enforcement: mandatory
      method_required: true
      supported_methods:
      - oauth2
      - jwt
      - mtls
    authorization:
      enforcement: mandatory
      least_privilege_principle: true
      rbac_required: true
    description: 認證與授權要求
  data_privacy:
    description: 數據隱私要求
    encryption:
      data_at_rest: aes-256-gcm
      data_in_transit: tls-1.3
      enforcement: mandatory
    pii_handling:
      anonymization_required: true
      enforcement: mandatory
      gdpr_compliance_required: true
      pii_detection_required: true
  description: 安全要求與檢查
  vulnerability_scanning:
    container_scanning:
      block_on_critical: true
      enabled: true
      tools:
      - trivy
      - grype
    dependency_scanning:
      allow_medium: 5
      block_on_critical: true
      block_on_high: true
      enabled: true
      tools:
      - npm audit
      - pip-audit
      - trivy
    description: 漏洞掃描要求

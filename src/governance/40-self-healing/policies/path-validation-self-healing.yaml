audit:
  attestation_retention_days: 90
  audit_events:
  - STRUCTURE_RECOVERED
  - BOUNDARY_VIOLATION
  - RECOVERY_FAILURE
  - DAG_NODE_REBUILT
  compliance_checks:
  - check: recovery_within_bounds
    critical: true
    description: 確保所有恢復操作都在允許的邊界內
  - check: attestation_completeness
    critical: true
    description: 確保所有恢復事件都有完整的證明
  - check: success_rate_threshold
    critical: false
    description: 成功率必須高於90%
    threshold: 0.9
  enabled: true
  log_all_events: true
boundary_enforcement:
  allowed_roots:
  - description: 主要安全根目錄
    path: ${SAFE_ROOT}
    type: safe_root
  - condition: NODE_ENV === 'test'
    description: 測試環境臨時目錄
    path: ${TMPDIR}
    type: test_tmpdir
  boundary_violations:
    action: REJECT_AND_LOG
    create_attestation: true
    emit_event: true
    escalate_on_repeated: true
  strict_mode: true
cicd_integration:
  enabled: true
  quality_gates:
  - blocking: true
    metric: success_rate
    minimum: 0.95
  - blocking: true
    metric: policy_compliance
    minimum: 1.0
  - blocking: false
    maximum: 5000
    metric: average_recovery_time_ms
  report_generation: true
  validation_on_push: true
enabled_features:
  auto_recovery: true
  dag_tracking: true
  event_emission: true
  governance_attestation: true
  snapshotting: true
event_driven_config:
  event_handlers:
  - async: true
    event: STRUCTURE_MISSING
    handler: attemptStructureRecovery
    timeout_ms: 5000
  - async: true
    event: DAG_NODE_MISSING
    handler: rebuildDAGNode
    timeout_ms: 3000
  - async: false
    event: VALIDATION_FAILED
    handler: logAndAttest
    timeout_ms: 1000
  event_types:
  - VALIDATION_FAILED
  - STRUCTURE_MISSING
  - STRUCTURE_RECOVERED
  - FALLBACK_TRIGGERED
  - BOUNDARY_VIOLATION
  - SNAPSHOT_CREATED
  - DAG_NODE_MISSING
  - DAG_NODE_REBUILT
  events_enabled: true
evolution_strategy:
  adaptive_thresholds: false
  distributed_snapshots: false
  learning_enabled: false
  planned_enhancements:
  - Multi-level DAG recovery with complex dependency chains
  - Predictive recovery using ML to prevent failures
  - Distributed snapshot synchronization
  - Configurable recovery strategies per path pattern
  - Real-time dashboard for monitoring
execution_mode: EVENT_DRIVEN
governance_integration:
  attestation_format: SLSA
  attestation_required: true
  metrics_collection: true
  policy_compliance_check: true
  policy_violations:
    boundary_violation:
      action: REJECT_AND_ESCALATE
      severity: CRITICAL
    excessive_recovery_attempts:
      action: LOG_AND_ALERT
      severity: WARNING
      threshold: 5
      time_window_seconds: 60
    recovery_failure:
      action: LOG_AND_ALERT
      consecutive: true
      severity: ERROR
      threshold: 3
last_updated: '2025-12-14'
metadata:
  category: self-healing
  owner: Security & Compliance Team
  priority: HIGH
  scope: system-wide
  subcategory: path-validation
monitoring:
  alerting:
  - condition: success_rate < 0.90
    notification: team-ops
    severity: WARNING
  - condition: success_rate < 0.75
    notification: team-ops, team-security
    severity: CRITICAL
  - condition: failed_recoveries > 10 in 5m
    notification: team-ops
    severity: ERROR
  metrics_enabled: true
  metrics_export_interval_ms: 30000
  tracked_metrics:
  - total_validations
  - total_failures
  - total_recoveries
  - successful_recoveries
  - failed_recoveries
  - snapshots_created
  - dag_nodes_rebuilt
  - average_recovery_time_ms
  - success_rate_percentage
principles:
  inherited_structure:
    description: 承襲結構 - 依賴既有治理規範進行自動補齊
    enabled: true
    rationale: 系統已具備完整的治理DAG、路徑邊界、規範化策略，故障時應自動依循這些規範修復
  self_repair:
    description: 自我修復 - 透過fallback、normalize、DAG重建補足缺失結構
    enabled: true
    rationale: 避免系統整體崩潰，讓缺失節點或截斷結構能被自動補齊
  transient_strategy:
    description: 短暫策略 - 異常情境下的臨時修復邏輯
    enabled: true
    rationale: 非永久改動，而是確保系統在異常時仍可繼續運作的臨時措施
recovery_limits:
  cooldown_period_seconds: 60
  max_attempts_per_minute: 5
  max_attempts_per_path: 3
  max_concurrent_recoveries: 10
  recovery_timeout_seconds: 30
recovery_strategies:
  dag_rebuild:
    description: 基於DAG依賴關係重建缺失節點
    enabled: true
    priority: 2
    rebuild_dependencies: true
  directory_creation:
    description: 創建缺失的目錄結構
    enabled: true
    priority: 3
    require_parent_exists: true
    respect_boundaries: true
  snapshot_recovery:
    description: 從結構快照恢復缺失路徑
    enabled: true
    max_snapshot_age_minutes: 60
    priority: 1
snapshot_strategy:
  enabled: true
  include:
  - path_mappings
  - dag_nodes
  - boundaries
  - metadata
  interval_ms: 60000
  retention_count: 10
  snapshot_on_events:
  - STRUCTURE_RECOVERED
  - DAG_NODE_REBUILT
status: ACTIVE
version: 1.0.0

api:
  base_path: /api/v1/architect
  endpoints:
  - description: 'Perform comprehensive architecture analysis.

      執行全面的架構分析。

      '
    guarantees:
    - Complete dependency analysis
    - Circular dependency detection
    - Layer violation detection
    input_schema:
      properties:
        include_recommendations:
          type: boolean
        scope:
          enum:
          - full
          - incremental
          - module
          - layer
          type: string
        target:
          type: string
      required:
      - scope
      type: object
    method: POST
    name: Analyze Architecture
    output_schema:
      properties:
        analysis_id:
          type: string
        architecture_score:
          type: number
        dependency_graph:
          type: object
        findings:
          type: array
        recommendations:
          type: array
      type: object
    path: /analysis
    performance:
      response_time_p50: < 1s
      response_time_p99: < 5s
  - description: Calculate technical debt metrics
    guarantees:
    - Consistent scoring methodology
    - Historical comparison available
    input_schema:
      properties:
        include_trends:
          type: boolean
        modules:
          type: array
      type: object
    method: POST
    name: Assess Technical Debt
    output_schema:
      properties:
        debt_by_module:
          type: object
        priority_areas:
          type: array
        total_debt_score:
          type: number
        trends:
          type: object
      type: object
    path: /technical-debt
  - description: 'Validate compliance with governance policies.

      驗證治理政策的合規性。

      '
    guarantees:
    - All policies checked
    - Violations documented with location
    - Remediation suggestions provided
    input_schema:
      properties:
        policies:
          type: array
        scope:
          type: string
      type: object
    method: POST
    name: Check Compliance
    output_schema:
      properties:
        compliance_id:
          type: string
        overall_compliance:
          type: boolean
        violations:
          type: array
        warnings:
          type: array
      type: object
    path: /compliance/check
contract:
  description: 'Architecture Analyst provides automated architecture analysis, dependency
    mapping,

    technical debt assessment, and governance compliance checking.


    架構分析師提供自動化架構分析、依賴映射、技術債務評估和治理合規檢查。

    '
  module: automation.architect
  owner: '@architecture-team'
  status: active
  version: 1.0.0
dependencies:
  required:
  - failure_mode: use-cached
    module: governance.policies
    purpose: Policy definitions
events:
- consumers:
  - services.audit
  - automation.monitoring
  delivery_guarantee: at-least-once
  description: Emitted when architecture analysis completes
  name: architect.analysis_completed
  payload_schema:
    properties:
      analysis_id:
        type: string
      architecture_score:
        type: number
      findings_count:
        type: integer
      timestamp:
        format: date-time
        type: string
    type: object
  retention: 90 days
- consumers:
  - ops.alerting
  - services.governance
  delivery_guarantee: at-least-once
  description: Emitted when governance violation detected
  name: architect.governance_violation
  payload_schema:
    properties:
      location:
        type: string
      policy:
        type: string
      severity:
        type: string
      timestamp:
        format: date-time
        type: string
      violation_type:
        type: string
    type: object
  retention: 180 days
failure_modes:
- error_code: WARN_ANALYSIS_TIMEOUT
  recovery:
  - Return partial results
  - Schedule full analysis
  scenario: Analysis Timeout
  triggers:
  - Large codebase analysis
  - Resource constraints
invariants:
- description: Same input produces same analysis
  enforcement: application-logic
  name: Analysis Determinism
  rule: analyze(input) = analyze(input)
- description: Architecture scores are comparable over time
  enforcement: validation
  name: Scoring Consistency
  rule: 'forall analysis: score uses consistent methodology'
observability:
  alerts:
  - condition: architecture_score < 70
    severity: warning
  - condition: governance_violations_total > 50
    severity: high
  metrics:
  - labels:
    - scope
    - status
    name: analyses_total
    type: counter
  - name: analysis_duration_seconds
    type: histogram
  - labels:
    - type
    - severity
    name: governance_violations_total
    type: counter
  - name: architecture_score
    type: gauge
references:
  architecture_governance_matrix: governance/29-docs/ARCHITECTURE_GOVERNANCE_MATRIX.md
  ownership_map: governance/34-config/ownership-map.yaml#automation.architect

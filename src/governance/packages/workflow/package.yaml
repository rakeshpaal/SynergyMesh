apiVersion: machinenativeops.io/v2
kind: Package
metadata:
  created_at: '2025-12-11T00:00:00Z'
  description: Workflow orchestration and state machine management
  name: workflow
  owner: governance-bot
  version: 1.0.0
spec:
  compliance:
  - All state transitions must be audited
  - Timeouts must be enforced
  - Failed workflows must trigger alerts
  configuration:
    engine:
      default: local
      enum:
      - local
      - celery
      - temporal
      type: string
    persistence:
      backend:
        default: database
        enum:
        - memory
        - redis
        - database
        type: string
      enabled:
        default: true
        type: boolean
    timeouts:
      default_task_timeout:
        default: 300
        type: integer
      default_workflow_timeout:
        default: 3600
        type: integer
  dependencies:
    optional:
    - name: celery
      version: '>=5.3.0'
    - name: temporal-sdk
      version: '>=1.0.0'
    required:
    - name: logging
      type: internal
      version: 1.0.0
    - name: audit
      type: internal
      version: 1.0.0
    - name: transitions
      version: '>=0.9.0'
  exports:
  - description: Workflow execution engine
    name: WorkflowEngine
    type: class
  - description: State machine implementation
    name: StateMachine
    type: class
  - description: Asynchronous task queue
    name: TaskQueue
    type: class
  - description: Multi-level approval workflow
    name: ApprovalWorkflow
    type: class
  - description: Execute workflow definition
    name: execute_workflow
    type: function
  - description: Transition state machine
    name: transition_state
    type: function
  interfaces:
  - inputs:
    - name: workflow_id
      type: string
    - name: definition
      type: object
    - name: input
      type: object
    name: run_workflow
    outputs:
    - name: execution_id
      type: string
    - name: status
      type: string
    - name: result
      type: object
    - name: audit_trail
      type: array
  language: python
  type: utility
  workflow_types:
  - description: Multi-level approval workflow
    name: approval
    steps:
    - submit
    - review
    - approve
    - execute
  - description: Deployment workflow
    name: deployment
    steps:
    - validate
    - build
    - test
    - deploy
    - verify
  - description: Incident response workflow
    name: incident
    steps:
    - detect
    - triage
    - investigate
    - resolve
    - postmortem

apiVersion: machinenativeops.io/v2
kind: Package
metadata:
  created_at: '2025-12-11T00:00:00Z'
  description: Multi-channel notification and alerting
  name: notification
  owner: governance-bot
  version: 1.0.0
spec:
  compliance:
  - Notifications must be logged
  - PII must be masked in notifications
  - Escalation policies must be followed
  configuration:
    channels:
      email:
        enabled:
          default: true
          type: boolean
        provider:
          enum:
          - smtp
          - sendgrid
          - ses
          type: string
      pagerduty:
        api_key:
          secret: true
          type: string
        enabled:
          default: false
          type: boolean
      slack:
        enabled:
          default: true
          type: boolean
        webhook_url:
          secret: true
          type: string
    routing:
      default_channel:
        default: slack
        type: string
      severity_routing:
        critical:
          default:
          - pagerduty
          - slack
          - email
          type: array
        high:
          default:
          - slack
          - email
          type: array
        low:
          default:
          - email
          type: array
        medium:
          default:
          - slack
          type: array
  dependencies:
    optional:
    - name: slack-sdk
      version: '>=3.0.0'
    - name: sendgrid
      version: '>=6.0.0'
    - name: pagerduty
      version: '>=5.0.0'
    required:
    - name: logging
      type: internal
      version: 1.0.0
    - name: jinja2
      version: '>=3.1.0'
  exports:
  - description: Multi-channel notification orchestration
    name: NotificationManager
    type: class
  - description: Alert routing and escalation
    name: AlertManager
    type: class
  - description: Notification template rendering
    name: TemplateEngine
    type: class
  - description: Send notification via configured channels
    name: send_notification
    type: function
  - description: Send alert with escalation
    name: send_alert
    type: function
  interfaces:
  - inputs:
    - name: type
      type: string
    - name: severity
      type: string
    - name: message
      type: string
    - name: recipients
      type: array
    - name: context
      type: object
    name: notify
    outputs:
    - name: notification_id
      type: string
    - name: channels_sent
      type: array
    - name: status
      type: string
  language: python
  type: utility

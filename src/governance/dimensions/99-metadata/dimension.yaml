apiVersion: machinenativeops.io/v2
kind: DimensionModule
metadata:
  category: meta-specification
  created_at: '2025-12-19T00:00:00Z'
  id: 99-metadata
  layer: 90-99
  layer_name: Meta-Specification Layer
  name: 元數據管理中心
  name_en: Metadata Management Center
  owner: governance-bot
  tags:
  - metadata
  - lineage
  - provenance
  - governance
  - living-knowledge-base
  - data-catalog
  - traceability
  updated_at: '2025-12-19T00:00:00Z'
  version: 1.0.0
spec:
  behavior:
    invariants:
    - 所有元數據操作必須可稽核
    - 元數據變更必須記錄溯源
    - 血緣關係必須保持一致性
    postconditions:
    - 元數據條目必須包含完整屬性
    - 血緣圖必須是有向無環圖
    - 溯源記錄必須完整
    preconditions:
    - 輸入必須符合元數據 schema
    - 數據源必須可訪問
    side_effects:
    - 生成稽核軌跡
    - 更新知識圖譜
    - 觸發下游通知
  compliance:
    audit_frequency: continuous
    controls:
    - 'META-001: 元數據分類完整性'
    - 'META-002: 數據溯源可追溯性'
    - 'META-003: 血緣關係準確性'
    - 'META-004: 知識庫健康監控'
    frameworks:
    - ISO-42001
    - NIST-AI-RMF
    - COBIT-2019
    - GDPR
  components:
  - categories:
      business:
        attributes:
        - business_terms
        - data_owner
        - quality_rules
        - criticality
        - sensitivity
        description: 業務術語、數據所有者、數據質量規則
        name: 業務元數據
        name_en: Business Metadata
      governance:
        attributes:
        - policies
        - compliance_requirements
        - audit_records
        - certification_status
        description: 策略、合規要求、審計記錄
        name: 治理元數據
        name_en: Governance Metadata
      operational:
        attributes:
        - lineage
        - change_history
        - access_logs
        - performance_metrics
        description: 數據血緣、變更歷史、訪問日誌
        name: 操作元數據
        name_en: Operational Metadata
      technical:
        attributes:
        - data_source
        - format
        - schema
        - dependencies
        - constraints
        description: 數據源、格式、結構、依賴關係
        name: 技術元數據
        name_en: Technical Metadata
    description: '按照類型對元數據進行分類管理，確保數據的結構化和可追溯性

      '
    id: metadata-classification
    name: 元數據分類
    name_en: Metadata Classification
  - configuration:
      enabled: true
      sources:
      - description: Git倉庫源
        tracking:
        - commits
        - branches
        - tags
        type: git
      - description: 構建管道源
        tracking:
        - pipeline_runs
        - artifacts
        - attestations
        type: build
      - description: 運行時源
        tracking:
        - events
        - logs
        - metrics
        type: runtime
    description: '追蹤元數據的來源、變更歷史和傳播路徑

      '
    id: metadata-provenance
    name: 元數據溯源
    name_en: Metadata Provenance
  - capabilities:
    - description: 從數據源到消費者的完整路徑
      name: 端到端追踪
    - description: 評估變更對下游系統的影響
      name: 影響分析
    - description: 追蹤變更如何在系統中傳播
      name: 變更傳播
    - description: 確保數據處理符合合規要求
      name: 合規追踪
    description: '端到端數據血緣追踪、影響分析、變更傳播分析

      '
    id: data-lineage
    name: 數據血緣
    name_en: Data Lineage
  - description: '實現系統自我感知、自我建模、自我診斷和自我回饋的知識循環

      '
    id: living-knowledge-base
    layers:
      diagnosis:
        checks:
        - orphan_components
        - dead_configs
        - overlapping_workflows
        - broken_links
        description: 健康檢查和問題識別
        name: 自我診斷層
      feedback:
        actions:
        - update_dashboard
        - notify_maintainers
        - auto_remediation
        description: 問題通知和自動修復
        name: 行動/回饋層
      modeling:
        description: 系統結構建模
        name: 建模層
        outputs:
        - generated-mndoc.yaml
        - knowledge-graph.yaml
        - superroot-entities.yaml
      perception:
        description: 感知系統變化
        name: 感知層
        triggers:
        - git_commits
        - workflow_results
        - scheduled_scans
    name: 活體知識庫
    name_en: Living Knowledge Base
  dependencies:
    optional:
    - id: 38-sbom
      reason: 軟體物料清單
    - id: 63-evidence
      reason: 證據收集
    - id: 64-attestation
      reason: 證明和認證
    required:
    - id: 61-lineage
      reason: 數據血緣追踪基礎
    - id: 62-provenance
      reason: 數據溯源基礎
    - id: 07-audit
      reason: 審計記錄
    - id: 24-registry
      reason: 資源註冊
  description: '元數據管理中心負責整個平台的元數據治理、溯源和生命周期管理，

    為AI治理和合規提供數據基礎。整合活體知識庫（Living Knowledge Base），

    實現系統自我感知、自我建模、自我診斷和自我回饋的知識循環。

    '
  directory_structure:
    root: metadata/
    subdirectories:
      catalog:
        description: 數據目錄
        subdirectories:
        - datasets
        - policies
        - services
      knowledge:
        description: 活體知識庫
        subdirectories:
        - runtime
        - pipelines
        - contracts
      lineage:
        description: 數據血緣
        subdirectories:
        - extractors
        - visualizations
      provenance:
        description: 數據溯源
        files:
        - workflow-evidence.schema.json
        - policy-attestations.schema.json
      schemas:
        description: 元數據模式
        files:
        - data-catalog.schema.json
        - lineage.schema.json
  interface:
    errors:
    - code: E99M001
      description: 元數據驗證失敗
      name: MetadataValidationError
    - code: E99M002
      description: 血緣追踪失敗
      name: LineageTrackingError
    - code: E99M003
      description: 溯源記錄失敗
      name: ProvenanceError
    inputs:
    - description: 元數據來源
      name: metadata_source
      required: true
      type: object
    - enum:
      - technical
      - business
      - operational
      - governance
      name: classification
      required: true
      type: string
    - description: 處理上下文
      name: context
      required: false
      type: object
    outputs:
    - description: 元數據條目
      name: metadata_entry
      type: object
    - description: 血緣圖
      name: lineage_graph
      type: object
    - description: 健康報告
      name: health_report
      type: object
  lifecycle:
    states:
    - draft
    - validating
    - active
    - deprecating
    - archived
    transitions:
    - from: draft
      to: validating
      trigger: submit_metadata
    - from: validating
      to: active
      trigger: validation_passed
    - from: active
      to: deprecating
      trigger: deprecation_notice
    - from: deprecating
      to: archived
      trigger: archival_complete
  metrics:
  - description: 元數據條目總數
    labels:
    - classification
    - source
    name: metadata_entries_total
    type: counter
  - description: 元數據覆蓋率
    name: metadata_coverage_ratio
    type: gauge
  - description: 血緣完整性比率
    name: lineage_completeness_ratio
    type: gauge
  - description: 元數據質量得分
    labels:
    - dimension
    name: metadata_quality_score
    type: gauge
  - description: 知識庫健康得分
    name: knowledge_health_score
    type: gauge
  policy:
    enforcement: required
    engine: opa
    path: ./policy.rego
  schema:
    format: json-schema
    path: ./schema.json
    validation: required
status: active

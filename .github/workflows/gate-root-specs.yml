name: Gate - Root Specifications Validation

permissions:
  contents: read

on:
  pull_request:
    paths:
      - root.*.yaml
      - root.*.map
      - root.*.sh
      - root.specs.*.yaml
      - root.registry.*.yaml
      - controlplane/baseline/**/*.yaml
      - controlplane/baseline/**/*.map
      - controlplane/baseline/**/*.sh
      - workspace/config/**/*.{yaml,yml}
      - controlplane/governance/docs/**/*.md
  push:
    branches: [main]
    paths:
      - root.*.yaml
      - root.*.map
      - root.*.sh
      - controlplane/baseline/**/*.yaml
      - controlplane/baseline/**/*.map
      - controlplane/baseline/**/*.sh

jobs:
  validate-root-specs:
    name: Validate Root Layer Specifications
    uses: ./.github/workflows/enhanced-validation.yml
    secrets: inherit

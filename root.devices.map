# ğŸ”Œ Root è£ç½®æª”æ¡ˆå°æ‡‰è¡¨
# MachineNativeOps Root Layer Device Mapping
# Version: 1.0.0
# Last Modified: 2025-12-20T22:00:00Z

# =============================================================================
# MachineNativeOps Device Mapping Configuration
# =============================================================================
# This file defines the mapping between logical device names and their physical
# device file paths. It ensures consistent device access across different
# system configurations and provides abstraction for hardware management.
# =============================================================================

# === è¨­å‚™å°æ‡‰æ ¼å¼èªªæ˜ ===
# æ ¼å¼: logical_name:physical_path:device_type:permissions:owner:description
# logical_name: é‚è¼¯è¨­å‚™åç¨±
# physical_path: å¯¦é«”è¨­å‚™æª”æ¡ˆè·¯å¾‘
# device_type: è¨­å‚™é¡å‹ (block, character, network, virtual)
# permissions: è¨­å‚™æ¬Šé™
# owner: è¨­å‚™æ“æœ‰è€…
# description: è¨­å‚™æè¿°

# === å€å¡Šè¨­å‚™ (Block Devices) ===

# ä¸»è¦å„²å­˜è¨­å‚™
system_root:/dev/sda:block:brw-rw----:root:disk:System root disk
system_data:/dev/sdb:block:brw-rw----:root:disk:System data disk
system_backup:/dev/sdc:block:brw-rw----:root:disk:System backup disk
system_swap:/dev/sda1:block:brw-rw----:root:disk:System swap partition

# è³‡æ–™åº«å„²å­˜
database_data:/dev/md0:block:brw-rw----:postgres:disk:Database data RAID array
database_logs:/dev/md1:block:brw-rw----:postgres:disk:Database logs RAID array
database_wal:/dev/md2:block:brw-rw----:postgres:disk:Database WAL RAID array

# å¿«å–å„²å­˜
cache_ssd:/dev/nvme0n1:block:brw-rw----:root:disk:High-speed cache SSD
cache_temp:/dev/nvme0n1p1:block:brw-rw----:root:disk:Temporary cache partition

# LVM è¨­å‚™
lvm_system:/dev/mapper/system-root:block:brw-rw----:root:disk:LVM system root
lvm_data:/dev/mapper/system-data:block:brw-rw----:root:disk:LVM data volume
lvm_logs:/dev/mapper/system-logs:block:brw-rw----:root:disk:LVM logs volume

# === å­—å…ƒè¨­å‚™ (Character Devices) ===

# çµ‚ç«¯è¨­å‚™
console_primary:/dev/console:c:crw-------:root:tty:System console
console_serial:/dev/ttyS0:c:crw-------:root:tty:Serial console
console_virtual:/dev/tty0:c:crw-rw----:root:tty:Virtual console

# éš¨æ©Ÿæ•¸æ•¸ç”Ÿæˆå™¨
rng_hardware:/dev/hwrng:c:crw-rw----:root:root:Hardware random number generator
rng_software:/dev/urandom:c:crw-rw-rw-:root:root:Software random number generator
rng_entropy:/dev/random:c:crw-rw-rw-:root:root:Entropy random number generator

# è¨˜æ†¶é«”è¨­å‚™
mem_kmsg:/dev/kmsg:c:crw-rw----:root:root:Kernel message buffer
mem_null:/dev/null:c:crw-rw-rw-:root:root:Null device
mem_zero:/dev/zero:c:crw-rw-rw-:root:root:Zero device
mem_full:/dev/full:c:crw-rw-rw-:root:root:Full device

# æ™‚é–“è¨­å‚™
rtc_hardware:/dev/rtc0:c:crw-rw----:root:root:Hardware real-time clock
rtc_system:/dev/rtc:c:crw-rw----:root:root:System real-time clock

# HSM è¨­å‚™
hsm_primary:/dev/hsm0:c:crw-------:root:hsm:Primary hardware security module
hsm_backup:/dev/hsm1:c:crw-------:root:hsm:Backup hardware security module
hsm_virtual:/dev/vhsm:c:crw-------:root:hsm:Virtual hardware security module

# === ç¶²è·¯è¨­å‚™ (Network Devices) ===

# ä¸»è¦ç¶²è·¯ä»‹é¢
net_primary:eth0:network:-root:root:Primary network interface
net_secondary:eth1:network:-root:root:Secondary network interface
net_management:eth2:network:-root:root:Management network interface
net_backup:eth3:network:-root:root:Backup network interface

# è™›æ“¬ç¶²è·¯è¨­å‚™
net_loopback:lo:network:-root:root:Loopback interface
net_bridge:br0:network:-root:root:Network bridge
net_bond:bond0:network:-root:root:Bonded interface
net_vlan:vlan100:network:-root:root:VLAN interface

# å®¹å™¨ç¶²è·¯
net_docker:docker0:network:-root:root:Docker bridge interface
net_podman:podman0:network:-root:root:Podman bridge interface
net_k8s:cni0:network:-root:root:Kubernetes CNI interface

# === è™›æ“¬è¨­å‚™ (Virtual Devices) ===

# è™›æ“¬åŒ–è¨­å‚™
virt_kvm:/dev/kvm:c:crw-rw----:root:kvm:Kernel virtualization module
virt_tun:/dev/net/tun:c:crw-rw----:root:root:TUN/TAP device
virt_vhost:/dev/vhost-net:c:crw-rw----:root:root:vhost-net device

# GPU è¨­å‚™
gpu_primary:/dev/dri/card0:c:crw-rw----:root:video:Primary GPU device
gpu_render:/dev/dri/renderD128:c:crw-rw----:root:render:GPU render device
gpu_nvidia:/dev/nvidia0:c:crw-rw----:root:root:NVIDIA GPU device

# éŸ³é »è¨­å‚™
audio_primary:/dev/snd/controlC0:c:crw-rw----:root:audio:Primary audio control
audio_mixer:/dev/mixer:c:crw-rw----:root:audio:Audio mixer device
audio_pcm:/dev/snd/pcmC0D0c:c:crw-rw----:root:audio:Audio PCM device

# USB è¨­å‚™
usb_primary:/dev/bus/usb/001/001:c:crw-rw----:root:root:Primary USB controller
usb_storage:/dev/sg0:c:crw-rw----:root:disk:USB storage device
usb_serial:/dev/ttyUSB0:c:crw-rw----:root:dialout:USB serial device

# === ç›£æ§è¨­å‚™ (Monitoring Devices) ===

# æº«åº¦æ„Ÿæ¸¬å™¨
temp_cpu:/sys/class/hwmon/hwmon0/temp1_input:monitor:r--r--r--:root:root:CPU temperature sensor
temp motherboard:/sys/class/hwmon/hwmon1/temp1_input:monitor:r--r--r--:root:root:Motherboard temperature sensor
temp_gpu:/sys/class/hwmon/hwmon2/temp1_input:monitor:r--r--r--:root:root:GPU temperature sensor

# é›»æºæ„Ÿæ¸¬å™¨
power_battery:/sys/class/power_supply/BAT0/capacity:monitor:r--r--r--:root:root:Battery capacity sensor
power_ac:/sys/class/power_supply/AC/online:monitor:r--r--r--:root:root:AC power status

# ç³»çµ±ç›£æ§
sys_loadavg:/proc/loadavg:monitor:r--r--r--:root:root:System load average
sys_meminfo:/proc/meminfo:monitor:r--r--r--:root:root:System memory information
sys_stat:/proc/stat:monitor:r--r--r--:root:root:System statistics

# === å®‰å…¨è¨­å‚™ (Security Devices) ===

# TPM è¨­å‚™
tpm_primary:/dev/tpm0:c:crw-------:root:tss:Primary TPM device
tpm_secondary:/dev/tpm1:c:crw-------:root:tss:Secondary TPM device
tpm_rm:/dev/tpmrm0:c:crw-rw----:root:tss:TPM resource manager

# æ™ºæ…§å¡è¨­å‚™
smartcard:/dev/smartcard0:c:crw-------:root:root:Smart card reader
crypto_token:/dev/crypto_token0:c:crw-------:root:root:Cryptographic token

# ç”Ÿç‰©è¾¨è­˜è¨­å‚™
fingerprint:/dev/input/event0:c:crw-rw----:root:input:Fingerprint reader
face_recognition:/dev/video0:c:crw-rw----:root:video:Face recognition camera

# === å‚™ä»½èˆ‡æ­¸æª”è¨­å‚™ ===

# ç£å¸¶è¨­å‚™
tape_primary:/dev/st0:c:crw-rw----:root:tape:Primary tape drive
tape_secondary:/dev/nst0:c:crw-rw----:root:tape:Secondary tape drive
tape_autoloader:/dev/sg1:c:crw-rw----:root:tape:Tape autoloader

# å…‰ç¢Ÿè¨­å‚™
cdrom_primary:/dev/sr0:c:crw-rw----:root:cdrom:Primary CD/DVD drive
cdrom_secondary:/dev/sr1:c:crw-rw----:root:cdrom:Secondary CD/DVD drive

# === é€šç”¨åˆ¥å (Generic Aliases) ===

# å¸¸ç”¨åˆ¥å
default_storage:/dev/sda:block:brw-rw----:root:disk:Default storage device
default_swap:/dev/sda1:block:brw-rw----:root:disk:Default swap device
default_cdrom:/dev/cdrom:c:crw-rw----:root:cdrom:Default CD/DVD device
default_usb:/dev/sda:block:brw-rw----:root:disk:Default USB storage

# æ‡‰ç”¨ç¨‹å¼ç‰¹å®šåˆ¥å
mysql_data:/dev/md10:block:brw-rw----:mysql:disk:MySQL data storage
postgres_data:/dev/md20:block:brw-rw----:postgres:disk:PostgreSQL data storage
redis_data:/dev/md30:block:brw-rw----:redis:disk:Redis data storage
elasticsearch_data:/dev/md40:block:brw-rw----:elasticsearch:disk:Elasticsearch data storage

# === å‹•æ…‹è¨­å‚™å°æ‡‰ (Dynamic Device Mappings) ===

# USB å‹•æ…‹è¨­å‚™ (ç”± udev è¦å‰‡å‹•æ…‹å‰µå»º)
usb_storage_dynamic:/dev/disk/by-id/usb-*:block:brw-rw----:root:disk:Dynamic USB storage
usb_serial_dynamic:/dev/ttyUSB*:c:crw-rw----:root:dialout:Dynamic USB serial

# ç¶²è·¯å‹•æ…‹è¨­å‚™
net_dynamic_eth:/sys/class/net/eth*:network:-root:root:Dynamic Ethernet interfaces
net_dynamic_wlan:/sys/class/net/wlan*:network:-root:root:Dynamic wireless interfaces

# === è¨­å‚™ç¾¤çµ„å®šç¾© (Device Group Definitions) ===

# ç³»çµ±é—œéµè¨­å‚™ç¾¤çµ„
[critical_devices]
members=system_root,system_data,console_primary,rng_hardware,rtc_hardware
description=Critical system devices required for basic operation

# å„²å­˜è¨­å‚™ç¾¤çµ„
[storage_devices]
members=system_data,database_data,cache_ssd,lvm_data,backup_primary
description=Storage devices for data persistence

# å®‰å…¨è¨­å‚™ç¾¤çµ„
[security_devices]
members=hsm_primary,tpm_primary,smartcard,crypto_token
description=Security-related devices for cryptography and authentication

# ç¶²è·¯è¨­å‚™ç¾¤çµ„
[network_devices]
members=net_primary,net_secondary,net_management,net_bridge
description=Network interface devices

# ç›£æ§è¨­å‚™ç¾¤çµ„
[monitoring_devices]
members=temp_cpu,temp_motherboard,power_battery,sys_loadavg,sys_meminfo
description=Monitoring and sensor devices

# === è¨­å‚™æ¬Šé™æ˜ å°„ (Device Permission Mappings) ===

# ç®¡ç†å“¡æ¬Šé™
[admin_permissions]
devices=hsm_primary,backup_primary,system_root
permissions=rw
users=root
description=Devices requiring administrator access

# æœå‹™å¸³è™Ÿæ¬Šé™
[service_permissions]
devices=database_data,cache_ssd,net_primary
permissions=rw
users=postgres,redis,nginx
description=Devices accessible to service accounts

# å”¯è®€æ¬Šé™
[readonly_permissions]
devices=temp_cpu,power_battery,sys_loadavg,sys_meminfo
permissions=r
users=everyone
description=Devices with read-only access for all users

# === è¨­å‚™ç›£æ§é…ç½® (Device Monitoring Configuration) ===

# ç›£æ§è¦å‰‡
[monitoring_rules]
rule1=monitor device system_root for errors every 60s
rule2=monitor device database_data for performance every 30s
rule3=monitor device temp_cpu for threshold breaches every 10s
rule4=monitor device hsm_primary for availability every 5s

# å‘Šè­¦é–¾å€¼
[alert_thresholds]
temp_cpu_warning=70
temp_cpu_critical=85
disk_usage_warning=80
disk_usage_critical=95
memory_usage_warning=80
memory_usage_critical=95

# === è¨­å‚™æ•…éšœè½‰ç§» (Device Failover Configuration) ===

# ä¸»è¦/å‚™ç”¨è¨­å‚™å°
[failover_pairs]
primary_storage=system_data,backup_storage=system_backup
primary_network=net_primary,backup_network=net_secondary
primary_hsm=hsm_primary,backup_hsm=hsm_secondary
primary_rtc=rtc_hardware,backup_rtc=rtc_system

# è½‰ç§»è§¸ç™¼æ¢ä»¶
[failover_triggers]
device_error_count=3
response_timeout=30s
health_check_failure=true
manual_trigger=true

# === è¨­å‚™ç¶­è­·çª—å£ (Device Maintenance Windows) ===

# ç¶­è­·æ’ç¨‹
[maintenance_schedule]
daily_maintenance=02:00-04:00
weekly_maintenance=Sunday 01:00-05:00
monthly_maintenance=First Sunday 00:00-06:00
emergency_maintenance=as_needed

# ç¶­è­·æœŸé–“è¨­å‚™ç‹€æ…‹
[maintenance_behavior]
devices_in_maintenance=readonly_mode
backup_devices=active_mode
critical_devices=no_maintenance
notifications=enabled
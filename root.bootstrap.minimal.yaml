apiVersion: machinenativeops.io/v1
kind: RootBootstrapConfig
metadata:
  description: Minimal platform-grade bootstrap pipeline for Root Layer
  lastUpdated: '2025-01-20T22:00:00Z'
  name: minimal-bootstrap
  owner: system-architect
  urn: urn:machinenativeops:root:bootstrap-minimal:v1
  version: v1.0.0
spec:
  bootstrap_pipeline:
    criticality: critical
    description: Critical 5-step platform bootstrap sequence
    name: platform-minimal-bootstrap
    steps:
    - action: run_validation
      description: Validate all root files using Root Validator
      failure_action: abort_bootstrap
      module: root-validator
      name: validate_root_integrity
      outputs:
      - destination: var/audit/root-validate-report.json
        name: validation_report
        type: json_report
      - destination: root.hashlock.json
        name: hash_lock
        type: json
      retry_policy:
        backoff: exponential
        initial_delay: 5s
        max_attempts: 3
      step: 1
      success_criteria:
      - validation_report.summary.overall_status = 'PASSED'
      - validation_report.summary.success_rate >= 95%
      timeout: 120s
    - action: load_governance_framework
      dependencies:
      - validate_root_integrity
      description: Initialize governance and policy engine
      failure_action: abort_bootstrap
      inputs:
      - name: governance_config
        source: root.governance.yaml
      - name: naming_policy
        source: root.naming-policy.yaml
      module: governance-engine
      name: load_governance_framework
      outputs:
      - destination: var/run/governance-engine.status
        name: governance_status
        type: status
      retry_policy:
        backoff: fixed
        delay: 10s
        max_attempts: 2
      step: 2
      success_criteria:
      - governance_engine.status = 'active'
      - all_policies_loaded = true
      timeout: 90s
    - action: register_modules
      dependencies:
      - load_governance_framework
      description: Register and initialize core modules
      failure_action: abort_bootstrap
      inputs:
      - name: modules_config
        source: root.modules.yaml
      - name: module_registry
        source: root.registry.modules.yaml
      module: super-execution-engine
      name: load_module_registry
      outputs:
      - destination: var/run/module-registry.json
        name: module_registry_status
        type: json
      retry_policy:
        backoff: fixed
        delay: 15s
        max_attempts: 2
      step: 3
      success_criteria:
      - all_modules_registered = true
      - dependency_graph_valid = true
      timeout: 180s
    - action: initialize_trust_chain
      dependencies:
      - load_module_registry
      description: Setup trust chain and certificate management
      failure_action: abort_bootstrap
      inputs:
      - name: trust_config
        source: root.trust.yaml
      - name: hash_lock
        source: root.hashlock.json
      module: trust-manager
      name: initialize_trust_chain
      outputs:
      - destination: var/run/trust-manager.status
        name: trust_status
        type: status
      retry_policy:
        backoff: exponential
        initial_delay: 10s
        max_attempts: 3
      step: 4
      success_criteria:
      - trust_chain_established = true
      - certificate_authority_ready = true
      timeout: 120s
    - action: create_bootstrap_provenance
      dependencies:
      - validate_root_integrity
      - load_governance_framework
      - load_module_registry
      - initialize_trust_chain
      description: Finalize bootstrap and create provenance record
      failure_action: create_incident_continue
      inputs:
      - name: bootstrap_steps
        source: pipeline_execution_context
      - name: validation_report
        source: var/audit/root-validate-report.json
      - name: hash_lock
        source: root.hashlock.json
      module: provenance-tracker
      name: finalize_and_emit_provenance
      outputs:
      - destination: var/audit/bootstrap-provenance.json
        name: bootstrap_provenance
        type: json
      - destination: var/run/platform.ready
        name: platform_ready_signal
        type: signal
      retry_policy:
        backoff: fixed
        delay: 5s
        max_attempts: 2
      step: 5
      success_criteria:
      - provenance_record_created = true
      - bootstrap_evidence_complete = true
      timeout: 60s
    version: v1.0.0
  execution_context:
    bootstrap_version: v1.0.0
    environment: production
    evidence_requirements:
    - validation_reports
    - hash_locks
    - governance_loaded
    - modules_registered
    - trust_established
    - provenance_created
    failure_escalation:
      critical_failure:
      - emergency_stop_all_modules
      - create_bootstrap_incident
      - notify_system_administrator
      non_critical_failure:
      - create_warning_log
      - continue_with_degraded_mode
    platform_name: MachineNativeOps
    platform_version: v1.0.0
    success_indicators:
    - root.validation.passed
    - governance.engine.active
    - modules.registry.ready
    - trust.chain.established
    - provenance.record.created
  platform_ready_signals:
    file_signals:
    - content: MachineNativeOps Platform v1.0.0 - Bootstrap Completed
      path: var/run/platform.ready
    - content: completed
      path: var/run/bootstrap.status
    network_signals:
    - endpoint: /health
      expected_response: '{"status": "ready", "version": "v1.0.0"}'
      port: 8080
      service: platform-status
    process_signals:
    - governance-engine:ready
    - trust-manager:ready
    - provenance-tracker:ready
status:
  bootstrapHistory: []
  lastBootstrap: pending
  phase: Active
  version: v1.0.0

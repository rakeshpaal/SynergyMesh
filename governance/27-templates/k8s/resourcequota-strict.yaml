apiVersion: v1
kind: ResourceQuota
metadata:
  name: prod-myapp-quota
  namespace: prod-myapp-service
  labels:
    environment: prod
    tenant: platform
    app.kubernetes.io/name: myapp
    app.kubernetes.io/managed-by: axiom-naming-controller
    cost-center: engineering
  annotations:
    axiom.io/canonical-urn: "urn:axiom:platform:myapp:env:prod:v1"
    axiom.io/governance-mode: strict
    axiom.io/budget: "monthly-limit-500-usd"
    axiom.io/description: "Production resource quota with strict limits"
spec:
  hard:
    # CPU and Memory limits
    requests.cpu: "16"
    requests.memory: 32Gi
    limits.cpu: "32"
    limits.memory: 64Gi

    # Storage limits
    requests.storage: 100Gi
    persistentvolumeclaims: "10"

    # Object count limits
    pods: "50"
    services: "10"
    services.loadbalancers: "2"
    services.nodeports: "0"
    configmaps: "20"
    secrets: "20"
    replicationcontrollers: "0"

  # Scope selector for priority-based quotas
  scopeSelector:
    matchExpressions:
    - operator: In
      scopeName: PriorityClass
      values: ["high", "medium"]
---
apiVersion: v1
kind: LimitRange
metadata:
  name: prod-myapp-limits
  namespace: prod-myapp-service
  labels:
    environment: prod
    tenant: platform
    app.kubernetes.io/managed-by: axiom-naming-controller
  annotations:
    axiom.io/canonical-urn: "urn:axiom:platform:myapp:env:prod:v1"
    axiom.io/governance-mode: strict
spec:
  limits:
  # Container limits
  - type: Container
    max:
      cpu: "4"
      memory: 8Gi
    min:
      cpu: 50m
      memory: 64Mi
    default:
      cpu: 500m
      memory: 512Mi
    defaultRequest:
      cpu: 100m
      memory: 128Mi

  # Pod limits
  - type: Pod
    max:
      cpu: "8"
      memory: 16Gi

  # PVC limits
  - type: PersistentVolumeClaim
    max:
      storage: 50Gi
    min:
      storage: 1Gi

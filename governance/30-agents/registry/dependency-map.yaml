---
# Agent Dependency Map
# Agent 依賴映射

metadata:
  name: "Agent Dependency Map"
  version: "1.0.0"
  description: "Maps dependencies between agents and system components"
  created_at: "2025-12-11"
  updated_at: "2025-12-11"

# Agent Dependencies
agent_dependencies:
  
  unmanned-island-agent:
    depends_on:
      # Core Dependencies
      - component: "SynergyMesh Core Engine"
        type: "core_engine"
        required: true
        version: ">=4.0.0"
        interfaces:
          - "unified_integration"
          - "mind_matrix"
          - "safety_mechanisms"
      
      # Governance Dependencies
      - component: "Governance Framework"
        type: "governance"
        required: true
        version: ">=1.0.0"
        interfaces:
          - "10-policy"
          - "30-agents"
          - "60-contracts"
          - "70-audit"
      
      # Automation Dependencies
      - component: "Automation Framework"
        type: "automation"
        required: true
        version: ">=1.0.0"
        interfaces:
          - "39-automation"
          - "40-self-healing"
      
      # Infrastructure Dependencies
      - component: "MCP Servers"
        type: "infrastructure"
        required: false
        version: ">=1.0.0"
        interfaces:
          - "mcp-filesystem"
          - "mcp-github"
      
    used_by:
      - component: "Admin Copilot CLI"
        type: "client"
        usage: "automation_tasks"
      
      - component: "CI/CD Pipelines"
        type: "client"
        usage: "deployment_automation"
    
    external_dependencies:
      - name: "GitHub API"
        type: "api"
        required: false
        purpose: "repository_operations"
      
      - name: "Kubernetes API"
        type: "api"
        required: false
        purpose: "container_orchestration"

# Component Dependency Matrix
component_dependencies:
  
  # Governance Framework
  governance_framework:
    components:
      - "10-policy"
      - "20-intent"
      - "30-agents"
      - "60-contracts"
      - "70-audit"
      - "80-feedback"
    
    dependency_flow:
      # Strategy Layer
      - layer: "strategy"
        component: "10-policy"
        depends_on: []
        provides_to:
          - "20-intent"
          - "30-agents"
      
      # Orchestration Layer
      - layer: "orchestration"
        component: "20-intent"
        depends_on:
          - "10-policy"
        provides_to:
          - "30-agents"
          - "39-automation"
      
      # Execution Layer
      - layer: "execution"
        component: "30-agents"
        depends_on:
          - "10-policy"
          - "20-intent"
        provides_to:
          - "60-contracts"
          - "70-audit"
      
      # Observability Layer
      - layer: "observability"
        component: "60-contracts"
        depends_on:
          - "30-agents"
        provides_to:
          - "70-audit"
      
      - layer: "observability"
        component: "70-audit"
        depends_on:
          - "30-agents"
          - "60-contracts"
        provides_to:
          - "80-feedback"
      
      # Feedback Layer
      - layer: "feedback"
        component: "80-feedback"
        depends_on:
          - "70-audit"
        provides_to:
          - "10-policy"

# Dependency Validation Rules
validation_rules:
  
  # Circular Dependency Check
  circular_dependency:
    enabled: true
    severity: "error"
    action: "reject_deployment"
  
  # Version Compatibility
  version_compatibility:
    enabled: true
    severity: "warning"
    action: "log_warning"
  
  # Missing Dependencies
  missing_dependencies:
    enabled: true
    severity: "error"
    action: "reject_deployment"
  
  # Deprecated Dependencies
  deprecated_dependencies:
    enabled: true
    severity: "warning"
    action: "log_warning"

# Dependency Health Monitoring
health_monitoring:
  check_interval: "5 minutes"
  
  health_checks:
    - check_type: "dependency_availability"
      action_on_failure: "alert"
    
    - check_type: "version_compatibility"
      action_on_failure: "log"
    
    - check_type: "circular_dependency"
      action_on_failure: "alert"

# Dependency Graph Metadata
graph_metadata:
  total_agents: 1
  total_components: 15
  max_dependency_depth: 3
  circular_dependencies: 0
  
  last_validation: "2025-12-11T16:00:00Z"
  validation_status: "passed"

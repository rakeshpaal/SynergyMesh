{
  "$schema": "./schemas/tech-debt.schema.json",
  "version": "1.0.0",
  "timestamp": "2025-12-11T00:00:00Z",
  "metadata": {
    "name": "Technical Debt Registry",
    "description": "技術債務追蹤 - 記錄所有維度的技術債務狀態",
    "purpose": "讓 CI 自動檢查技術債務，讓 agent 可以量化並優先處理"
  },
  "summary": {
    "total_dimensions": 81,
    "dimensions_with_debt": 0,
    "total_debt_items": 0,
    "critical_debt": 0,
    "high_debt": 0,
    "medium_debt": 0,
    "low_debt": 0,
    "debt_density": 0.0
  },
  "debt_categories": [
    {
      "id": "code",
      "name": "Code Debt",
      "description": "程式碼層面的技術債務",
      "indicators": ["duplicated_code", "complex_functions", "missing_tests", "outdated_dependencies"]
    },
    {
      "id": "architecture",
      "name": "Architecture Debt",
      "description": "架構層面的技術債務",
      "indicators": ["tight_coupling", "missing_abstractions", "circular_dependencies", "monolithic_modules"]
    },
    {
      "id": "documentation",
      "name": "Documentation Debt",
      "description": "文件層面的技術債務",
      "indicators": ["missing_docs", "outdated_docs", "incomplete_api_docs", "missing_examples"]
    },
    {
      "id": "testing",
      "name": "Testing Debt",
      "description": "測試層面的技術債務",
      "indicators": ["low_coverage", "flaky_tests", "missing_integration_tests", "no_performance_tests"]
    },
    {
      "id": "security",
      "name": "Security Debt",
      "description": "安全層面的技術債務",
      "indicators": ["vulnerable_dependencies", "missing_auth", "weak_encryption", "unpatched_systems"]
    },
    {
      "id": "compliance",
      "name": "Compliance Debt",
      "description": "合規層面的技術債務",
      "indicators": ["missing_controls", "audit_gaps", "policy_violations", "certification_gaps"]
    }
  ],
  "severity_levels": {
    "critical": {
      "description": "必須立即處理，阻擋部署",
      "sla": "24h",
      "blocks_deployment": true,
      "auto_escalate": true
    },
    "high": {
      "description": "必須在本迭代處理",
      "sla": "1w",
      "blocks_deployment": false,
      "auto_escalate": true
    },
    "medium": {
      "description": "應在下個迭代處理",
      "sla": "2w",
      "blocks_deployment": false,
      "auto_escalate": false
    },
    "low": {
      "description": "可以延後處理",
      "sla": "1m",
      "blocks_deployment": false,
      "auto_escalate": false
    }
  },
  "debt_items": [],
  "dimension_debt_status": {
    "00-vision-strategy": { "has_debt": false, "items": [] },
    "01-architecture": { "has_debt": false, "items": [] },
    "02-decision": { "has_debt": false, "items": [] },
    "03-change": { "has_debt": false, "items": [] },
    "04-risk": { "has_debt": false, "items": [] },
    "05-compliance": { "has_debt": false, "items": [] },
    "06-security": { "has_debt": false, "items": [] },
    "07-audit": { "has_debt": false, "items": [] },
    "08-process": { "has_debt": false, "items": [] },
    "09-performance": { "has_debt": false, "items": [] },
    "10-policy": { "has_debt": false, "items": [] },
    "20-intent": { "has_debt": false, "items": [] },
    "30-agents": { "has_debt": false, "items": [] },
    "39-automation": { "has_debt": false, "items": [] },
    "40-self-healing": { "has_debt": false, "items": [] },
    "60-contracts": { "has_debt": false, "items": [] },
    "70-audit": { "has_debt": false, "items": [] },
    "80-feedback": { "has_debt": false, "items": [] }
  },
  "ci_gate": {
    "enabled": true,
    "rules": [
      {
        "rule": "no_critical_debt",
        "description": "不允許有 critical 級別的技術債務",
        "action": "block",
        "bypass": "requires_approval"
      },
      {
        "rule": "debt_density_limit",
        "description": "技術債務密度不能超過 10%",
        "threshold": 0.1,
        "action": "warn",
        "bypass": "auto"
      },
      {
        "rule": "new_debt_review",
        "description": "新增技術債務需要人工審查",
        "action": "require_review",
        "bypass": "requires_approval"
      }
    ]
  },
  "tracking": {
    "issue_tracker": "github_issues",
    "label_prefix": "tech-debt",
    "auto_create_issues": true,
    "auto_close_on_resolve": true,
    "link_to_pr": true
  },
  "metrics": {
    "debt_density": {
      "formula": "debt_items / total_dimensions",
      "current": 0.0,
      "target": 0.05,
      "trend": "stable"
    },
    "mttr_debt": {
      "description": "Mean Time To Resolve Debt",
      "current": "0d",
      "target": "7d",
      "trend": "stable"
    },
    "debt_velocity": {
      "description": "Rate of debt accumulation/resolution",
      "current": 0,
      "target": -1,
      "trend": "stable"
    }
  },
  "reporting": {
    "frequency": "weekly",
    "format": "markdown",
    "recipients": ["engineering_leads", "tech_debt_owner"],
    "include_trends": true,
    "include_recommendations": true
  }
}

version: "1.0.0"
skeleton_id: "data-governance"

schemas:
  data_governance_input:
    type: object
    description: "資料治理請求：架構設計、分類或隱私評估"
    properties:
      action_type:
        type: string
        enum:
          - "define_schema"
          - "classify_data"
          - "assess_privacy"
          - "plan_retention"
          - "verify_compliance"
        description: "執行動作類型"
      data_name:
        type: string
        description: "資料集或資料模式名稱"
      data_spec:
        type: object
        description: "資料規格、欄位、敏感度標記"
      use_cases:
        type: array
        items: { type: string }
        description: "資料使用案例清單"
      jurisdictions:
        type: array
        items: { type: string }
        description: "涉及的司法管轄區（影響合規要求）"
    required:
      - action_type
      - data_name

  data_governance_report:
    type: object
    description: "資料治理評估報告：分類、隱私影響與合規建議"
    properties:
      data_name: { type: string }
      data_classification:
        type: object
        properties:
          sensitivity_level: { enum: ["public", "internal", "confidential", "restricted"] }
          pii_fields: { type: array, items: { type: string } }
          personally_identifiable: { type: boolean }
          regulated_categories: { type: array, items: { type: string } }
      privacy_assessment:
        type: object
        properties:
          gdpr_applicable: { type: boolean }
          ccpa_applicable: { type: boolean }
          other_regulations: { type: array, items: { type: string } }
          risk_level: { enum: ["low", "medium", "high"] }
          data_subject_rights_impact: { type: object }
      retention_policy:
        type: object
        properties:
          retention_period: { type: string }
          deletion_trigger: { type: string }
          legal_hold_considerations: { type: array, items: { type: string } }
      data_lineage:
        type: object
        properties:
          source_systems: { type: array, items: { type: string } }
          transformations: { type: array, items: { type: string } }
          downstream_consumers: { type: array, items: { type: string } }
      compliance_status:
        type: object
        properties:
          compliant: { type: boolean }
          issues: { type: array, items: { type: string } }
          remediation_steps: { type: array, items: { type: string } }
      timestamp: { type: string, format: "date-time" }
    required:
      - data_name
      - data_classification

  data_governance_suggestion:
    type: object
    description: "資料治理改善建議：隔離策略、加密方案或合規優化"
    properties:
      data_name: { type: string }
      suggestion_type:
        type: string
        enum:
          - "anonymization"
          - "data_isolation"
          - "encryption_approach"
          - "access_control"
          - "retention_optimization"
      content:
        type: object
        description: "建議內容與技術細節"
      impact_assessment:
        type: object
        properties:
          technical_effort: { enum: ["low", "medium", "high"] }
          privacy_improvement: { type: number, minimum: 0, maximum: 1 }
          compliance_gaps_resolved: { type: array, items: { type: string } }
      implementation_guide:
        type: object
        properties:
          steps: { type: array, items: { type: string } }
          tools_required: { type: array, items: { type: string } }
          timeline: { type: string }
    required:
      - data_name
      - suggestion_type

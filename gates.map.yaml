apiVersion: machinenativeops.io/v2
kind: MachineNativeOpsGlobalBaseline
metadata:
  annotations:
    machinenativeops.io/description: Central registry for all validation gates
    machinenativeops.io/last-modified: '2025-12-21T02:00:00Z'
  labels:
    machinenativeops.io/component: gates-map
    machinenativeops.io/tier: gates
    machinenativeops.io/version: v1.0.0
  name: gates-map
  namespace: machinenativenops
spec:
  cicd_gates:
  - checks:
    - code_quality
    - security_scan
    - unit_tests
    - integration_tests
    description: Code quality and testing pipeline
    enforcement: strict
    id: gate-ci
    name: Continuous Integration
    status: active
    trigger: pull_request
    workflow: .github/workflows/ci.yml
  - checks:
    - codeql
    - dependency_scan
    - container_scan
    - secret_detection
    description: Security vulnerability scanning
    enforcement: strict
    id: gate-security
    name: Security Scanning
    status: active
    trigger: pull_request
    workflow: .github/workflows/security.yml
  configuration:
    failure_handling:
      escalation:
        first_failure: Warning + fix suggestions
        repeated_failures: Escalate to governance committee
        second_failure: Block + require review
      on_gate_failure:
      - Block PR merge
      - Add comment with details
      - Notify PR author
    notifications:
      channels:
      - github_comments
      - pr_status_checks
      recipients:
        on_failure:
        - pr_author
        - reviewers
        on_success:
        - pr_author
    reporting:
      format: markdown
      include_details: true
      include_suggestions: true
      retention_days: 30
  dependencies:
    gate-ci:
      description: CI requires PR evidence validation
      requires:
      - gate-pr-evidence
    gate-root-specs:
      description: Specs validation requires naming validation to pass first
      requires:
      - gate-root-naming
  execution_order:
  - gates:
    - gate-pr-evidence
    - gate-root-naming
    parallel: false
    phase: pre-validation
  - gates:
    - gate-root-specs
    parallel: false
    phase: specification-validation
  - gates:
    - gate-ci
    - gate-security
    parallel: true
    phase: code-validation
  governance_gates:
  - description: Validates 4 core evidence fields in PR
    enforcement: strict
    evidence_required:
    - repo
    - branch
    - commit
    - PR
    id: gate-pr-evidence
    name: PR Evidence Validation
    status: active
    trigger: pull_request
    workflow: .github/workflows/gate-pr-evidence.yml
  - description: Validates root layer file naming conventions
    enforcement: strict
    id: gate-root-naming
    name: Root Layer Naming Validation
    scope:
    - root.*
    - init.d/*
    - bin/*
    - sbin/*
    - etc/*
    status: active
    trigger: pull_request
    workflow: .github/workflows/gate-root-naming.yml
  specification_gates:
  - description: Validates all root layer specifications
    enforcement: strict
    id: gate-root-specs
    name: Root Specifications Validation
    scope:
    - root.*.yaml
    - root.*.map
    - root.*.sh
    - root.specs.*.yaml
    - root.registry.*.yaml
    status: active
    trigger: pull_request
    validations:
    - naming_spec
    - reference_spec
    - mapping_spec
    - logic_spec
    - context_spec
    workflow: .github/workflows/gate-root-specs.yml
  statistics:
    active_gates: 5
    cicd_gates: 2
    enforcement_levels:
      advisory: 0
      moderate: 0
      strict: 5
    governance_gates: 2
    specification_gates: 1
    total_gates: 5
  version: 1
status:
  conditions:
  - lastTransitionTime: '2025-12-21T02:00:00Z'
    message: All gates are operational and enforcing
    reason: AllGatesActive
    status: 'True'
    type: Operational
  last_execution:
    failed_runs: 0
    successful_runs: 0
    timestamp: '2025-12-21T02:00:00Z'
    total_runs: 0
  phase: Active

# Root Specifications - Context
# 上下文規格

apiVersion: machinenativeops.io/v2
kind: Specification
metadata:
  name: root-specs-context
  namespace: machinenativeops
  labels:
    machinenativeops.io/component: controlplane
    machinenativeops.io/layer: baseline
    machinenativeops.io/type: specification
  annotations:
    machinenativeops.io/description: "Context specifications and environment"
    machinenativeops.io/version: "v1.0.0"
    machinenativeops.io/immutable: "true"

spec:
  # 執行上下文
  executionContext:
    environment: "production"
    platform: "linux"
    architecture: "x86_64"
    
    runtime:
      type: "container"
      engine: "docker"
      version: ">=20.10"
  
  # 系統上下文
  systemContext:
    fhs:
      version: "3.0"
      compliance: "full"
    
    filesystem:
      type: "overlayfs"
      layers: ["baseline", "overlay"]
      target: "active"
    
    permissions:
      user: "root"
      group: "root"
      umask: "0022"
  
  # 應用上下文
  applicationContext:
    name: "MachineNativeOps"
    version: "v1.0.0"
    namespace: "machinenativeops"
    
    components:
      - controlplane
      - workspace
      - fhs-skeleton
  
  # 安全上下文
  securityContext:
    selinux:
      enabled: false
    
    apparmor:
      enabled: false
    
    seccomp:
      enabled: true
      profile: "runtime/default"
  
  # 網絡上下文
  networkContext:
    mode: "bridge"
    dns:
      - "8.8.8.8"
      - "8.8.4.4"
    
    ports:
      exposed: []
      internal: [8080, 9090]

apiVersion: machinenativeops.io/v1
kind: LoggingConfig
metadata:
  description: MachineNativeOps 統一日誌配置
  name: machine-native-ops-logging
  version: 1.0.0
spec:
  analysis:
    enabled: false
    tools:
      elk:
        elasticsearch_url: ''
        enabled: false
        kibana_url: ''
      graylog:
        enabled: false
        token: ''
        url: ''
      splunk:
        enabled: false
        token: ''
        url: ''
  error_logging:
    file: var/log/machine-native-ops/error.log
    include_stacktrace: true
    level: ERROR
    notifications:
      email:
        enabled: false
        recipients: []
      webhook:
        enabled: false
        url: ''
  global:
    format:
      include_caller: true
      include_pid: true
      template: '[{timestamp}] [{level}] [{service}] [{component}] {message}'
      timestamp: '%Y-%m-%d %H:%M:%S'
    level: INFO
    output:
      console:
        color: true
        enabled: true
        level: INFO
      file:
        enabled: true
        level: DEBUG
      syslog:
        enabled: false
        facility: local0
        level: WARNING
  monitoring:
    enabled: true
    interval: 300
    thresholds:
      errors_per_minute: 10
      file_size_threshold: 1GB
      warnings_per_minute: 50
  performance:
    async_write: true
    buffer_size: 8192
    flush_interval: 1000
    max_queue_size: 10000
  rotation:
    global:
      compress: true
      delaycompress: true
      frequency: daily
      max_files: 30
      max_size: 100MB
      missingok: true
      postrotate_script: scripts/log-postrotate.sh
      prerotate_script: scripts/log-prerotate.sh
      rotate_empty: false
  security:
    directory_permissions: '750'
    encrypt_sensitive_data: true
    file_permissions: '640'
    group: machinenativeops
    owner: root
    sensitive_patterns:
    - password
    - token
    - secret
    - key
    - credential
  services:
    api-gateway:
      file: var/log/machine-native-ops/api-gateway.log
      level: INFO
      max_files: 14
      max_size: 200MB
      rotation: daily
    database:
      file: var/log/machine-native-ops/database.log
      level: WARNING
      max_files: 7
      max_size: 100MB
      rotation: daily
    engine:
      file: var/log/machine-native-ops/engine.log
      level: INFO
      max_files: 10
      max_size: 100MB
      rotation: daily
    monitoring:
      file: var/log/machine-native-ops/monitoring.log
      level: DEBUG
      max_files: 7
      max_size: 50MB
      rotation: daily
status:
  created: '2025-12-21T04:30:00Z'
  updated: '2025-12-21T04:30:00Z'
  validated: true
  version: 1.0.0

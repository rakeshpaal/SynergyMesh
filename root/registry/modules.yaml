apiVersion: machinenativeops.io/v1
kind: RootModulesConfig
metadata:
  annotations:
    machinenativeops.io/description: MachineNativeOps module registry configuration
    machinenativeops.io/enforcement: strict
    machinenativeops.io/last-modified: '2025-12-21T20:00:00Z'
  labels:
    machinenativeops.io/component: modules-config
    machinenativeops.io/tier: registry
    machinenativeops.io/version: v1.0.0
  name: modules-registry
  namespace: machinenativenops
modules:
  config-manager:
    build:
      builder: python-wheel
      context: engine/config-manager
      outputs:
      - kind: python-wheel
        path: dist/artifacts/config-manager/1.0.0/
      pyproject: engine/config-manager/pyproject.toml
    description: Configuration management and synchronization service
    id: config-manager
    language: python
    policy:
      filesystem_write:
        allow:
        - /var/lib/config-manager
      network:
        allow:
        - cluster-local
    runtime:
      args:
      - serve
      command: config-manager
      health_path: /health
      metrics_path: /metrics
      serve_port: 9002
    type: service
    version: 1.0.0
  governance-engine:
    build:
      builder: python-wheel
      context: engine/governance-engine
      outputs:
      - kind: python-wheel
        path: dist/artifacts/governance-engine/1.0.0/
      pyproject: engine/governance-engine/pyproject.toml
    description: Core governance and policy enforcement engine
    id: governance-engine
    language: python
    policy:
      filesystem_write:
        allow:
        - /var/lib/governance-engine
      kubernetes:
        allow:
        - list
        - get
        - watch
        deny:
        - create
        - update
        - patch
        - delete
      network:
        allow:
        - cluster-local
    runtime:
      args:
      - serve
      command: governance-engine
      health_path: /health
      metrics_path: /metrics
      serve_port: 9000
    type: service
    version: 1.0.0
  machinenativenops-auto-monitor:
    build:
      builder: python-wheel
      context: engine/machinenativenops-auto-monitor
      outputs:
      - kind: python-wheel
        path: dist/artifacts/machinenativenops-auto-monitor/2.0.0/
      - kind: rootfs-fragment
        path: engine/machinenativenops-auto-monitor/rootfs
      pyproject: engine/machinenativenops-auto-monitor/pyproject.toml
    description: System monitoring with quantum state tracking
    id: machinenativenops-auto-monitor
    install:
      config_templates:
      - from: engine/machinenativenops-auto-monitor/assets/default_config.yaml
        to: /etc/machinenativenops/monitor_config.yaml
      rootfs_fragment:
        enabled: true
        paths:
        - from: engine/machinenativenops-auto-monitor/rootfs
          to: /
    language: python
    policy:
      capabilities:
        allow: []
        deny:
        - CAP_SYS_ADMIN
        - CAP_NET_ADMIN
      filesystem_write:
        allow:
        - /var/lib/machinenativenops/auto_monitor
        - /var/log/machinenativenops
        deny:
        - /etc
        - /usr
        - /bin
        - /sbin
      kubernetes:
        allow:
        - list-services
        - get-services
        - list-deployments
        - get-deployments
        - list-pods
        - get-pods
        deny:
        - create
        - update
        - patch
        - delete
      network:
        allow:
        - cluster-local
        deny:
        - external-internet
    runtime:
      args:
      - serve
      command: machinenativenops-auto-monitor
      config_path: /etc/machinenativenops/monitor_config.yaml
      environment:
        AUTO_REPAIR_ENABLED: 'false'
        MNO_LOG_LEVEL: INFO
        QUANTUM_ENABLED: 'false'
      health_path: /health
      metrics_path: /metrics
      serve_port: 8000
    type: app
    version: 2.0.0
  trust-manager:
    build:
      builder: python-wheel
      context: engine/trust-manager
      outputs:
      - kind: python-wheel
        path: dist/artifacts/trust-manager/1.0.0/
      pyproject: engine/trust-manager/pyproject.toml
    description: Trust and attestation management service
    id: trust-manager
    language: python
    policy:
      filesystem_write:
        allow:
        - /var/lib/trust-manager
      network:
        allow:
        - cluster-local
    runtime:
      args:
      - serve
      command: trust-manager
      health_path: /health
      metrics_path: /metrics
      serve_port: 9001
    type: service
    version: 1.0.0
spec:
  registry_version: 1.0.0
  version: 1
status:
  conditions:
  - lastTransitionTime: '2025-12-21T20:00:00Z'
    message: Module registry is complete and validated
    reason: RegistryComplete
    status: 'True'
    type: Validated
  phase: Active
  statistics:
    coverage: 100%
    total_apps: 1
    total_engines: 3
    total_modules: 4

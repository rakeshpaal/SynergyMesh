# ğŸ“¦ Root Layer Module Registry (SSOT)
# Version: 1.0.0
# Purpose: Single Source of Truth for all modules
# Enforcement: Strict - All module references must exist here

apiVersion: machinenativeops.io/v1
kind: RootModuleRegistry
metadata:
  name: module-registry
  namespace: machinenativenops-registry
  labels:
    machinenativeops.io/tier: "registry"
    machinenativeops.io/version: "v1.0.0"
    machinenativeops.io/component: "module-registry"
  annotations:
    machinenativeops.io/description: "Authoritative registry for all MachineNativeOps modules"
    machinenativeops.io/enforcement: "strict"
    machinenativeops.io/last-modified: "2025-12-21T02:00:00Z"
    machinenativeops.io/ssot: "true"

spec:
  version: 1
  registry_type: "modules"
  
  # === è¨»å†Šè¡¨å…ƒæ•¸æ“š ===
  registry_metadata:
    total_modules: 8
    last_updated: "2025-12-21T02:00:00Z"
    schema_version: "1.0.0"
    validation_status: "validated"
  
  # === æ ¸å¿ƒæ¨¡çµ„è¨»å†Š ===
  modules:
    # 1. é…ç½®ç®¡ç†å™¨
    - id: "config-manager"
      name: "config-manager"
      display_name: "Configuration Manager"
      version: "1.0.0"
      description: "Core configuration management and validation system"
      category: "core"
      tier: "core"
      status: "active"
      urn: "urn:machinenativeops:module:config-manager:v1"
      
      metadata:
        author: "MachineNativeOps Team"
        license: "MIT"
        repository: "https://github.com/MachineNativeOps/MachineNativeOps"
        documentation: "docs/modules/config-manager.md"
        
      technical:
        language: "python"
        runtime: "python3.11"
        entrypoint: "/opt/machinenativenops/modules/config-manager/main.py"
        config_file: "config/config-manager.yaml"
        
      dependencies: []
      
      provides:
        - "config_validation"
        - "config_loading"
        - "config_watching"
        
      requires: []
    
    # 2. æ—¥èªŒæœå‹™
    - id: "logging-service"
      name: "logging-service"
      display_name: "Logging Service"
      version: "1.0.0"
      description: "Centralized logging and audit trail service"
      category: "core"
      tier: "core"
      status: "active"
      urn: "urn:machinenativeops:module:logging-service:v1"
      
      metadata:
        author: "MachineNativeOps Team"
        license: "MIT"
        repository: "https://github.com/MachineNativeOps/MachineNativeOps"
        documentation: "docs/modules/logging-service.md"
        
      technical:
        language: "python"
        runtime: "python3.11"
        entrypoint: "/opt/machinenativenops/modules/logging-service/main.py"
        config_file: "config/logging-service.yaml"
        
      dependencies:
        - module_id: "config-manager"
          version: ">=1.0.0"
          optional: false
          
      provides:
        - "structured_logging"
        - "log_aggregation"
        - "log_rotation"
        
      requires:
        - "config_validation"
    
    # 3. æ²»ç†å¼•æ“
    - id: "governance-engine"
      name: "governance-engine"
      display_name: "Governance Engine"
      version: "1.0.0"
      description: "Core governance and policy enforcement engine"
      category: "governance"
      tier: "core"
      status: "active"
      urn: "urn:machinenativeops:module:governance-engine:v1"
      
      metadata:
        author: "MachineNativeOps Team"
        license: "MIT"
        repository: "https://github.com/MachineNativeOps/MachineNativeOps"
        documentation: "docs/modules/governance-engine.md"
        
      technical:
        language: "python"
        runtime: "python3.11"
        entrypoint: "/opt/machinenativenops/modules/governance-engine/main.py"
        config_file: "config/governance-engine.yaml"
        
      dependencies:
        - module_id: "config-manager"
          version: ">=1.0.0"
          optional: false
        - module_id: "logging-service"
          version: ">=1.0.0"
          optional: false
        - module_id: "database-connector"
          version: ">=1.0.0"
          optional: false
          
      provides:
        - "policy_enforcement"
        - "rbac_management"
        - "audit_logging"
        
      requires:
        - "config_validation"
        - "structured_logging"
        - "database_access"
    
    # 4. ä¿¡ä»»ç®¡ç†å™¨
    - id: "trust-manager"
      name: "trust-manager"
      display_name: "Trust Manager"
      version: "1.0.0"
      description: "Trust chain and certificate management system"
      category: "security"
      tier: "security"
      status: "active"
      urn: "urn:machinenativeops:module:trust-manager:v1"
      
      metadata:
        author: "MachineNativeOps Team"
        license: "MIT"
        repository: "https://github.com/MachineNativeOps/MachineNativeOps"
        documentation: "docs/modules/trust-manager.md"
        
      technical:
        language: "python"
        runtime: "python3.11"
        entrypoint: "/opt/machinenativenops/modules/trust-manager/main.py"
        config_file: "config/trust-manager.yaml"
        
      dependencies:
        - module_id: "config-manager"
          version: ">=1.0.0"
          optional: false
        - module_id: "crypto-provider"
          version: ">=1.0.0"
          optional: false
        - module_id: "storage-backend"
          version: ">=1.0.0"
          optional: false
          
      provides:
        - "certificate_management"
        - "trust_chain_validation"
        - "key_rotation"
        
      requires:
        - "config_validation"
        - "cryptographic_operations"
        - "secure_storage"
    
    # 5. ä¾†æºè¿½æº¯å™¨
    - id: "provenance-tracker"
      name: "provenance-tracker"
      display_name: "Provenance Tracker"
      version: "1.0.0"
      description: "Audit trail and provenance tracking system"
      category: "audit"
      tier: "core"
      status: "active"
      urn: "urn:machinenativeops:module:provenance-tracker:v1"
      
      metadata:
        author: "MachineNativeOps Team"
        license: "MIT"
        repository: "https://github.com/MachineNativeOps/MachineNativeOps"
        documentation: "docs/modules/provenance-tracker.md"
        
      technical:
        language: "python"
        runtime: "python3.11"
        entrypoint: "/opt/machinenativenops/modules/provenance-tracker/main.py"
        config_file: "config/provenance-tracker.yaml"
        
      dependencies:
        - module_id: "config-manager"
          version: ">=1.0.0"
          optional: false
        - module_id: "logging-service"
          version: ">=1.0.0"
          optional: false
        - module_id: "database-connector"
          version: ">=1.0.0"
          optional: false
          
      provides:
        - "audit_trail"
        - "provenance_tracking"
        - "event_sourcing"
        
      requires:
        - "config_validation"
        - "structured_logging"
        - "database_access"
    
    # 6. å®Œæ•´æ€§é©—è­‰å™¨
    - id: "integrity-validator"
      name: "integrity-validator"
      display_name: "Integrity Validator"
      version: "1.0.0"
      description: "Hash verification and integrity checking system"
      category: "security"
      tier: "security"
      status: "active"
      urn: "urn:machinenativeops:module:integrity-validator:v1"
      
      metadata:
        author: "MachineNativeOps Team"
        license: "MIT"
        repository: "https://github.com/MachineNativeOps/MachineNativeOps"
        documentation: "docs/modules/integrity-validator.md"
        
      technical:
        language: "python"
        runtime: "python3.11"
        entrypoint: "/opt/machinenativenops/modules/integrity-validator/main.py"
        config_file: "config/integrity-validator.yaml"
        
      dependencies:
        - module_id: "config-manager"
          version: ">=1.0.0"
          optional: false
        - module_id: "crypto-provider"
          version: ">=1.0.0"
          optional: false
          
      provides:
        - "hash_verification"
        - "integrity_checking"
        - "tamper_detection"
        
      requires:
        - "config_validation"
        - "cryptographic_operations"
    
    # 7. è¶…ç´šåŸ·è¡Œå¼•æ“
    - id: "super-execution-engine"
      name: "super-execution-engine"
      display_name: "Super Execution Engine"
      version: "1.0.0"
      description: "Workflow orchestration and execution engine"
      category: "execution"
      tier: "core"
      status: "active"
      urn: "urn:machinenativeops:module:super-execution-engine:v1"
      
      metadata:
        author: "MachineNativeOps Team"
        license: "MIT"
        repository: "https://github.com/MachineNativeOps/MachineNativeOps"
        documentation: "docs/modules/super-execution-engine.md"
        
      technical:
        language: "python"
        runtime: "python3.11"
        entrypoint: "/opt/machinenativenops/modules/super-execution-engine/main.py"
        config_file: "config/super-execution-engine.yaml"
        
      dependencies:
        - module_id: "config-manager"
          version: ">=1.0.0"
          optional: false
        - module_id: "logging-service"
          version: ">=1.0.0"
          optional: false
        - module_id: "governance-engine"
          version: ">=1.0.0"
          optional: false
          
      provides:
        - "workflow_orchestration"
        - "task_scheduling"
        - "execution_monitoring"
        
      requires:
        - "config_validation"
        - "structured_logging"
        - "policy_enforcement"
    
    # 8. ç›£æ§æœå‹™
    - id: "monitoring-service"
      name: "monitoring-service"
      display_name: "Monitoring Service"
      version: "1.0.0"
      description: "System monitoring and metrics collection service"
      category: "monitoring"
      tier: "monitoring"
      status: "active"
      urn: "urn:machinenativeops:module:monitoring-service:v1"
      
      metadata:
        author: "MachineNativeOps Team"
        license: "MIT"
        repository: "https://github.com/MachineNativeOps/MachineNativeOps"
        documentation: "docs/modules/monitoring-service.md"
        
      technical:
        language: "python"
        runtime: "python3.11"
        entrypoint: "/opt/machinenativenops/modules/monitoring-service/main.py"
        config_file: "config/monitoring-service.yaml"
        
      dependencies:
        - module_id: "config-manager"
          version: ">=1.0.0"
          optional: false
        - module_id: "logging-service"
          version: ">=1.0.0"
          optional: false
          
      provides:
        - "metrics_collection"
        - "health_monitoring"
        - "alerting"
        
      requires:
        - "config_validation"
        - "structured_logging"

  # === ä¾è³´åœ– ===
  dependency_graph:
    description: "æ¨¡çµ„ä¾è³´é—œä¿‚åœ–ï¼ˆæ‹“æ’²æ’åºï¼‰"
    load_order:
      - "config-manager"
      - "logging-service"
      - "crypto-provider"
      - "storage-backend"
      - "database-connector"
      - "trust-manager"
      - "integrity-validator"
      - "governance-engine"
      - "provenance-tracker"
      - "super-execution-engine"
      - "monitoring-service"
    
    cycles_detected: false
    max_depth: 3

  # === é©—è­‰è¦å‰‡ ===
  validation:
    enabled: true
    rules:
      - "æ‰€æœ‰æ¨¡çµ„ ID å¿…é ˆå”¯ä¸€"
      - "æ‰€æœ‰ URN å¿…é ˆå”¯ä¸€"
      - "æ‰€æœ‰ä¾è³´å¿…é ˆå¯è§£æ"
      - "ä¸å¯æœ‰å¾ªç’°ä¾è³´"
      - "ç‰ˆæœ¬è™Ÿå¿…é ˆç¬¦åˆ semver"

# === ç‹€æ…‹ ===
status:
  phase: "Active"
  conditions:
    - type: "Validated"
      status: "True"
      lastTransitionTime: "2025-12-21T02:00:00Z"
      reason: "RegistryComplete"
      message: "Module registry is complete and validated"
  
  statistics:
    total_modules: 8
    active_modules: 8
    deprecated_modules: 0
    total_dependencies: 15
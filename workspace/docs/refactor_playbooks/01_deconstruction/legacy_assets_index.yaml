# Legacy Assets Index
# 舊資產索引
#
# This file tracks all legacy assets referenced in deconstruction and refactor playbooks.
# Legacy assets are temporary files stored in _legacy_scratch/ during refactoring.
#
# 本檔案追蹤所有在解構和重構劇本中引用的舊資產。
# 舊資產實體檔案僅在重構期間暫存於 _legacy_scratch/，由 .gitignore 保護。
#
# Architecture:
# - Real legacy files stay ONLY in _legacy_scratch/ (gitignored)
# - This index preserves the "knowledge layer" (ID, source, reason)
# - Playbooks reference assets by asset_id, NOT by embedding code
# - Once refactor is complete, delete the physical file from _legacy_scratch/
#
# Lifecycle:
# 1. Staging: Place physical file in _legacy_scratch/
# 2. Indexing: Record ID/source/description here
# 3. Reference: Playbooks use asset_id to reference
# 4. Cleanup: After new implementation, delete from _legacy_scratch/
# 5. Traceability: Keep index for history/decisions

version: "1.1"
last_updated: "2025-12-07T07:15:00Z"

assets:
  - asset_id: "core-v1-legacy-modules"
    description: "Legacy core modules from previous architecture (v1.x)"
    source_repo: "internal/unmanned-island-v1"
    source_ref: "refs/tags/v1.5.0"
    date_archived: "2025-12-06"
    deprecated_date: "2024-11-01"
    reason: |
      Language mixing (JavaScript + TypeScript), lack of type safety,
      unclear architecture boundaries between modules.
    related_clusters:
      - "core/architecture-stability"
      - "core/unified_integration"
    notes: |
      Contains old JavaScript-based modules that were replaced with TypeScript.
      Used for reference during migration to understand original design decisions.
      Should be deleted once core architecture refactor is complete.
      
      Key learnings:
      - Original event-driven design was sound but implementation was fragile
      - Module boundaries need explicit interface definitions
      - Configuration management should be centralized
    
  - asset_id: "architecture-old-contracts"
    description: "Legacy gRPC contract definitions (Protocol Buffer v2)"
    source_repo: "internal/contracts-legacy"
    source_ref: "main@abc1234"  # Example: Replace with actual commit SHA when indexing real assets
    date_archived: "2025-12-06"
    deprecated_date: "2024-10-15"
    reason: |
      Protocol Buffer v2 is deprecated. No API versioning strategy.
      Tight coupling between services through shared proto definitions.
    related_clusters:
      - "core/architecture-stability"
      - "services/gateway"
    notes: |
      Migration to Protocol Buffer v3 with proper API versioning.
      Each service should own its own contract definitions.
      Use backward-compatible evolution strategies.
  
  - asset_id: "core-toplevel-engines-v2.5"
    description: "Core 頂層 AI engines 原始佈局（重組前快照）"
    source_repo: "internal/unmanned-island"
    source_ref: "refs/heads/main@2025-12-07"
    date_archived: "2025-12-07"
    deprecated_date: "2025-12-07"
    reason: |
      11 個頂層 Python 檔案組織混亂，缺乏清晰分類。
      重組到功能子目錄（ai_engines/, governance/, quality_assurance/）後，
      保留此快照供參考。
    related_clusters:
      - "core/architecture-stability"
    notes: |
      檔案清單：
      - ai_decision_engine.py → core/ai_engines/decision/engine.py
      - context_understanding_engine.py → core/ai_engines/context_understanding/engine.py
      - hallucination_detector.py → core/ai_engines/hallucination_detection/detector.py
      - auto_governance_hub.py → core/governance/hub.py
      - autonomous_trust_engine.py → core/governance/trust_engine.py
      - auto_bug_detector.py → core/quality_assurance/bug_detector.py
      - (共 11 個檔案)
      
      保留原因：記錄原始組織方式，幫助理解重組決策與影響評估。
      
      關鍵學習：
      - 頂層目錄應保持簡潔，功能模組應分類組織
      - 明確的目錄結構降低新成員學習成本
      - 遷移時應提供 shim layer 確保向後相容
  
  - asset_id: "advisory-db-javascript-legacy"
    description: "Advisory Database JavaScript 實作（TypeScript 遷移前）"
    source_repo: "internal/unmanned-island"
    source_ref: "refs/heads/main@2025-12-07"
    date_archived: "2025-12-07"
    deprecated_date: "2025-12-07"
    reason: |
      7 個 JavaScript 檔案需遷移至 TypeScript 以符合語言治理策略。
      缺乏型別安全導致維護困難，IDE 支援不足。
    related_clusters:
      - "core/architecture-stability"
      - "core/advisory-database"
    notes: |
      檔案清單（預期遷移）：
      - advisory-database/src/index.js → index.ts
      - advisory-database/src/utils.js → utils.ts
      - advisory-database/src/parser.js → parser.ts
      - advisory-database/src/validator.js → validator.ts
      - advisory-database/src/cache.js → cache.ts
      - advisory-database/src/query.js → query.ts
      - advisory-database/src/formatter.js → formatter.ts
      
      遷移要點：
      - 保持 API 相容性（公開介面不變）
      - 新增型別定義（interface, type）
      - 測試覆蓋率目標 > 80%
      - 漸進式遷移，先檔案後型別強化
      
      預期效果：
      - 語言違規：-7
      - 型別安全性：+100%
      - 維護成本：-30%
  
  - asset_id: "mind-matrix-hypergraph-v1"
    description: "Mind Matrix 超圖架構原始設計（已簡化為 cognitive_processor）"
    source_repo: "internal/unmanned-island-v1"
    source_ref: "refs/tags/v1.8.0"
    date_archived: "2024-11-15"
    deprecated_date: "2024-11-01"
    reason: |
      超圖架構（Multi-agent Hypergraph）過於複雜，不符合當前系統規模。
      在小規模系統中引入過度抽象，導致維護成本高、團隊理解困難。
      已簡化為四層認知架構（Perception → Reasoning → Execution → Proof）。
    related_clusters:
      - "core/architecture-stability"
      - "core/unified_integration"
    notes: |
      原始設計文檔：docs/archive/mind-matrix-design-v1.md
      
      保留原因：
      超圖設計概念在未來大規模系統（數百個 agent 協作）中可能復用。
      保留設計思路供參考。
      
      關鍵學習：
      - 抽象層次應與系統規模匹配（YAGNI 原則）
      - 簡單設計優於過度設計
      - 複雜度應隨需求逐步演進，而非一步到位
      
      替代方案：
      當前使用 cognitive_processor.py 的四層架構已足夠應對需求，
      且更易於測試與維護。
  
  - asset_id: "unified-integration-monolithic-v2"
    description: "Unified Integration 單體結構（子模組化重組前）"
    source_repo: "internal/unmanned-island"
    source_ref: "refs/heads/main@2025-12-07"
    date_archived: "2025-12-07"
    deprecated_date: "2025-12-07"
    reason: |
      unified_integration/ 目錄下的配置管理與編排功能混雜，
      缺乏清晰分組。重組為 configuration/ 與 orchestration/ 子模組。
    related_clusters:
      - "core/architecture-stability"
      - "core/unified_integration"
    notes: |
      重組映射：
      - configuration_manager.py → configuration/manager.py
      - configuration_optimizer.py → configuration/optimizer.py
      - work_configuration_manager.py → configuration/work_manager.py
      - system_orchestrator.py → orchestration/orchestrator.py
      - deep_execution_system.py → orchestration/execution_system.py
      
      保留檔案（不變）：
      - cognitive_processor.py（重構降低複雜度）
      - service_registry.py（重構降低複雜度）
      - integration_hub.py
      - cli_bridge.py
      
      重組目標：
      - 配置相關功能集中管理
      - 編排相關功能集中管理
      - 降低單一目錄的檔案數量
      - 提高模組內聚性
  
  # Future legacy assets will be added here as refactoring progresses
  # 
  # Template for new entries:
  # - asset_id: "unique-identifier"
  #   description: "Brief description of the asset"
  #   source_repo: "git@github.com:org/repo.git or internal/path"
  #   source_ref: "branch@commit or refs/tags/version"
  #   date_archived: "YYYY-MM-DD"
  #   deprecated_date: "YYYY-MM-DD"
  #   reason: |
  #     Why this asset is being replaced or deprecated.
  #     What problems it had.
  #   related_clusters:
  #     - "cluster/id"
  #   notes: |
  #     Additional context, learnings, or migration notes.

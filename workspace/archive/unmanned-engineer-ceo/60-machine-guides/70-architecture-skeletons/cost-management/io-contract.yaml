version: "1.0.0"
skeleton_id: "cost-management"

schemas:
  cost_management_input:
    type: object
    description: "成本管理請求：預算規劃、成本優化或支出預測"
    properties:
      action_type:
        type: string
        enum:
          - "plan_budget"
          - "optimize_costs"
          - "forecast_spending"
          - "analyze_roi"
          - "identify_waste"
        description: "執行動作類型"
      service_name:
        type: string
        description: "目標服務名稱"
      time_period:
        type: object
        properties:
          start_date: { type: string, format: "date" }
          end_date: { type: string, format: "date" }
        description: "分析時間範圍"
      parameters:
        type: object
        description: "成本分析參數（預留容量、使用量預測等）"
      context:
        type: object
        properties:
          budget_ceiling: { type: number }
          cost_center: { type: string }
          optimization_goals: { type: array, items: { type: string } }
        description: "成本管理背景資訊"
    required:
      - action_type
      - service_name

  cost_management_report:
    type: object
    description: "成本管理評估報告：預算分析與優化建議"
    properties:
      service_name: { type: string }
      current_costs:
        type: object
        properties:
          total_monthly: { type: number }
          breakdown_by_category:
            type: object
            additionalProperties: { type: number }
          trend: { type: string, enum: ["increasing", "decreasing", "stable"] }
      budget_analysis:
        type: object
        properties:
          allocated_budget: { type: number }
          utilization_percentage: { type: number }
          variance: { type: number }
          risk_level: { type: string, enum: ["low", "medium", "high"] }
      optimization_recommendations:
        type: array
        items:
          type: object
          properties:
            recommendation_id: { type: string }
            title: { type: string }
            description: { type: string }
            estimated_savings: { type: number }
            implementation_effort: { enum: ["low", "medium", "high"] }
            payback_period_months: { type: number }
      cost_forecast:
        type: object
        properties:
          forecast_period: { type: string }
          projected_monthly_cost: { type: number }
          confidence_level: { type: number, minimum: 0, maximum: 1 }
      roi_analysis:
        type: object
        properties:
          investment_amount: { type: number }
          expected_return: { type: number }
          roi_percentage: { type: number }
          breakeven_period: { type: string }
      timestamp: { type: string, format: "date-time" }
    required:
      - service_name
      - current_costs

  cost_management_suggestion:
    type: object
    description: "成本管理改善建議：優化策略或成本模式轉變"
    properties:
      service_name: { type: string }
      suggestion_type:
        type: string
        enum:
          - "reserved_instances"
          - "auto_scaling_optimization"
          - "service_consolidation"
          - "rightsizing"
          - "cost_allocation_model"
      content:
        type: object
        description: "建議內容與實施細節"
      impact_assessment:
        type: object
        properties:
          estimated_monthly_savings: { type: number }
          implementation_timeline: { type: string }
          risks: { type: array, items: { type: string } }
      case_studies:
        type: array
        items:
          type: object
          properties:
            service: { type: string }
            before_cost: { type: number }
            after_cost: { type: number }
            savings_percentage: { type: number }
    required:
      - service_name
      - suggestion_type

version: 0.1.0

schemas:
  architecture_design:
    description: "架構設計規範"
    type: object
    required: [component, layers, dependencies]
    properties:
      component:
        type: string
        description: "元件名稱"
      layers:
        type: array
        items:
          type: string
          enum: [core, platform, services, agents, applications]
      dependencies:
        type: array
        items:
          type: object
          properties:
            target:
              type: string
            layer:
              type: string
              enum: [core, platform, services, agents]
            type:
              type: string
              enum: [import, http, grpc, event]

  invariant_violation:
    description: "架構不變條件違規報告"
    type: object
    required: [invariant_id, component, violation_type]
    properties:
      invariant_id:
        type: string
        description: "不變條件ID(例如: INV-001)"
      component:
        type: string
      violation_type:
        type: string
        enum:
          [
            layer_violation,
            circular_dependency,
            backward_dependency,
            mixed_data,
          ]
      severity:
        type: string
        enum: [critical, high, medium, low]
      remediation:
        type: string
        description: "修復建議"

  dependency_audit:
    description: "依賴審計報告"
    type: object
    required: [audit_date, violations, recommendations]
    properties:
      audit_date:
        type: string
        format: date-time
      violations:
        type: array
        items:
          type: object
          properties:
            module:
              type: string
            imported_from:
              type: string
            reason:
              type: string
      recommendations:
        type: array
        items:
          type: string

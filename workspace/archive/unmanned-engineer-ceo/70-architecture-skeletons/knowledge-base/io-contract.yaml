version: 0.1.0

schemas:
  knowledge_ingest_request:
    description: "知識寫入請求"
    type: object
    required: [source, content, metadata]
    properties:
      source:
        type: object
        properties:
          type:
            type: string
            enum: [file, url, api, manual]
          location:
            type: string
      content:
        type: string
        description: "原始內容"
      metadata:
        type: object
        properties:
          title:
            type: string
          author:
            type: string
          tags:
            type: array
            items:
              type: string
          tenant_id:
            type: string

  knowledge_query:
    description: "知識查詢請求"
    type: object
    required: [query, strategy]
    properties:
      query:
        type: string
      strategy:
        type: string
        enum: [vector, fulltext, hybrid]
      filters:
        type: object
        properties:
          tenant_id:
            type: string
          tags:
            type: array
            items:
              type: string
      top_k:
        type: integer
        default: 10

  knowledge_result:
    description: "知識查詢結果"
    type: object
    required: [chunks, metadata]
    properties:
      chunks:
        type: array
        items:
          type: object
          properties:
            content:
              type: string
            score:
              type: number
            source:
              type: string
      metadata:
        type: object
        properties:
          total_results:
            type: integer
          query_time_ms:
            type: number

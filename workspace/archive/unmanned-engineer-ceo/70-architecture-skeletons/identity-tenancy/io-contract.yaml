version: 0.1.0

schemas:
  identity_definition:
    description: "身份定義"
    type: object
    required: [type, attributes]
    properties:
      type:
        type: string
        enum: [user, service_account, api_key]
      attributes:
        type: object
        properties:
          email:
            type: string
          display_name:
            type: string
          roles:
            type: array
            items:
              type: string

  tenant_structure:
    description: "租戶結構定義"
    type: object
    required: [id, name, tier, isolation_level]
    properties:
      id:
        type: string
      name:
        type: string
      tier:
        type: string
        enum: [free, standard, enterprise]
      isolation_level:
        type: string
        enum: [shared, dedicated, isolated]
      quotas:
        type: object
        properties:
          max_users:
            type: integer
          max_projects:
            type: integer
          storage_gb:
            type: integer

  isolation_report:
    description: "租戶隔離檢查報告"
    type: object
    required: [design_id, isolation_level, risks]
    properties:
      design_id:
        type: string
      isolation_level:
        type: string
        enum: [compliant, warning, violation]
      risks:
        type: array
        items:
          type: object
          properties:
            description:
              type: string
            severity:
              type: string
              enum: [critical, high, medium, low]

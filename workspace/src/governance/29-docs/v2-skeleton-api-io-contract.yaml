version: 0.1.0

schemas:
  api_specification:
    description: "API 規格定義"
    type: object
    required: [service, version, endpoints]
    properties:
      service:
        type: string
      version:
        type: string
        pattern: "^v[0-9]+$"
      endpoints:
        type: array
        items:
          type: object
          properties:
            path:
              type: string
            method:
              type: string
              enum: [GET, POST, PUT, DELETE, PATCH]
            stability:
              type: string
              enum: [stable, beta, deprecated]

  compatibility_report:
    description: "兼容性檢查報告"
    type: object
    required: [old_version, new_version, breaking_changes]
    properties:
      old_version:
        type: string
      new_version:
        type: string
      breaking_changes:
        type: array
        items:
          type: object
          properties:
            endpoint:
              type: string
            change_type:
              type: string
              enum: [removed, parameter_removed, response_changed]
            severity:
              type: string
              enum: [critical, high, medium]
            migration_path:
              type: string

  api_deprecation:
    description: "API 棄用計劃"
    type: object
    required: [version, sunset_date, replacement_version]
    properties:
      version:
        type: string
      sunset_date:
        type: string
        format: date
      replacement_version:
        type: string
      migration_guide_url:
        type: string

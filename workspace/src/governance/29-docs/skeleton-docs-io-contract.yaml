version: "1.0.0"
skeleton_id: "docs-governance"

schemas:
  docs_governance_input:
    type: object
    description: "文檔治理請求：撰寫、驗證或維護文檔"
    properties:
      action_type:
        type: string
        enum:
          - "write_documentation"
          - "update_index"
          - "validate_format"
          - "generate_api_docs"
          - "check_staleness"
        description: "執行動作類型"
      document_type:
        type: string
        enum:
          - "readme"
          - "api_spec"
          - "architecture_guide"
          - "operations_manual"
          - "decision_record"
          - "quickstart"
        description: "文檔類型"
      target_path:
        type: string
        description: "文檔路徑或位置"
      content_scope:
        type: object
        properties:
          topics: { type: array, items: { type: string } }
          audience: { type: array, items: { type: string } }
          language: { type: array, items: { type: string } }
        description: "文檔內容範疇"
    required:
      - action_type
      - document_type

  docs_governance_report:
    type: object
    description: "文檔治理評估報告：格式合規性、完整度與常青性"
    properties:
      document_path: { type: string }
      validation_status:
        type: object
        properties:
          format_compliant: { type: boolean }
          metadata_complete: { type: boolean }
          machine_readable: { type: boolean }
          markdown_valid: { type: boolean }
          issues: { type: array, items: { type: string } }
      completeness_analysis:
        type: object
        properties:
          coverage_percentage: { type: number, minimum: 0, maximum: 100 }
          missing_sections: { type: array, items: { type: string } }
          outdated_examples: { type: array, items: { type: string } }
      freshness_check:
        type: object
        properties:
          last_updated: { type: string, format: "date" }
          days_since_update: { type: integer }
          stale_risk: { enum: ["low", "medium", "high"] }
          related_code_changes: { type: array, items: { type: string } }
      cross_references:
        type: object
        properties:
          internal_links: { type: array, items: { type: string } }
          broken_links: { type: array, items: { type: string } }
          orphaned_documents: { type: array, items: { type: string } }
      metadata:
        type: object
        properties:
          title: { type: string }
          authors: { type: array, items: { type: string } }
          tags: { type: array, items: { type: string } }
          version: { type: string }
      timestamp: { type: string, format: "date-time" }
    required:
      - document_path
      - validation_status

  docs_governance_suggestion:
    type: object
    description: "文檔治理改善建議：更新、重構或機器可讀化"
    properties:
      document_path: { type: string }
      suggestion_type:
        type: string
        enum:
          - "content_update"
          - "format_conversion"
          - "index_optimization"
          - "cross_reference_fix"
          - "metadata_enrichment"
      content:
        type: object
        description: "改善建議與示例"
      proposed_changes:
        type: array
        items:
          type: object
          properties:
            section: { type: string }
            change_type: { type: string, enum: ["add", "remove", "update"] }
            description: { type: string }
      implementation_effort:
        type: object
        properties:
          time_estimate: { type: string }
          complexity: { enum: ["low", "medium", "high"] }
          dependencies: { type: array, items: { type: string } }
    required:
      - document_path
      - suggestion_type

# =============================================================================
# Example: Metadata Entry
# =============================================================================
# This example demonstrates how to define a metadata entry with proper
# classification, attributes, and governance information.
# =============================================================================

apiVersion: metadata.machinenativeops.io/v1
kind: MetadataEntry
metadata:
  id: "customer-data-warehouse"
  name: "Customer Data Warehouse"
  classification: technical
  owner: data-team
  sensitivity: pii
  tags:
    - customer
    - warehouse
    - pii
  created_at: "2025-12-19T00:00:00Z"
  updated_at: "2025-12-19T00:00:00Z"

spec:
  attributes:
    # Technical Metadata
    data_source: "postgresql://db.example.com:5432/customers"
    format: "relational"
    schema:
      type: object
      properties:
        customer_id:
          type: string
          description: "Unique customer identifier"
        email:
          type: string
          format: email
          description: "Customer email address"
        created_at:
          type: string
          format: date-time
    dependencies:
      - "authentication-service"
      - "billing-system"
    
    # Business Metadata
    business_terms:
      - "customer record"
      - "user profile"
    quality_rules:
      - rule: "email_format"
        description: "Email must be valid format"
        validation: "regex: ^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
      - rule: "customer_id_unique"
        description: "Customer ID must be unique"
        validation: "unique: customer_id"
    
    # Governance Metadata
    policies:
      - "data-retention-policy"
      - "gdpr-compliance-policy"
    compliance_requirements:
      - "GDPR"
      - "CCPA"
      - "ISO-27001"

status:
  state: active
  quality_score: 0.92
  completeness_ratio: 0.88

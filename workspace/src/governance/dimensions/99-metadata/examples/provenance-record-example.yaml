# =============================================================================
# Example: Provenance Record
# =============================================================================
# This example demonstrates how to record provenance information for
# data and artifacts, including source, actor, and related artifacts.
# =============================================================================

apiVersion: metadata.machinenativeops.io/v1
kind: ProvenanceRecord
metadata:
  id: "ml-model-training-prov-20251219"
  name: "ML Model Training Provenance"
  classification: governance
  owner: ml-engineering-team
  tags:
    - provenance
    - ml-model
    - training
  created_at: "2025-12-19T10:30:00Z"
  updated_at: "2025-12-19T10:30:00Z"

spec:
  source:
    type: build
    pipeline: "ml-model-training-pipeline"
    run_id: "20251219-103000-abc123"
    repository: "https://github.com/example/ml-models"
    branch: "main"
    commit: "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0"

  timestamp: "2025-12-19T10:30:00Z"

  actor:
    type: bot
    id: "github-actions-bot"
    name: "GitHub Actions CI/CD Bot"

  action: deploy

  artifacts:
    - type: sbom
      uri: "https://artifacts.example.com/sbom/ml-model-v1.2.3.json"
      checksum: "sha256:abc123def456..."
      description: "Software Bill of Materials"
    
    - type: attestation
      uri: "https://artifacts.example.com/attestation/ml-model-v1.2.3.json"
      checksum: "sha256:def456abc123..."
      description: "SLSA Provenance Attestation"
    
    - type: model
      uri: "https://models.example.com/customer-churn-v1.2.3.pkl"
      checksum: "sha256:123abc456def..."
      description: "Trained ML Model"
    
    - type: metrics
      uri: "https://artifacts.example.com/metrics/ml-model-v1.2.3.json"
      checksum: "sha256:456def123abc..."
      description: "Model Performance Metrics"

  metadata:
    model_version: "1.2.3"
    training_dataset: "customer-data-2025-q4"
    training_duration: "2h 15m"
    accuracy: 0.94
    precision: 0.92
    recall: 0.91
    f1_score: 0.915

status:
  state: active
  quality_score: 1.0
  completeness_ratio: 1.0

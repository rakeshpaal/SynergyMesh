name: Architecture Governance Policy
description: Defines architecture governance rules and standards
version: "1.0"
skeleton:
  id: "architecture-stability"
  source_of_truth:
    base: "repo://unmanned-engineer-ceo/80-skeleton-configs/01-architecture-stability/"
    files:
      invariants: "docs/invariants.md"
      layering_rules: "docs/layering-rules.md"
      dependency_rules: "docs/dependency-rules.md"
      linter_config: "tools/arch-lint.config.yml"
    implementation: "repo://automation/autonomous/architecture-stability/"

enforcement: strict

rules:
  # Layering Rules
  layering:
    allowed_dependencies:
      application_layer: ["business_layer", "integration_layer", "infrastructure_layer"]
      business_layer: ["data_layer", "infrastructure_layer"]
      integration_layer: ["infrastructure_layer"]
      data_layer: ["infrastructure_layer"]
      infrastructure_layer: []
    enforcement: strict

  module_contracts:
    required_elements: ["name", "interface", "dependencies", "version"]
    contract_documentation: required
    breaking_change_policy: prohibited
    deprecation_period_days: 90

  # Design Pattern Rules
  design_patterns:
    mandatory_patterns:
      - "Dependency Injection"
      - "Factory Pattern"
      - "Observer Pattern"
    forbidden_patterns:
      - "Singleton (except for singletons list)"
    allowed_singletons:
      - "Logger"
      - "Configuration"
      - "Cache Manager"

  # Module Isolation
  module_isolation:
    max_coupling: 3
    cyclic_dependency_detection: enabled
    circular_dependency_tolerance: 0

  # Behavior Contracts
  behavior_contracts:
    api_documentation: required
    event_schema_definition: required
    error_handling_documentation: required

dependencies:
  - "identity-tenancy-governance"
  - "security-governance"
  - "common"

compliance_metrics:
  - name: "Layering Compliance"
    threshold: 100
    frequency: "continuous"

  - name: "Contract Completeness"
    threshold: 95
    frequency: "weekly"

  - name: "Design Pattern Adherence"
    threshold: 90
    frequency: "bi-weekly"

  - name: "Cyclic Dependency Rate"
    threshold: 0
    frequency: "continuous"

name: Testing Governance Policy
description: Defines testing standards, coverage requirements, and quality gates
version: "1.0"

enforcement: strict

rules:
  # Test Coverage Requirements
  test_coverage:
    unit_test_coverage: 80
    integration_test_coverage: 60
    acceptance_test_coverage: 40
    critical_path_coverage: 100
    enforcement: "ci_gate"

  # Test Types
  test_types:
    unit_tests:
      required: true
      framework: ["pytest", "unittest", "jest", "jUnit"]
      isolation: required

    integration_tests:
      required: true
      frequency: "per_merge"
      environment: "staging"

    acceptance_tests:
      required: true
      format: "BDD"
      frequency: "pre_production"

    performance_tests:
      required: for_critical_paths
      frequency: "monthly"
      slo_validation: required

    security_tests:
      required: true
      frequency: "monthly"
      vulnerability_scanning: required

  # Test Quality Standards
  test_quality:
    test_naming_convention: "test_[function]_[scenario]_[expected_result]"
    assertion_count: "1+"
    test_documentation: required
    test_maintenance: "monthly_review"

  # CI/CD Integration
  ci_cd_gates:
    all_tests_pass: required
    coverage_gates: required
    code_quality_gates: required
    security_scan_gates: required
    performance_baseline: required

  # Compatibility Testing
  compatibility:
    browser_testing:
      minimum_versions:
        chrome: "latest-2"
        firefox: "latest-2"
        safari: "latest-2"
        edge: "latest-2"
    api_version_testing: required
    backward_compatibility_testing: required
    load_testing: "quarterly"

  # Test Data Management
  test_data:
    production_data_usage: prohibited
    test_data_anonymization: required
    test_environment_reset: "per_run"
    synthetic_data: preferred

dependencies:
  - "architecture-governance"
  - "api-governance"
  - "data-governance"
  - "security-governance"
  - "common"

compliance_metrics:
  - name: "Test Coverage"
    threshold: 80
    frequency: "continuous"

  - name: "Test Success Rate"
    threshold: 100
    frequency: "continuous"

  - name: "Critical Path Coverage"
    threshold: 100
    frequency: "weekly"

  - name: "Security Test Execution"
    threshold: 100
    frequency: "monthly"

  - name: "Compatibility Test Pass Rate"
    threshold: 100
    frequency: "per_release"

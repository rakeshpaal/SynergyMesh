# =============================================================================
# SynergyMesh Governance - Logging Package
# Shared logging utilities for governance framework
# =============================================================================

apiVersion: governance.machinenativeops.io/v2
kind: Package
metadata:
  name: logging
  version: "1.0.0"
  description: "Structured logging utilities for governance operations"
  owner: governance-bot
  created_at: "2025-12-11T00:00:00Z"

spec:
  type: utility
  language: python

  exports:
    - name: GovernanceLogger
      type: class
      description: "Structured logger with OpenTelemetry integration"
    - name: AuditLogger
      type: class
      description: "Specialized audit logging"
    - name: log_operation
      type: function
      description: "Decorator for operation logging"
    - name: log_policy_decision
      type: function
      description: "Log policy evaluation results"

  dependencies:
    required:
      - name: opentelemetry-api
        version: ">=1.20.0"
      - name: structlog
        version: ">=23.0.0"
    optional:
      - name: elasticsearch
        version: ">=8.0.0"

  configuration:
    log_level:
      type: string
      enum: [DEBUG, INFO, WARNING, ERROR, CRITICAL]
      default: INFO
    output_format:
      type: string
      enum: [json, text, console]
      default: json
    enable_tracing:
      type: boolean
      default: true
    retention_days:
      type: integer
      default: 30

  interfaces:
    - name: log
      inputs:
        - name: level
          type: string
        - name: message
          type: string
        - name: context
          type: object
      outputs:
        - name: log_id
          type: string

  compliance:
    - "Logs must include trace_id"
    - "Logs must be structured JSON"
    - "PII must be masked"
    - "Logs must be immutable after write"

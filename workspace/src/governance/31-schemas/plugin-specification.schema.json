{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "urn:unmanned-island:schemas:plugin-specification:v1",
  "$comment": "Using URN scheme for internal schema identification. For external hosting, replace with actual HTTPS URL.",
  "title": "Plugin Specification Schema",
  "description": "JSON Schema for Unmanned Island System plugin specifications",
  "type": "object",
  "required": [
    "plugin_specification"
  ],
  "properties": {
    "document_metadata": {
      "type": "object",
      "description": "Document metadata for tracking and versioning",
      "properties": {
        "unique_id": {
          "type": "string",
          "description": "Unique identifier for the plugin specification document",
          "pattern": "^[a-z0-9-]+$"
        },
        "actual_filename": {
          "type": "string",
          "description": "Actual filename of the specification"
        },
        "version": {
          "type": "string",
          "description": "Document version (semantic versioning)",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "format_type": {
          "type": "string",
          "description": "Format type of the document",
          "enum": ["yaml", "json"]
        },
        "encoding": {
          "type": "string",
          "description": "Character encoding",
          "default": "utf-8"
        },
        "description": {
          "type": "string",
          "description": "Human-readable description"
        },
        "creation_info": {
          "type": "object",
          "properties": {
            "created_date": {
              "type": "string",
              "format": "date-time"
            },
            "created_by": {
              "type": "string"
            },
            "target_system": {
              "type": "string"
            }
          }
        }
      }
    },
    "governance_info": {
      "type": "object",
      "description": "Governance and compliance information",
      "properties": {
        "plugin_type": {
          "type": "string",
          "description": "Type of plugin",
          "enum": [
            "knowledge-processor",
            "data-transformer",
            "integration-adapter",
            "security-scanner",
            "monitoring-agent",
            "custom"
          ]
        },
        "security_clearance": {
          "type": "string",
          "description": "Required security clearance level",
          "pattern": "^L\\d+-[a-z]+$"
        },
        "team_impact": {
          "type": "string",
          "description": "Impacted team or layer"
        },
        "compliance_tags": {
          "type": "array",
          "description": "Compliance and feature tags",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "registry_binding": {
      "type": "object",
      "description": "Registry and namespace binding information",
      "properties": {
        "plugin_registry": {
          "type": "string",
          "description": "Plugin registry URL or identifier"
        },
        "namespace": {
          "type": "string",
          "description": "Plugin namespace",
          "pattern": "^[a-z0-9-]+$"
        },
        "runtime_class": {
          "type": "string",
          "description": "Runtime class identifier"
        },
        "priority_class": {
          "type": "string",
          "description": "Priority class for scheduling"
        },
        "resource_quota": {
          "type": "string",
          "description": "Resource quota identifier"
        }
      }
    },
    "vector_alignment_map": {
      "type": "object",
      "description": "Vector embedding alignment configuration",
      "properties": {
        "semantic_vectors": {
          "type": "array",
          "description": "Semantic vector configurations",
          "items": {
            "type": "object",
            "required": ["intent", "embedding_model", "dimension", "similarity_threshold"],
            "properties": {
              "intent": {
                "type": "string",
                "description": "Intent type for this vector configuration"
              },
              "embedding_model": {
                "type": "string",
                "description": "Reference to embedding model in config/ai-models/"
              },
              "dimension": {
                "type": "integer",
                "description": "Vector dimension",
                "minimum": 128,
                "maximum": 4096
              },
              "similarity_threshold": {
                "type": "number",
                "description": "Similarity threshold for matching",
                "minimum": 0.0,
                "maximum": 1.0
              }
            }
          }
        }
      }
    },
    "plugin_specification": {
      "type": "object",
      "description": "Core plugin specification",
      "required": ["id", "name", "version", "provides", "requires"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique plugin identifier",
          "pattern": "^[a-z0-9-]+$"
        },
        "name": {
          "type": "string",
          "description": "Human-readable plugin name",
          "minLength": 1,
          "maxLength": 100
        },
        "version": {
          "type": "string",
          "description": "Plugin version (semantic versioning)",
          "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "kind": {
          "type": "array",
          "description": "Plugin categories",
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "priority": {
          "type": "integer",
          "description": "Plugin priority (0-100, higher is more important)",
          "minimum": 0,
          "maximum": 100
        },
        "author": {
          "type": "string",
          "description": "Plugin author or team"
        },
        "license": {
          "type": "string",
          "description": "License type"
        },
        "provides": {
          "type": "array",
          "description": "Capabilities provided by this plugin",
          "items": {
            "type": "string"
          },
          "minItems": 1,
          "uniqueItems": true
        },
        "requires": {
          "type": "array",
          "description": "Capabilities required by this plugin",
          "items": {
            "type": "string"
          },
          "uniqueItems": true
        },
        "dependencies": {
          "type": "object",
          "description": "Plugin dependencies",
          "properties": {
            "hard_dependencies": {
              "type": "array",
              "description": "Required dependencies",
              "items": {
                "type": "object",
                "required": ["plugin_id", "version_constraint"],
                "properties": {
                  "plugin_id": {
                    "type": "string",
                    "description": "Dependency plugin ID"
                  },
                  "version_constraint": {
                    "type": "string",
                    "description": "Semantic version constraint",
                    "pattern": "^[><=~^].*$"
                  }
                }
              }
            },
            "soft_dependencies": {
              "type": "array",
              "description": "Optional dependencies with graceful degradation",
              "items": {
                "type": "object",
                "required": ["plugin_id", "version_constraint"],
                "properties": {
                  "plugin_id": {
                    "type": "string",
                    "description": "Dependency plugin ID"
                  },
                  "version_constraint": {
                    "type": "string",
                    "description": "Semantic version constraint"
                  },
                  "graceful_degradation": {
                    "type": "boolean",
                    "description": "Enable graceful degradation if dependency missing",
                    "default": true
                  }
                }
              }
            }
          }
        }
      }
    },
    "architecture": {
      "type": "object",
      "description": "Architecture and implementation details",
      "properties": {
        "processing_pipeline": {
          "type": "object",
          "description": "Processing pipeline configuration",
          "properties": {
            "stages": {
              "type": "array",
              "description": "Processing stages",
              "items": {
                "type": "object",
                "required": ["name", "processor"],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Stage name"
                  },
                  "processor": {
                    "type": "string",
                    "description": "Processor identifier"
                  },
                  "config": {
                    "type": "object",
                    "description": "Stage-specific configuration"
                  }
                }
              }
            }
          }
        },
        "storage_architecture": {
          "type": "object",
          "description": "Storage architecture configuration",
          "properties": {
            "primary_store": {
              "type": "object",
              "description": "Primary storage configuration",
              "properties": {
                "type": {
                  "type": "string",
                  "description": "Storage type"
                },
                "version": {
                  "type": "string",
                  "description": "Version or version constraint"
                }
              }
            },
            "cache_layer": {
              "type": "object",
              "description": "Cache layer configuration"
            },
            "backup_strategy": {
              "type": "object",
              "description": "Backup strategy configuration"
            }
          }
        }
      }
    },
    "runtime_configuration": {
      "type": "object",
      "description": "Runtime configuration",
      "properties": {
        "kubernetes_deployment": {
          "type": "object",
          "description": "Kubernetes deployment specification"
        }
      }
    },
    "plugin_implementation": {
      "type": "object",
      "description": "Plugin implementation details",
      "properties": {
        "main_class": {
          "type": "string",
          "description": "Main plugin class or entry point"
        },
        "interfaces": {
          "type": "object",
          "description": "Plugin interfaces"
        },
        "core_algorithms": {
          "type": "object",
          "description": "Core algorithms and methods"
        }
      }
    },
    "output_artifacts": {
      "type": "object",
      "description": "Output artifacts produced by the plugin",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "format": {
            "type": "string",
            "description": "Artifact format"
          },
          "path": {
            "type": "string",
            "description": "Output path"
          },
          "schema": {
            "type": "string",
            "description": "Schema or structure description"
          }
        }
      }
    },
    "performance_targets": {
      "type": "object",
      "description": "Performance targets and SLOs",
      "properties": {
        "slo_metrics": {
          "type": "object",
          "description": "Service Level Objective metrics",
          "additionalProperties": {
            "type": "string"
          }
        },
        "resource_optimization": {
          "type": "object",
          "description": "Resource optimization settings"
        }
      }
    },
    "integration_points": {
      "type": "object",
      "description": "Integration points with other systems",
      "properties": {
        "upstream_sources": {
          "type": "array",
          "description": "Upstream data sources",
          "items": {
            "type": "object",
            "properties": {
              "source_type": {
                "type": "string"
              },
              "protocol": {
                "type": "string"
              },
              "authentication": {
                "type": "string"
              }
            }
          }
        },
        "downstream_consumers": {
          "type": "array",
          "description": "Downstream consumers",
          "items": {
            "type": "object",
            "properties": {
              "consumer": {
                "type": "string"
              },
              "interface": {
                "type": "string"
              },
              "data_format": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "observability_configuration": {
      "type": "object",
      "description": "Observability configuration",
      "properties": {
        "metrics": {
          "type": "object",
          "description": "Metrics configuration",
          "properties": {
            "custom_metrics": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["name", "type", "help"],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Metric name"
                  },
                  "type": {
                    "type": "string",
                    "enum": ["counter", "gauge", "histogram", "summary"]
                  },
                  "help": {
                    "type": "string",
                    "description": "Metric description"
                  },
                  "labels": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        },
        "logging": {
          "type": "object",
          "description": "Logging configuration"
        }
      }
    },
    "security_configuration": {
      "type": "object",
      "description": "Security configuration",
      "properties": {
        "data_privacy": {
          "type": "object",
          "description": "Data privacy settings"
        },
        "access_control": {
          "type": "object",
          "description": "Access control settings"
        },
        "data_integrity": {
          "type": "object",
          "description": "Data integrity settings"
        }
      }
    },
    "testing_configuration": {
      "type": "object",
      "description": "Testing configuration",
      "properties": {
        "unit_tests": {
          "type": "object",
          "description": "Unit test configuration"
        },
        "integration_tests": {
          "type": "object",
          "description": "Integration test configuration"
        },
        "quality_assurance": {
          "type": "object",
          "description": "Quality assurance configuration"
        }
      }
    },
    "maintenance_procedures": {
      "type": "object",
      "description": "Maintenance procedures",
      "properties": {
        "data_cleanup": {
          "type": "object",
          "properties": {
            "frequency": {
              "type": "string"
            },
            "procedures": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "model_updates": {
          "type": "object"
        },
        "performance_optimization": {
          "type": "object"
        }
      }
    },
    "error_handling": {
      "type": "object",
      "description": "Error handling configuration",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "strategy": {
            "type": "string",
            "enum": [
              "retry",
              "fallback",
              "skip-with-logging",
              "exponential-backoff",
              "circuit-breaker"
            ]
          },
          "retry_count": {
            "type": "integer",
            "minimum": 0
          },
          "alert_severity": {
            "type": "string",
            "enum": ["info", "warning", "error", "critical"]
          }
        }
      }
    },
    "compliance_attestation": {
      "type": "object",
      "description": "Compliance attestation",
      "properties": {
        "semantic_web_standards": {
          "type": "object",
          "description": "Semantic web standards compliance"
        },
        "data_governance": {
          "type": "object",
          "description": "Data governance compliance"
        },
        "intellectual_property": {
          "type": "object",
          "description": "Intellectual property compliance"
        }
      }
    },
    "version_history": {
      "type": "array",
      "description": "Version history",
      "items": {
        "type": "object",
        "required": ["version", "release_date"],
        "properties": {
          "version": {
            "type": "string",
            "pattern": "^\\d+\\.\\d+\\.\\d+$"
          },
          "release_date": {
            "type": "string",
            "format": "date"
          },
          "changes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "breaking_changes": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "migration_guide": {
            "type": "string"
          }
        }
      }
    }
  }
}

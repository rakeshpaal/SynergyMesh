apiVersion: governance.machinenativeops.io/v1alpha1
kind: GovernanceManifest
metadata:
  name: machine-native-ops-governance
  version: 1.0.0
  createdAt: "2025-12-17"
  description: >
    Organizational Naming Governance and Lifecycle Framework –
    Machine-readable manifest for policies, templates, schemas, and automation entrypoints.
    This manifest provides a complete, automation-ready governance framework that can be
    consumed by CI/CD systems, bots, and validation tools.
spec:
  owner: "MachineNativeOps"
  repository: "https://github.com/MachineNativeOps/MachineNativeOps"
  license: "MIT"

  # Core governance modules
  modules:
    # Organization adoption lifecycle
    - id: org-adoption-lifecycle
      name: "组织采用生命周期"
      description: "从意识、试点、推广到成熟的完整组织采用流程"
      doc: "docs/governance/02-org-adoption-lifecycle.md"
      category: "lifecycle"
      status: "stable"
      version: "1.0.0"
      tags: ["adoption", "lifecycle", "organization"]

    # Role-based training and learning
    - id: role-based-training
      name: "角色化培训与学习"
      description: "针对不同角色（开发、运维、架构师）的定制化学习路径"
      doc: "docs/governance/03-role-based-training.md"
      category: "training"
      status: "stable"
      version: "1.0.0"
      examples:
        - "src/governance/dimensions/examples/training/role-learning-map.yaml"
      tags: ["training", "roles", "education"]

    # Naming governance - Core module
    - id: naming-governance
      name: "命名治理标准"
      description: "统一的资源命名规范、验证规则和自动化工具"
      doc: "docs/governance/04-naming-standards.md"
      category: "standards"
      status: "stable"
      version: "1.0.0"
      schemas:
        - "schemas/naming-policy.schema.yaml"
        - "schemas/resource-name.schema.yaml"
      policies:
        - "policies/naming/k8s-deployment-naming.yaml"
        - "policies/naming/api-naming.yaml"
        - "policies/naming/pipeline-naming.yaml"
      tools:
        - "tools/governance/bash/generate_resource_name.sh"
        - "tools/governance/python/validate_naming.py"
      templates:
        - "templates/governance/k8s/deployment.template.yaml"
        - "templates/governance/ci/github-actions-naming-check.yml"
        - "templates/governance/ci/gitlab-ci-naming-check.yml"
      examples:
        - "src/governance/dimensions/27-templates/examples/good-vs-bad-naming.yaml"
        - "src/governance/dimensions/27-templates/examples/sample-k8s-deployment.yaml"
      tags: ["naming", "standards", "validation"]

    # Change management
    - id: change-management
      name: "变更管理流程"
      description: "标准化的变更请求、审批、实施和回滚流程"
      doc: "docs/governance/05-change-management.md"
      category: "process"
      status: "stable"
      version: "1.0.0"
      schemas:
        - "schemas/change-request.schema.yaml"
      policies:
        - "policies/change-management/change-policy.yaml"
      templates:
        - "templates/governance/forms/change-request.template.yaml"
      examples:
        - "src/governance/dimensions/03-change/examples/CHG-2025-001.yaml"
        - "src/governance/dimensions/03-change/examples/rollback-scenario.md"
      tags: ["change", "approval", "risk"]

    # Metrics and audit
    - id: metrics-and-audit
      name: "指标与审计"
      description: "治理效果度量、KPI追踪和审计报告生成"
      doc: "docs/governance/06-metrics-and-audit.md"
      category: "monitoring"
      status: "stable"
      version: "1.0.0"
      schemas:
        - "schemas/metric-definition.schema.yaml"
        - "schemas/audit-report.schema.yaml"
      templates:
        - "templates/governance/forms/audit-report.template.yaml"
      examples:
        - "src/governance/dimensions/examples/metrics/kpi-dashboard.yaml"
      tags: ["metrics", "audit", "kpi"]

    # Exception handling
    - id: exception-handling
      name: "例外处理机制"
      description: "合规例外申请、审批和追踪流程"
      doc: "docs/governance/07-exception-handling.md"
      category: "process"
      status: "stable"
      version: "1.0.0"
      schemas:
        - "schemas/exception-request.schema.yaml"
      policies:
        - "policies/exception/exception-policy.yaml"
      templates:
        - "templates/governance/forms/exception-request.template.yaml"
      examples:
        - "src/governance/dimensions/examples/exception/EXC-2025-001.yaml"
      tags: ["exception", "compliance", "approval"]

    # Observability and validation
    - id: observability-validation
      name: "可观测性与验证"
      description: "Prometheus规则、Grafana仪表板和自动化验证"
      doc: "docs/governance/08-observability-validation.md"
      category: "monitoring"
      status: "stable"
      version: "1.0.0"
      templates:
        - "templates/governance/k8s/prometheus-rule-naming-alert.template.yaml"
        - "templates/governance/monitoring/grafana-dashboard-governance.json"
      examples:
        - "src/governance/dimensions/examples/observability/prometheus-rules.yaml"
      tags: ["observability", "prometheus", "grafana"]

    # Security and compliance
    - id: security-compliance
      name: "安全与合规"
      description: "信息安全政策、合规要求和审计流程"
      doc: "docs/governance/09-security-compliance.md"
      category: "security"
      status: "stable"
      version: "1.0.0"
      policies:
        - "policies/security/info-security-policy-reference.yaml"
      examples:
        - "src/governance/dimensions/examples/security/security-review-checklist.yaml"
      tags: ["security", "compliance", "audit"]

    # Cross-team governance
    - id: cross-team-governance
      name: "跨团队治理协作"
      description: "多团队协作、治理委员会和决策机制"
      doc: "docs/governance/10-cross-team-governance.md"
      category: "collaboration"
      status: "stable"
      version: "1.0.0"
      schemas:
        - "schemas/review-meeting.schema.yaml"
      examples:
        - "src/governance/dimensions/examples/review-meeting-sample.yaml"
      tags: ["collaboration", "team", "governance"]

    # Namespace tutorial integration
    - id: namespace-tutorial
      name: "命名空间教学整合"
      description: "基于NamespaceTutorial的实践教学和最佳实践"
      doc: "NamespaceTutorial/README.md"
      category: "tutorial"
      status: "stable"
      version: "1.0.0"
      examples:
        - "NamespaceTutorial/examples/kubernetes_namespaces.yaml"
        - "NamespaceTutorial/examples/rbac_roles.yaml"
      tools:
        - "NamespaceTutorial/scripts/cleanup_namespaces.sh"
        - "NamespaceTutorial/scripts/monitor_resources.sh"
      tags: ["tutorial", "namespace", "kubernetes"]

  # External references and sources
  references:
    file: "references/references.yaml"
    description: "索引所有外部来源、标准和最佳实践文档"

  # Automation integration points
  automation:
    cicd:
      github-actions:
        - "templates/governance/ci/github-actions-naming-check.yml"
      gitlab-ci:
        - "templates/governance/ci/gitlab-ci-naming-check.yml"
      jenkins:
        - "templates/governance/ci/jenkins-naming-check.groovy"

    validation:
      tools:
        - name: "naming-validator"
          path: "tools/governance/python/validate_naming.py"
          type: "python"
          description: "验证资源命名是否符合规范"
        - name: "resource-name-generator"
          path: "tools/governance/bash/generate_resource_name.sh"
          type: "bash"
          description: "根据规则生成标准化资源名称"

    bots:
      naming-bot:
        path: "tools/governance/node/naming-bot.js"
        type: "nodejs"
        description: "GitHub/GitLab PR自动命名检查机器人"

  # Compliance and audit
  compliance:
    frameworks:
      - name: "ISO 27001"
        mappings:
          - module: "security-compliance"
            controls: ["A.12.1.1", "A.12.4.1"]
      - name: "SOC 2"
        mappings:
          - module: "change-management"
            controls: ["CC8.1"]
          - module: "metrics-and-audit"
            controls: ["CC4.1", "CC4.2"]

    auditLog:
      enabled: true
      retention: "365d"
      format: "json"

  # Versioning and updates
  versioning:
    scheme: "semver"
    changelog: "CHANGELOG.md"
    updatePolicy: "rolling"
    deprecationWindow: "6 months"

  # Support and contact
  support:
    documentation: "https://machinenativeops.github.io/docs"
    issues: "https://github.com/MachineNativeOps/MachineNativeOps/issues"
    discussions: "https://github.com/MachineNativeOps/MachineNativeOps/discussions"
    email: "governance@machinenativeops.io"

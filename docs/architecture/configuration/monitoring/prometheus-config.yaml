global:
  evaluation_interval: 15s
  scrape_interval: 15s
scrape_configs:
- job_name: sonarqube
  metrics_path: /api/monitoring/metrics
  static_configs:
  - targets:
    - sonarqube:9000
- job_name: jenkins
  metrics_path: /prometheus
  static_configs:
  - targets:
    - jenkins:8080
- job_name: code-checker
  static_configs:
  - targets:
    - code-checker:8080
- job_name: kubernetes-pods
  kubernetes_sd_configs:
  - namespaces:
      names:
      - code-quality
    role: pod
  relabel_configs:
  - action: keep
    regex: true
    source_labels:
    - __meta_kubernetes_pod_annotation_prometheus_io_scrape
  - action: replace
    regex: (.+)
    source_labels:
    - __meta_kubernetes_pod_annotation_prometheus_io_path
    target_label: __metrics_path__

# automation/autonomous é‡æ§‹åŠ‡æœ¬ï¼ˆRefactor Playbookï¼‰

- Cluster IDï¼š`automation/autonomous`
- å°æ‡‰ç›®éŒ„ï¼š`automation/autonomous/`, `automation/architecture-skeletons/`
- å°æ‡‰é›†æˆåŠ‡æœ¬ï¼š
  - `docs/refactor_playbooks/02_integration/automation__autonomous_integration.md`
- å°æ‡‰è§£æ§‹åŠ‡æœ¬ï¼š
  - `docs/refactor_playbooks/01_deconstruction/automation__autonomous_deconstruction.md`
- Legacy Assetsï¼š
  - _ç„¡èˆŠè³‡ç”¢éœ€é·ç§»_

---

## 1. Cluster æ¦‚è¦½

### è§’è‰²èªªæ˜

æœ¬ cluster æ˜¯ **Unmanned Island System çš„è‡ªä¸»ç³»çµ±æ¡†æ¶å±¤**ï¼Œåœ¨ç³»çµ±ä¸­æ‰®æ¼”ä»¥ä¸‹è§’è‰²ï¼š

- **äº”éª¨æ¶è‡ªä¸»ç³»çµ±ï¼ˆFive-Skeleton Autonomous Systemï¼‰**çš„å¯¦ä½œ
- æä¾›ç„¡äººæ©Ÿï¼ˆDroneï¼‰èˆ‡è‡ªé§•è»Šï¼ˆSelf-Drivingï¼‰çš„æ§åˆ¶èˆ‡æ•´åˆ
- å¯¦ä½œ ROS2 æ•´åˆèˆ‡æ©Ÿå™¨äººä½œæ¥­ç³»çµ±äº’å‹•
- ç®¡ç†æ„Ÿæ¸¬å™¨èåˆã€è·¯å¾‘è¦åŠƒã€éšœç¤™ç‰©åµæ¸¬
- æä¾›å®‰å…¨ç›£æ§èˆ‡ç·Šæ€¥æ¥ç®¡æ©Ÿåˆ¶

### äº”éª¨æ¶æ¶æ§‹

```text
autonomous/
â”œâ”€ perception/          # æ„ŸçŸ¥éª¨æ¶ - æ„Ÿæ¸¬å™¨èåˆã€ç’°å¢ƒæ„ŸçŸ¥
â”œâ”€ planning/            # è¦åŠƒéª¨æ¶ - è·¯å¾‘è¦åŠƒã€ä»»å‹™è¦åŠƒ
â”œâ”€ control/             # æ§åˆ¶éª¨æ¶ - é‹å‹•æ§åˆ¶ã€åŸ·è¡Œå™¨æ§åˆ¶
â”œâ”€ communication/       # é€šè¨Šéª¨æ¶ - æ©Ÿå™¨é–“é€šè¨Šã€é ç«¯æ§åˆ¶
â””â”€ safety/              # å®‰å…¨éª¨æ¶ - å®‰å…¨ç›£æ§ã€ç·Šæ€¥åœæ­¢
```

### ä¸»è¦èªè¨€çµ„æˆèˆ‡å¥åº·ç‹€æ…‹

ç•¶å‰èªè¨€åˆ†ä½ˆï¼š

- **C++** (50%)ï¼šROS2 ç¯€é»ã€æ„Ÿæ¸¬å™¨é©…å‹•ã€å³æ™‚æ§åˆ¶
- **Python** (40%)ï¼šé«˜éšé‚è¼¯ã€AI æ±ºç­–ã€æ•´åˆå±¤
- **Go** (8%)ï¼šAPI Gatewayã€é™æ¸¬æ”¶é›†
- **å…¶ä»–** (2%)ï¼šé…ç½®æª”æ¡ˆã€Shell scripts

å¥åº·ç‹€æ…‹ï¼š

- âœ… ROS2 æ•´åˆç©©å®š
- âœ… C++ æ ¸å¿ƒæ§åˆ¶é‚è¼¯æ•ˆèƒ½è‰¯å¥½
- âš ï¸ Python èˆ‡ C++ ä»‹é¢éœ€æ¨™æº–åŒ–
- âš ï¸ ç¼ºå°‘å®Œæ•´çš„æ¨¡æ“¬æ¸¬è©¦ç’°å¢ƒæ–‡ä»¶

---

## 2. å•é¡Œç›¤é»ï¼ˆä¾†æºï¼šèªè¨€æ²»ç† / Hotspot / Semgrep / Flowï¼‰

### èªè¨€æ²»ç†å•é¡Œå½™ç¸½

_å¾…è£œå……ï¼šå¾ `governance/language-governance-report.md` æå– automation/autonomous ç›¸é—œé•è¦_

é æœŸå•é¡Œé¡å‹ï¼š

- Python å‹åˆ¥è¨»è§£è¦†è“‹ç‡ä¸è¶³
- C++ ç¨‹å¼ç¢¼é¢¨æ ¼ä¸çµ±ä¸€
- è·¨èªè¨€ä»‹é¢æ–‡ä»¶ç¼ºå¤±

### Hotspot æª”æ¡ˆ

æ ¹æ“š `apps/web/public/data/hotspot.json` å¯¦éš›æƒæçµæœï¼š

| æª”æ¡ˆ | Score | åš´é‡æ€§ | å•é¡Œæè¿° |
|------|-------|--------|----------|
| `automation/autonomous/flight_controller.lua` | 65 | MEDIUM | Lua ä¸æ‡‰ç”¨æ–¼ autonomous å±¤ï¼Œæ‡‰ä½¿ç”¨ C++ æˆ– Python |

**åˆ†æ**ï¼š

1. **`automation/autonomous/flight_controller.lua`** (score: 65, MEDIUM)
   - å•é¡Œï¼šLua in autonomous layer, should use C++ or Python
   - å½±éŸ¿ï¼šèªè¨€ä¸ä¸€è‡´ï¼Œé•åäº”éª¨æ¶æ¶æ§‹åŸå‰‡
   - å»ºè­°ï¼šæ ¹æ“šåŠŸèƒ½æ±ºå®šï¼š
     - å³æ™‚æ§åˆ¶é‚è¼¯ â†’ æ”¹å¯«ç‚º C++
     - é«˜éšå”èª¿é‚è¼¯ â†’ æ”¹å¯«ç‚º Python

### Semgrep å®‰å…¨å•é¡Œ

æ ¹æ“š `governance/semgrep-report.json` æƒæçµæœï¼š

âœ… **ç›®å‰ç„¡ Semgrep å ±å‘Šçš„å®‰å…¨å•é¡Œ**

æŒçºŒé—œæ³¨é»ï¼ˆç‰¹åˆ¥é‡å°è‡ªä¸»ç³»çµ±ï¼‰ï¼š

- **C++ è¨˜æ†¶é«”å®‰å…¨**ï¼šä½¿ç”¨ AddressSanitizer / Valgrind å®šæœŸæª¢æ¸¬
- **Python è¼¸å…¥é©—è­‰**ï¼šæ‰€æœ‰é ç«¯å‘½ä»¤éœ€åš´æ ¼é©—è­‰
- **é€šè¨Šå®‰å…¨**ï¼šç¢ºä¿æ‰€æœ‰æ§åˆ¶æŒ‡ä»¤ä½¿ç”¨åŠ å¯†é€šé“ï¼ˆTLS/SSLï¼‰
- **ç·Šæ€¥åœæ­¢æ©Ÿåˆ¶**ï¼šå®šæœŸæ¸¬è©¦ safety éª¨æ¶çš„å¯é æ€§

### Migration Flow è§€å¯Ÿ

æ ¹æ“š `apps/web/public/data/migration-flow.json` åˆ†æï¼š

**Outgoing Flowsï¼ˆå¾ automation/ æµå‡ºï¼‰**ï¼š

1. `automation:lua` â†’ `automation:python` (å»ºè­°é·ç§»)
   - è¡Œå‹•ï¼šå°‡ `flight_controller.lua` æ”¹å¯«ç‚º Python æˆ– C++
   
2. `automation:perl` â†’ `removed` (å»ºè­°ç§»é™¤)
   - è¡Œå‹•ï¼šæª¢æŸ¥æ˜¯å¦æœ‰ Perl è…³æœ¬éœ€è¦æ¸…ç†

**è§’è‰²å®šä½**ï¼š

- automation/autonomous æ˜¯èªè¨€é•è¦çš„**ä¾†æº**ä¹‹ä¸€ï¼ˆæœ‰ Lua é•è¦ï¼‰
- **ç›¸å°ç¨ç«‹**ï¼šä¸»è¦èˆ‡ core/ AI å¼•æ“äº’å‹•
- **ç›®æ¨™ç‹€æ…‹**ï¼šç´” C++ (ROS2/å³æ™‚) + Python (é«˜éšé‚è¼¯) + Go (API/é™æ¸¬)

---

## 3. èªè¨€èˆ‡çµæ§‹é‡æ§‹ç­–ç•¥

### èªè¨€å±¤ç´šç­–ç•¥

#### çµ±ä¸€ä¸»èªè¨€

- **C++17/20**ï¼šä¿æŒç‚ºå³æ™‚æ§åˆ¶èˆ‡ ROS2 ç¯€é»çš„ä¸»è¦èªè¨€
- **Python 3.10+**ï¼šç”¨æ–¼é«˜éšé‚è¼¯ã€AI æ•´åˆã€å·¥å…·è…³æœ¬
- **Go**ï¼šç”¨æ–¼ API Gateway èˆ‡é™æ¸¬æœå‹™

#### èªè¨€é‚Šç•Œæ¸…æ™°åŒ–

```text
C++ å±¤ï¼š
  - ROS2 ç¯€é»å¯¦ä½œ
  - å³æ™‚æ„Ÿæ¸¬å™¨è™•ç†
  - ä½å»¶é²æ§åˆ¶è¿´è·¯

Python å±¤ï¼š
  - é«˜éšæ±ºç­–é‚è¼¯
  - AI æ¨¡å‹æ¨ç†
  - é…ç½®ç®¡ç†èˆ‡å·¥å…·

Go å±¤ï¼š
  - HTTP/gRPC API
  - é™æ¸¬èˆ‡æ—¥èªŒæ”¶é›†
  - ç›£æ§ Dashboard å¾Œç«¯
```

### ç›®éŒ„èˆ‡æ¨¡çµ„é‚Šç•Œèª¿æ•´

#### ç•¶å‰çµæ§‹

```text
automation/autonomous/
â”œâ”€ architecture-stability/     # ROS2 C++ å¯¦ä½œ
â”œâ”€ api-governance/             # Python API å±¤
â”œâ”€ docs-examples/              # æ–‡ä»¶èˆ‡ç¯„ä¾‹
â””â”€ observability-agents/       # Go è§€æ¸¬ä»£ç†
```

#### å»ºè­°èª¿æ•´

```text
automation/autonomous/
â”œâ”€ README.md                               # ç¸½è¦½èˆ‡æ¶æ§‹èªªæ˜
â”œâ”€ perception/                             # æ„ŸçŸ¥éª¨æ¶
â”‚  â”œâ”€ ros2_nodes/                          # C++ ROS2 ç¯€é»
â”‚  â”œâ”€ python_integration/                  # Python åŒ…è£å±¤
â”‚  â””â”€ README.md
â”œâ”€ planning/                               # è¦åŠƒéª¨æ¶
â”‚  â”œâ”€ ros2_nodes/
â”‚  â”œâ”€ python_integration/
â”‚  â””â”€ README.md
â”œâ”€ control/                                # æ§åˆ¶éª¨æ¶
â”‚  â”œâ”€ ros2_nodes/
â”‚  â”œâ”€ python_integration/
â”‚  â””â”€ README.md
â”œâ”€ communication/                          # é€šè¨Šéª¨æ¶
â”‚  â”œâ”€ ros2_nodes/
â”‚  â”œâ”€ api_gateway/                         # Go API Gateway
â”‚  â””â”€ README.md
â”œâ”€ safety/                                 # å®‰å…¨éª¨æ¶
â”‚  â”œâ”€ ros2_nodes/
â”‚  â”œâ”€ emergency_stop/
â”‚  â””â”€ README.md
â”œâ”€ observability/                          # è§€æ¸¬èˆ‡ç›£æ§
â”‚  â”œâ”€ telemetry_collector/                 # Go é™æ¸¬æ”¶é›†
â”‚  â”œâ”€ dashboard_backend/                   # Go Dashboard API
â”‚  â””â”€ README.md
â”œâ”€ simulation/                             # æ¨¡æ“¬èˆ‡æ¸¬è©¦ç’°å¢ƒ
â”‚  â”œâ”€ gazebo_worlds/
â”‚  â”œâ”€ test_scenarios/
â”‚  â””â”€ README.md
â””â”€ docs/                                   # æ–‡ä»¶èˆ‡ç¯„ä¾‹
   â”œâ”€ architecture.md
   â”œâ”€ api_reference.md
   â””â”€ examples/
```

### èˆ‡é›†æˆæ–¹æ¡ˆçš„å°é½Š

å¿…é ˆç¬¦åˆ `02_integration/automation__autonomous_integration.md` ä¸­å®šç¾©çš„ï¼š

- ROS2 ä»‹é¢è¦ç¯„ï¼ˆtopics, services, actionsï¼‰
- èˆ‡ core/ çš„æ•´åˆé»ï¼ˆAI æ±ºç­–ã€å®‰å…¨æ©Ÿåˆ¶ï¼‰
- èˆ‡ automation/intelligent çš„å”ä½œæ–¹å¼
- API Gateway çš„å…¬é–‹ä»‹é¢

---

## 4. åˆ†ç´šé‡æ§‹è¨ˆç•«ï¼ˆP0 / P1 / P2ï¼‰

### P0ï¼ˆ24â€“48 å°æ™‚å…§å¿…é ˆè™•ç†ï¼‰

- ç›®æ¨™ï¼šç§»é™¤èªè¨€é•è¦ï¼Œç¢ºä¿äº”éª¨æ¶æ¶æ§‹å®Œæ•´æ€§
- è¡Œå‹•é …ç›®ï¼ˆæª”æ¡ˆå±¤ç´šï¼‰ï¼š
  - âœ… **è¡Œå‹• 1**ï¼šè©•ä¼° `automation/autonomous/flight_controller.lua` (score: 65, MEDIUM)
    - **æ­¥é©Ÿ 1**ï¼šåˆ†ææª”æ¡ˆåŠŸèƒ½ï¼ˆå³æ™‚æ§åˆ¶ vs é«˜éšé‚è¼¯ï¼‰
    - **æ­¥é©Ÿ 2**ï¼šæ±ºå®šç›®æ¨™èªè¨€ï¼š
      - å¦‚æœæ˜¯å³æ™‚æ§åˆ¶ï¼ˆ< 10ms å»¶é²è¦æ±‚ï¼‰â†’ **æ”¹å¯«ç‚º C++**
      - å¦‚æœæ˜¯é«˜éšå”èª¿é‚è¼¯ â†’ **æ”¹å¯«ç‚º Python**
    - **æ­¥é©Ÿ 3**ï¼šå¯¦ä½œæ–°ç‰ˆæœ¬ä¸¦ä¿æŒåŠŸèƒ½ç­‰åƒ¹
    - **æ­¥é©Ÿ 4**ï¼šåœ¨æ¨¡æ“¬ç’°å¢ƒï¼ˆGazeboï¼‰ä¸­é©—è­‰
    - **æ­¥é©Ÿ 5**ï¼šåˆªé™¤åŸå§‹ Lua æª”æ¡ˆ
    - **é ä¼°æ™‚é–“**ï¼š8-16 å°æ™‚ï¼ˆå«æ¨¡æ“¬æ¸¬è©¦ï¼‰
    - **é¢¨éšªè©•ä¼°**ï¼šä¸­ç­‰ï¼ˆéœ€è¦å……åˆ†æ¸¬è©¦ç¢ºä¿é£›è¡Œå®‰å…¨ï¼‰
  
  - âœ… **è¡Œå‹• 2**ï¼šæª¢æŸ¥ä¸¦åŠ å›ºå®‰å…¨æ©Ÿåˆ¶
    - é©—è­‰æ‰€æœ‰é ç«¯æ§åˆ¶é€šé“ä½¿ç”¨åŠ å¯†ï¼ˆTLS/SSLï¼‰
    - æ¸¬è©¦ç·Šæ€¥åœæ­¢æ©Ÿåˆ¶çš„åæ‡‰æ™‚é–“ï¼ˆ< 100msï¼‰
    - ç¢ºèª safety éª¨æ¶çš„æ•…éšœåˆ‡æ›é‚è¼¯
    - **é ä¼°æ™‚é–“**ï¼š4 å°æ™‚
    
- é©—æ”¶æ¢ä»¶ï¼š
  - âœ… automation/autonomous/ ç›®éŒ„ä¸‹ç„¡ Lua æª”æ¡ˆ
  - âœ… Semgrep HIGH severity = 0
  - âœ… æ‰€æœ‰é ç«¯æ§åˆ¶é€šé“ä½¿ç”¨åŠ å¯†
  - âœ… ç·Šæ€¥åœæ­¢æ©Ÿåˆ¶é€šéå£“åŠ›æ¸¬è©¦ï¼ˆ1000 æ¬¡é€£çºŒæ¸¬è©¦ç„¡å¤±æ•—ï¼‰
  - âœ… åœ¨ Gazebo æ¨¡æ“¬ç’°å¢ƒä¸­é€šé 10 å€‹æ¨™æº–é£›è¡Œå ´æ™¯
  - âœ… ROS2 æ•´åˆæ¸¬è©¦å…¨éƒ¨é€šé

### P1ï¼ˆä¸€é€±å…§å®Œæˆï¼‰

- ç›®æ¨™ï¼šæ¶æ§‹æ¸…æ™°åŒ–èˆ‡äº”éª¨æ¶åˆ†é›¢
- è¡Œå‹•é …ç›®ï¼š
  - é‡çµ„ç›®éŒ„çµæ§‹ï¼Œå°‡åˆ†æ•£çš„æ¨¡çµ„æ•´åˆåˆ°äº”éª¨æ¶æ¡†æ¶
    - `architecture-stability/*` â†’ åˆ†é…åˆ°å°æ‡‰éª¨æ¶
    - `api-governance/*` â†’ `communication/api_gateway/`
    - `observability-agents/*` â†’ `observability/`
  - å»ºç«‹å„éª¨æ¶çš„ README.md èˆ‡ API æ–‡ä»¶
  - æ¨™æº–åŒ– Python-C++ ä»‹é¢ï¼ˆä½¿ç”¨ pybind11 æˆ– ROS2 Python bindingsï¼‰
  - ç‚º Python ç¨‹å¼ç¢¼æ–°å¢å‹åˆ¥è¨»è§£
- é©—æ”¶æ¢ä»¶ï¼š
  - ç›®éŒ„çµæ§‹ç¬¦åˆäº”éª¨æ¶è¨­è¨ˆ
  - æ‰€æœ‰éª¨æ¶æœ‰å®Œæ•´çš„ README.md
  - Python å‹åˆ¥è¦†è“‹ç‡ > 80%
  - ROS2 ä»‹é¢æ–‡ä»¶å®Œæ•´

### P2ï¼ˆæŒçºŒé‡æ§‹ï¼‰

- ç›®æ¨™ï¼šå“è³ªæå‡èˆ‡é–‹ç™¼é«”é©—æ”¹å–„
- è¡Œå‹•é …ç›®ï¼š
  - å»ºç«‹å®Œæ•´çš„æ¨¡æ“¬æ¸¬è©¦ç’°å¢ƒï¼ˆGazebo + ROS2ï¼‰
  - è£œå……å–®å…ƒæ¸¬è©¦èˆ‡æ•´åˆæ¸¬è©¦
  - å»ºç«‹ CI/CD pipeline ç”¨æ–¼ ROS2 ç¨‹å¼ç¢¼
  - å„ªåŒ–æ„Ÿæ¸¬å™¨èåˆæ¼”ç®—æ³•æ•ˆèƒ½
  - å»ºç«‹é–‹ç™¼è€…å¿«é€Ÿä¸Šæ‰‹æŒ‡å—
  - å¯¦ä½œå³æ™‚ç›£æ§ Dashboard
- é©—æ”¶æ¢ä»¶ï¼š
  - C++ æ¸¬è©¦è¦†è“‹ç‡ > 70%
  - Python æ¸¬è©¦è¦†è“‹ç‡ > 80%
  - æ‰€æœ‰ ROS2 ç¯€é»æœ‰å–®å…ƒæ¸¬è©¦
  - æ¨¡æ“¬ç’°å¢ƒå¯ä¸€éµå•Ÿå‹•
  - æ–‡ä»¶å®Œæ•´åº¦ > 90%

---

## 5. Auto-Fix Bot å¯ä»¥è™•ç†çš„é …ç›®

### é©åˆ Auto-Fix çš„è®Šæ›´

ä»¥ä¸‹é …ç›®å¯ä»¥äº¤çµ¦ Auto-Fix Botï¼š

1. **ç¨‹å¼ç¢¼æ ¼å¼åŒ–**
   - C++ï¼šä½¿ç”¨ clang-format
   - Pythonï¼šä½¿ç”¨ Black
   - çµ±ä¸€ç¸®æ’èˆ‡å‘½åé¢¨æ ¼

2. **å‹åˆ¥è¨»è§£è£œå¼·**
   - ç‚º Python å‡½å¼æ–°å¢å‹åˆ¥æç¤º
   - ä½¿ç”¨ mypy é©—è­‰å‹åˆ¥æ­£ç¢ºæ€§

3. **ç°¡å–®é‡æ§‹**
   - ç§»é™¤æœªä½¿ç”¨çš„ import
   - ç§»é™¤ debug print èªå¥
   - æ›´æ–° deprecated API ä½¿ç”¨

4. **æ–‡ä»¶ç”Ÿæˆ**
   - å¾ docstring ç”Ÿæˆ API æ–‡ä»¶
   - æ›´æ–° ROS2 ä»‹é¢æ–‡ä»¶

### å¿…é ˆäººå·¥å¯©æŸ¥çš„è®Šæ›´

ä»¥ä¸‹é …ç›®å¿…é ˆç”±äººé¡å·¥ç¨‹å¸«å¯©æŸ¥ï¼š

1. **å³æ™‚æ§åˆ¶é‚è¼¯**
   - ä¿®æ”¹ PID æ§åˆ¶åƒæ•¸
   - è®Šæ›´æ„Ÿæ¸¬å™¨èåˆæ¼”ç®—æ³•
   - èª¿æ•´è·¯å¾‘è¦åŠƒç­–ç•¥

2. **å®‰å…¨æ©Ÿåˆ¶è®Šæ›´**
   - ä¿®æ”¹ç·Šæ€¥åœæ­¢é‚è¼¯
   - è®Šæ›´å®‰å…¨é‚Šç•Œæª¢æŸ¥
   - èª¿æ•´æ•…éšœåµæ¸¬èˆ‡æ¢å¾©

3. **ROS2 ä»‹é¢è®Šæ›´**
   - ä¿®æ”¹ topic/service å®šç¾©
   - è®Šæ›´è¨Šæ¯æ ¼å¼
   - èª¿æ•´ç¯€é»é–“é€šè¨Šå”è­°

4. **æ•ˆèƒ½é—œéµè·¯å¾‘**
   - å„ªåŒ–å³æ™‚è™•ç†è¿´è·¯
   - ä¿®æ”¹è¨˜æ†¶é«”ç®¡ç†ç­–ç•¥
   - èª¿æ•´åŸ·è¡Œç·’åŒæ­¥æ©Ÿåˆ¶

---

## 6. é©—æ”¶æ¢ä»¶èˆ‡æˆåŠŸæŒ‡æ¨™

### èªè¨€æ²»ç†æŒ‡æ¨™

| æŒ‡æ¨™ | ç•¶å‰å€¼ | ç›®æ¨™å€¼ | é©—è­‰æ–¹å¼ |
|------|--------|--------|----------|
| èªè¨€é•è¦æ•¸ | **1** (1 MEDIUM: Lua) | **0** | `npm run governance:check` |
| Lua æª”æ¡ˆæ•¸ | **1** (`flight_controller.lua`) | **0** | `find automation/ -name "*.lua" \| wc -l` |
| Python å‹åˆ¥è¦†è“‹ç‡ | å¾…æ¸¬é‡ | > 80% | `mypy automation/autonomous/` |
| C++ éœæ…‹åˆ†æ | å¾…åŸ·è¡Œ | 0 warnings | `clang-tidy automation/autonomous/` |
| Hotspot Score | **Max: 65** (flight_controller.lua) | < 50 | Review hotspot.json |

### å®‰å…¨æŒ‡æ¨™

| åš´é‡æ€§ | ç•¶å‰æ•¸é‡ | ç›®æ¨™æ•¸é‡ | é©—è­‰æ–¹å¼ |
|--------|----------|----------|----------|
| CRITICAL | **0** âœ… | 0 | Semgrep æƒæ |
| HIGH | **0** âœ… | 0 | Semgrep + æ‰‹å‹•ä»£ç¢¼å¯©æŸ¥ |
| MEDIUM | **0** âœ… | <= 2 | Semgrep |
| è¨˜æ†¶é«”æ´©æ¼ | å¾…æª¢æ¸¬ | 0 | Valgrind / AddressSanitizer |
| ç·Šæ€¥åœæ­¢åæ‡‰æ™‚é–“ | å¾…æ¸¬é‡ | < 100ms | å£“åŠ›æ¸¬è©¦ |

### æ¶æ§‹æŒ‡æ¨™

- **äº”éª¨æ¶å®Œæ•´æ€§**ï¼šæ‰€æœ‰éª¨æ¶æœ‰æ˜ç¢ºçš„è·è²¬èˆ‡ä»‹é¢
- **ROS2 ä»‹é¢æ¨™æº–åŒ–**ï¼šæ‰€æœ‰ç¯€é»éµå¾ªçµ±ä¸€çš„å‘½åèˆ‡è¨Šæ¯æ ¼å¼
- **æ¸¬è©¦è¦†è“‹ç‡**ï¼šC++ > 70%, Python > 80%
- **æ–‡ä»¶å®Œæ•´æ€§**ï¼šæ‰€æœ‰å…¬é–‹ä»‹é¢æœ‰æ–‡ä»¶
- **æ¨¡æ“¬ç’°å¢ƒ**ï¼šå¯åœ¨ Gazebo ä¸­å®Œæ•´æ¸¬è©¦

---

## 7. æª”æ¡ˆèˆ‡ç›®éŒ„çµæ§‹ï¼ˆäº¤ä»˜è¦–åœ–ï¼‰

### å—å½±éŸ¿ç›®éŒ„

- `automation/autonomous/` - æ•´å€‹è‡ªä¸»ç³»çµ±ç›®éŒ„
- `automation/architecture-skeletons/` - æ¶æ§‹éª¨æ¶ï¼ˆå°‡æ•´åˆåˆ° autonomousï¼‰

### çµæ§‹ç¤ºæ„ï¼ˆé‡æ§‹å¾Œç›®æ¨™ï¼‰

```text
automation/autonomous/
â”œâ”€ README.md                                      # è‡ªä¸»ç³»çµ±ç¸½è¦½èˆ‡äº”éª¨æ¶æ¶æ§‹èªªæ˜
â”œâ”€ perception/                                    # æ„ŸçŸ¥éª¨æ¶
â”‚  â”œâ”€ ros2_nodes/                                 # C++ ROS2 ç¯€é»
â”‚  â”‚  â”œâ”€ sensor_fusion_node/
â”‚  â”‚  â”œâ”€ object_detection_node/
â”‚  â”‚  â””â”€ CMakeLists.txt
â”‚  â”œâ”€ python_integration/                         # Python åŒ…è£èˆ‡é«˜éšé‚è¼¯
â”‚  â”‚  â”œâ”€ perception_manager.py
â”‚  â”‚  â””â”€ __init__.py
â”‚  â””â”€ README.md                                   # æ„ŸçŸ¥éª¨æ¶èªªæ˜
â”œâ”€ planning/                                      # è¦åŠƒéª¨æ¶
â”‚  â”œâ”€ ros2_nodes/
â”‚  â”‚  â”œâ”€ path_planner_node/
â”‚  â”‚  â”œâ”€ mission_planner_node/
â”‚  â”‚  â””â”€ CMakeLists.txt
â”‚  â”œâ”€ python_integration/
â”‚  â”‚  â”œâ”€ planning_manager.py
â”‚  â”‚  â””â”€ __init__.py
â”‚  â””â”€ README.md
â”œâ”€ control/                                       # æ§åˆ¶éª¨æ¶
â”‚  â”œâ”€ ros2_nodes/
â”‚  â”‚  â”œâ”€ motor_controller_node/
â”‚  â”‚  â”œâ”€ flight_controller_node/
â”‚  â”‚  â””â”€ CMakeLists.txt
â”‚  â”œâ”€ python_integration/
â”‚  â”‚  â”œâ”€ control_manager.py
â”‚  â”‚  â””â”€ __init__.py
â”‚  â””â”€ README.md
â”œâ”€ communication/                                 # é€šè¨Šéª¨æ¶
â”‚  â”œâ”€ ros2_nodes/
â”‚  â”‚  â”œâ”€ telemetry_node/
â”‚  â”‚  â””â”€ CMakeLists.txt
â”‚  â”œâ”€ api_gateway/                                # Go API Gateway
â”‚  â”‚  â”œâ”€ main.go
â”‚  â”‚  â”œâ”€ handlers/
â”‚  â”‚  â””â”€ README.md
â”‚  â””â”€ README.md
â”œâ”€ safety/                                        # å®‰å…¨éª¨æ¶
â”‚  â”œâ”€ ros2_nodes/
â”‚  â”‚  â”œâ”€ safety_monitor_node/
â”‚  â”‚  â”œâ”€ emergency_stop_node/
â”‚  â”‚  â””â”€ CMakeLists.txt
â”‚  â”œâ”€ python_integration/
â”‚  â”‚  â”œâ”€ safety_manager.py
â”‚  â”‚  â””â”€ __init__.py
â”‚  â””â”€ README.md
â”œâ”€ observability/                                 # è§€æ¸¬èˆ‡ç›£æ§
â”‚  â”œâ”€ telemetry_collector/                        # Go é™æ¸¬æ”¶é›†å™¨
â”‚  â”‚  â”œâ”€ main.go
â”‚  â”‚  â””â”€ collectors/
â”‚  â”œâ”€ dashboard_backend/                          # Go Dashboard API
â”‚  â”‚  â”œâ”€ main.go
â”‚  â”‚  â””â”€ api/
â”‚  â””â”€ README.md
â”œâ”€ simulation/                                    # æ¨¡æ“¬èˆ‡æ¸¬è©¦
â”‚  â”œâ”€ gazebo_worlds/                              # Gazebo æ¨¡æ“¬ä¸–ç•Œ
â”‚  â”œâ”€ test_scenarios/                             # æ¸¬è©¦å ´æ™¯
â”‚  â”œâ”€ launch/                                     # ROS2 launch æª”æ¡ˆ
â”‚  â””â”€ README.md
â””â”€ docs/                                          # æ–‡ä»¶
   â”œâ”€ architecture.md                             # æ¶æ§‹èªªæ˜
   â”œâ”€ api_reference.md                            # API åƒè€ƒ
   â”œâ”€ developer_guide.md                          # é–‹ç™¼è€…æŒ‡å—
   â””â”€ examples/                                   # ç¯„ä¾‹ç¨‹å¼ç¢¼
```

### é—œéµæª”æ¡ˆèªªæ˜

- **perception/ros2_nodes/sensor_fusion_node/** - å¤šæ„Ÿæ¸¬å™¨èåˆï¼ˆLiDAR + Camera + IMUï¼‰
- **planning/ros2_nodes/path_planner_node/** - å³æ™‚è·¯å¾‘è¦åŠƒèˆ‡é¿éšœ
- **control/ros2_nodes/motor_controller_node/** - ä½éšé¦¬é”æ§åˆ¶èˆ‡ PID èª¿ç¯€
- **communication/api_gateway/** - é ç«¯æ§åˆ¶èˆ‡é™æ¸¬çš„ HTTP/gRPC API
- **safety/ros2_nodes/emergency_stop_node/** - ç·Šæ€¥åœæ­¢èˆ‡å®‰å…¨ç›£æ§

---

## 8. é›†æˆå°é½Šï¼ˆIntegration Alignmentï¼‰

### ä¸Šæ¸¸ä¾è³´

æœ¬ cluster ä¾è³´ä»¥ä¸‹æœå‹™ï¼š

| æœå‹™ | ä»‹é¢é¡å‹ | ç”¨é€” |
|------|----------|------|
| `core/ai_engines/decision` | Python Module | AI æ±ºç­–æ”¯æ´ |
| `core/safety_mechanisms` | Python Module | å®‰å…¨æ©Ÿåˆ¶æ•´åˆ |
| ROS2 Humble | ROS2 | æ©Ÿå™¨äººä½œæ¥­ç³»çµ± |
| Gazebo | Simulation | æ¨¡æ“¬ç’°å¢ƒ |

### ä¸‹æ¸¸ä½¿ç”¨è€…

æœ¬ cluster è¢«ä»¥ä¸‹æœå‹™ä½¿ç”¨ï¼š

| æœå‹™ | ä»‹é¢é¡å‹ | ä½¿ç”¨æ–¹å¼ |
|------|----------|----------|
| `automation/intelligent` | ROS2 Topics | é«˜éšæ™ºèƒ½æ±ºç­– |
| External: Drone Control UI | HTTP API | é ç«¯æ§åˆ¶ä»‹é¢ |
| External: Monitoring | gRPC | é™æ¸¬èˆ‡ç›£æ§ |

### é›†æˆæ­¥é©Ÿæ‘˜è¦

é‡æ§‹éœ€æŒ‰ä»¥ä¸‹é †åºé€²è¡Œï¼š

1. **Phase 1**ï¼šå»ºç«‹æ–°ç›®éŒ„çµæ§‹ï¼ˆä¸ç§»å‹•ç¾æœ‰ç¨‹å¼ç¢¼ï¼‰
   - å»ºç«‹äº”éª¨æ¶ç›®éŒ„èˆ‡ README
   - å®šç¾©å„éª¨æ¶çš„ä»‹é¢è¦ç¯„
   - å»ºç«‹æ¨¡æ“¬æ¸¬è©¦ç’°å¢ƒ

2. **Phase 2**ï¼šæ¼¸é€²å¼é·ç§»
   - é€ä¸€å°‡ç¾æœ‰ç¨‹å¼ç¢¼ç§»å‹•åˆ°å°æ‡‰éª¨æ¶
   - æ›´æ–° CMakeLists.txt å’Œ package.xml
   - åŸ·è¡Œå–®å…ƒæ¸¬è©¦èˆ‡æ•´åˆæ¸¬è©¦

3. **Phase 3**ï¼šé©—è­‰èˆ‡æ¸…ç†
   - åœ¨æ¨¡æ“¬ç’°å¢ƒä¸­å…¨é¢æ¸¬è©¦
   - æ›´æ–°æ‰€æœ‰æ–‡ä»¶èˆ‡ç¯„ä¾‹
   - æ¸…ç†èˆŠç›®éŒ„

### å›æ»¾ç­–ç•¥

è‹¥é‡æ§‹å¤±æ•—ï¼š

1. **ä¿ç•™èˆŠçµæ§‹**ï¼šåœ¨é‡æ§‹æœŸé–“ï¼ŒèˆŠç›®éŒ„çµæ§‹ä¿æŒä¸è®Š
2. **Feature Flag**ï¼šä½¿ç”¨ç’°å¢ƒè®Šæ•¸æ§åˆ¶è¼‰å…¥èˆŠ/æ–°çµæ§‹
3. **Symlink æ”¯æ´**ï¼šå»ºç«‹ symlink ä¿æŒå‘å¾Œç›¸å®¹
4. **å¿«é€Ÿåˆ‡æ›**ï¼šå¯ç«‹å³åˆ‡å›èˆŠ ROS2 launch æª”æ¡ˆ

### é¢¨éšªç®¡æ§

- **ç¡¬é«”æ¸¬è©¦å‰å…ˆæ¨¡æ“¬**ï¼šæ‰€æœ‰è®Šæ›´å¿…é ˆå…ˆåœ¨ Gazebo ä¸­é©—è­‰
- **æ¼¸é€²å¼éƒ¨ç½²**ï¼šå…ˆéƒ¨ç½²éé—œéµéª¨æ¶ï¼ˆå¦‚ observabilityï¼‰
- **å®‰å…¨ç¬¬ä¸€**ï¼šsafety éª¨æ¶çš„è®Šæ›´éœ€è¦é¡å¤–å¯©æŸ¥
- **å³æ™‚ç›£æ§**ï¼šéƒ¨ç½²æ™‚ç›£æ§æ‰€æœ‰æ„Ÿæ¸¬å™¨èˆ‡æ§åˆ¶æŒ‡æ¨™

---

**ç‹€æ…‹**ï¼šğŸŸ¡ è‰ç¨¿ï¼ˆDraftï¼‰  
**æœ€å¾Œæ›´æ–°**ï¼š2025-12-06  
**ä¸‹ä¸€æ­¥**ï¼šå¡«å¯«å¯¦éš›çš„èªè¨€æ²»ç†è³‡æ–™èˆ‡å®‰å…¨æƒæçµæœï¼Œå»ºç«‹æ¨¡æ“¬æ¸¬è©¦ç’°å¢ƒ

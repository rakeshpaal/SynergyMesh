batch_processor:
  batch_config:
    checkpoint_interval: 10
    max_parallel_operations: 5
    max_retries: 3
    retry_on_failure: true
  description: è™•ç†æ•´å€‹å­ç›®éŒ„çš„æ‰¹é‡æ›´æ–°
  full_directory_update:
    description: ç•¶éœ€è¦æ•´é«”æ›´æ–°å­ç›®éŒ„æ™‚çš„è™•ç†æµç¨‹
    name: å­ç›®éŒ„å…¨é¢æ›´æ–°
    steps:
    - actions:
      - scan_current_structure
      - identify_all_files
      - map_dependencies
      name: åˆ†æç¾æœ‰çµæ§‹
      step: 1
    - actions:
      - apply_optimization_rules
      - generate_target_map
      - calculate_changes
      name: ç”Ÿæˆç›®æ¨™çµæ§‹
      step: 2
    - actions:
      - list_creates
      - list_moves
      - list_merges
      - list_deletes
      name: ç”Ÿæˆè®Šæ›´è¨ˆç•«
      step: 3
    - actions:
      - check_conflicts
      - validate_dependencies
      - estimate_impact
      name: é©—è­‰è¨ˆç•«
      step: 4
    - actions:
      - execute_creates
      - execute_moves
      - execute_merges
      - execute_deletes
      name: åŸ·è¡Œè®Šæ›´
      step: 5
    - actions:
      - update_all_references
      - regenerate_indexes
      - update_documentation
      name: å¾Œè™•ç†
      step: 6
    - actions:
      - validate_structure
      - run_tests
      - generate_report
      name: é©—è­‰çµæœ
      step: 7
  name: BatchProcessor
description: é›†æˆè™•ç†å™¨ - æœ€ä½³åŒ–å­ç›®éŒ„çµæ§‹ä¸¦åŸ·è¡Œé›†æˆ
directory_mapper:
  description: ç”Ÿæˆç›®éŒ„çµæ§‹åœ–è­œèˆ‡å±¬æ€§æ˜ å°„
  generation_config:
    annotation_rules:
    - annotation: '# å…¥å£èªªæ˜'
      pattern: README.md
    - annotation: '# é…ç½®'
      pattern: '*.yaml'
    - annotation: '# æ¸¬è©¦'
      pattern: '*_test.*'
    file_count_threshold: 100
    include_hidden: false
    max_depth: 5
  map_types:
    attribute_map:
      attributes:
      - path
      - type
      - category
      - status
      - owner
      - dependencies
      format: yaml
    structure_ascii:
      example: 'docs/refactor_playbooks/

        â”œâ”€â”€ 01_deconstruction/           # è§£æ§‹å±¤

        â”‚   â”œâ”€â”€ README.md

        â”‚   â”œâ”€â”€ hlp-executor-core/       # ğŸ†• HLP çµ±ä¸€ç›®éŒ„

        â”‚   â”‚   â””â”€â”€ deconstruction.md

        â”‚   â””â”€â”€ kg-builder/              # ğŸ†• kg-builder çµ±ä¸€ç›®éŒ„

        â”‚       â””â”€â”€ deconstruction.md

        â””â”€â”€ ...

        '
      format: ascii_tree
      include:
      - directories
      - files
      - annotations
    structure_mermaid:
      format: mermaid_flowchart
      template: "```mermaid\ngraph TD\n    subgraph refactor_playbooks\n        A[01_deconstruction]\
        \ --> B[02_integration]\n        B --> C[03_refactor]\n        D[_legacy_scratch]\
        \ -.-> A\n    end\n```\n"
  name: DirectoryMapper
directory_optimizer:
  description: åˆ†æä¸¦æœ€ä½³åŒ–ç›®æ¨™å­ç›®éŒ„çš„çµæ§‹
  name: DirectoryOptimizer
  optimization_goals:
  - description: çµæ§‹æ¸…æ™°åº¦
    goal: structural_clarity
    metrics:
    - ç›®éŒ„æ·±åº¦ â‰¤ 4 å±¤
    - æ¯ç›®éŒ„æª”æ¡ˆæ•¸ â‰¤ 15
    - å‘½åä¸€è‡´æ€§ > 90%
    weight: 0.3
  - description: åŠŸèƒ½å…§èšæ€§
    goal: functional_cohesion
    metrics:
    - ç›¸é—œåŠŸèƒ½åœ¨åŒä¸€ç›®éŒ„
    - ç„¡è·¨ç›®éŒ„åŠŸèƒ½åˆ†æ•£
    - ä»‹é¢é›†ä¸­å®šç¾©
    weight: 0.25
  - description: ä¾è³´æœ€å°åŒ–
    goal: dependency_minimization
    metrics:
    - ç„¡å¾ªç’°ä¾è³´
    - ä¾è³´æ–¹å‘æ­£ç¢º
    - å¤–éƒ¨ä¾è³´é›†ä¸­
    weight: 0.25
  - description: å‘½åä¸€è‡´æ€§
    goal: naming_consistency
    metrics:
    - éµå¾ªå°ˆæ¡ˆå‘½åè¦ç¯„
    - ç„¡æ··ç”¨å‘½åé¢¨æ ¼
    - æè¿°æ€§å‘½å
    weight: 0.2
  optimization_rules:
    depth_rules:
      actions_when_exceeded:
      - flatten_structure
      - create_index_files
      - split_into_siblings
      max_depth: 4
      recommended_depth: 3
    grouping_rules:
      grouping_strategies:
      - description: æŒ‰é¡å‹åˆ†çµ„
        name: by_type
        patterns:
          configs:
          - '*.yaml'
          - '*.yml'
          - '*.json'
          - '*.config.*'
          implementations:
          - '*impl*'
          - '*service*'
          - '*handler*'
          interfaces:
          - '*interface*'
          - '*contract*'
          - '*api*'
          tests:
          - '*test*'
          - '*spec*'
          - __tests__
      - description: æŒ‰åŠŸèƒ½åˆ†çµ„
        name: by_feature
        patterns:
          auth:
          - '*auth*'
          - '*login*'
          - '*session*'
          data:
          - '*data*'
          - '*model*'
          - '*schema*'
          ui:
          - '*component*'
          - '*view*'
          - '*page*'
      max_files_per_directory: 15
      min_files_per_directory: 2
    naming_rules:
      directory_naming:
        allowed_patterns:
        - ^[a-z][a-z0-9-]*$
        - ^[a-z][a-z0-9_]*$
        forbidden_patterns:
        - ^[A-Z]
        - \s
        style: kebab-case
      file_naming:
        styles:
          markdown: UPPER_SNAKE_CASE.md
          python: snake_case.py
          typescript: camelCase.ts
          yaml: kebab-case.yaml
index_updater:
  description: æ›´æ–°å„ç¨®ç´¢å¼•æª”æ¡ˆ
  index_types:
    human_index:
      auto_update: true
      file: 03_refactor/INDEX.md
      format: markdown
      template: templates/INDEX_TEMPLATE.md
    legacy_index:
      auto_update: true
      file: 01_deconstruction/legacy_assets_index.yaml
      format: yaml
      update_triggers:
      - asset_archived
      - asset_integrated
    machine_index:
      auto_update: true
      file: 03_refactor/index.yaml
      format: yaml
      update_triggers:
      - file_created
      - file_moved
      - file_deleted
    readme:
      auto_update: false
      file: README.md
      format: markdown
      sections_to_update:
      - ç›®éŒ„çµæ§‹
      - ç›¸é—œæ–‡ä»¶é€£çµ
  name: IndexUpdater
integration_executor:
  description: åŸ·è¡Œé›†æˆæ“ä½œçš„å¼•æ“
  execution_modes:
    batch:
      description: æ‰¹é‡åŸ·è¡Œï¼Œè‡ªå‹•è™•ç†
      requires_confirmation: false
      safety_checks: true
      writes_files: true
    dry_run:
      description: æ¨¡æ“¬åŸ·è¡Œï¼Œåªç”Ÿæˆå ±å‘Š
      generates_report: true
      writes_files: false
    interactive:
      description: äº’å‹•æ¨¡å¼ï¼Œæ¯æ­¥ç¢ºèª
      requires_confirmation: true
      writes_files: true
  execution_order:
    phases:
    - name: æº–å‚™
      operations:
      - backup_targets
      - validate_prerequisites
      phase: 1
    - name: çµæ§‹è®Šæ›´
      operations:
      - create_directory
      - move_file
      - copy_file
      phase: 2
    - name: å…§å®¹æ›´æ–°
      operations:
      - merge_file
      - update_references
      phase: 3
    - name: æ¸…ç†
      operations:
      - delete_file
      - remove_empty_directories
      phase: 4
    - name: é©—è­‰
      operations:
      - validate_structure
      - validate_references
      - run_tests
      phase: 5
  name: IntegrationExecutor
  operations:
    copy_file:
      command: cp {source} {target}
      name: è¤‡è£½æª”æ¡ˆ
      rollback: rm {target}
      validation:
        post: ç›®æ¨™å­˜åœ¨
        pre: ä¾†æºå­˜åœ¨
    create_directory:
      command: mkdir -p {path}
      name: å‰µå»ºç›®éŒ„
      rollback: rmdir {path}
      validation:
        post: ç›®éŒ„å·²å‰µå»º
        pre: ç›®éŒ„ä¸å­˜åœ¨
    delete_file:
      command: rm {path}
      name: åˆªé™¤æª”æ¡ˆ
      requires_backup: true
      requires_confirmation: true
      rollback: restore_from_backup
      validation:
        post: æª”æ¡ˆä¸å­˜åœ¨
        pre: æª”æ¡ˆå­˜åœ¨
    merge_file:
      command: custom_merge
      name: åˆä½µæª”æ¡ˆ
      requires_backup: true
      rollback: restore_from_backup
      validation:
        post: åˆä½µå¾Œæª”æ¡ˆæœ‰æ•ˆ
        pre: å…©å€‹ä¾†æºéƒ½å­˜åœ¨
    move_file:
      command: mv {source} {target}
      name: ç§»å‹•æª”æ¡ˆ
      requires_backup: true
      rollback: mv {target} {source}
      validation:
        post: ç›®æ¨™å­˜åœ¨ï¼Œä¾†æºä¸å­˜åœ¨
        pre: ä¾†æºå­˜åœ¨ï¼Œç›®æ¨™ä¸å­˜åœ¨
    update_references:
      command: sed_replace
      name: æ›´æ–°å¼•ç”¨è·¯å¾‘
      requires_backup: true
      rollback: restore_from_backup
      validation:
        post: æ–°è·¯å¾‘å­˜åœ¨ï¼ŒèˆŠè·¯å¾‘ä¸å­˜åœ¨
        pre: èˆŠè·¯å¾‘å­˜åœ¨æ–¼æª”æ¡ˆä¸­
name: IntegrationProcessor
report_generator:
  description: ç”Ÿæˆé›†æˆåŸ·è¡Œå ±å‘Š
  name: ReportGenerator
  report_types:
    change_manifest:
      filename: changes_{timestamp}.yaml
      format: yaml
      includes:
      - created_files
      - moved_files
      - deleted_files
      - modified_files
    detailed_log:
      filename: execution_log_{timestamp}.md
      sections:
      - æ¯æ­¥é©Ÿè©³æƒ…
      - éŒ¯èª¤è¿½è¹¤
      - æ•ˆèƒ½æŒ‡æ¨™
    execution_summary:
      filename: execution_summary_{timestamp}.md
      sections:
      - åŸ·è¡Œæ¦‚è¦½
      - è®Šæ›´çµ±è¨ˆ
      - æˆåŠŸé …ç›®
      - å¤±æ•—é …ç›®
      - è­¦å‘Šé …ç›®
    rollback_guide:
      filename: rollback_guide_{timestamp}.md
      sections:
      - å›æ»¾å‰æª¢æŸ¥
      - å›æ»¾æ­¥é©Ÿ
      - å›æ»¾å¾Œé©—è­‰
safety:
  backup:
    compression: true
    enabled: true
    location: _legacy_scratch/_backups/
    retention_days: 30
  checkpoints:
    auto_save_interval: 5
    enabled: true
    location: _legacy_scratch/_checkpoints/
  rollback:
    enabled: true
    max_rollback_depth: 10
    preserve_backup_after_success: true
validation_engine:
  description: é©—è­‰é›†æˆçµæœçš„æ­£ç¢ºæ€§
  name: ValidationEngine
  validations:
    consistency_validation:
      checks:
      - check: naming_consistent
        description: å‘½åé¢¨æ ¼ä¸€è‡´
        severity: warning
      - check: index_synchronized
        description: ç´¢å¼•èˆ‡å¯¦éš›çµæ§‹åŒæ­¥
        severity: error
      name: ä¸€è‡´æ€§é©—è­‰
    content_validation:
      checks:
      - check: yaml_syntax_valid
        description: YAML èªæ³•æ­£ç¢º
        severity: error
      - check: markdown_links_valid
        description: Markdown é€£çµæœ‰æ•ˆ
        severity: warning
      - check: no_duplicate_content
        description: æ²’æœ‰é‡è¤‡å…§å®¹
        severity: warning
      name: å…§å®¹é©—è­‰
    reference_validation:
      checks:
      - check: no_broken_links
        description: æ²’æœ‰æå£çš„é€£çµ
        severity: error
      - check: no_old_paths
        description: æ²’æœ‰èˆŠè·¯å¾‘å¼•ç”¨
        severity: error
      - check: relative_paths_correct
        description: ç›¸å°è·¯å¾‘æ­£ç¢º
        severity: error
      name: å¼•ç”¨é©—è­‰
    structure_validation:
      checks:
      - check: all_directories_exist
        description: æ‰€æœ‰è¦åŠƒçš„ç›®éŒ„éƒ½å·²å‰µå»º
        severity: error
      - check: no_orphan_files
        description: æ²’æœ‰å­¤ç«‹æª”æ¡ˆ
        severity: warning
      - check: depth_within_limit
        description: ç›®éŒ„æ·±åº¦åœ¨é™åˆ¶å…§
        severity: warning
      name: çµæ§‹é©—è­‰
version: 1.0.0
workflows:
  bulk_reorganization:
    name: æ‰¹é‡é‡çµ„
    steps:
    - action: full_directory_scan
      name: å®Œæ•´æƒæ
    - action: bulk_optimization
      name: æœ€ä½³åŒ–æ±ºç­–
    - action: generate_full_plan
      name: ç”Ÿæˆå®Œæ•´è¨ˆç•«
    - action: await_approval
      name: äººå·¥å¯©æŸ¥
    - action: batch_execute
      name: æ‰¹é‡åŸ·è¡Œ
    - action: comprehensive_validation
      name: å…¨é¢é©—è­‰
  quick_integration:
    name: å¿«é€Ÿé›†æˆ
    steps:
    - action: validate_single_decision
      name: é©—è­‰æ±ºç­–
    - action: execute_single_move
      name: åŸ·è¡Œç§»å‹•
    - action: update_references
      name: æ›´æ–°å¼•ç”¨
    - action: update_indexes
      name: æ›´æ–°ç´¢å¼•
  standard_integration:
    name: æ¨™æº–é›†æˆæµç¨‹
    steps:
    - action: load_placement_decisions
      name: è¼‰å…¥æ±ºç­–
    - action: optimize_directory_structure
      name: æœ€ä½³åŒ–çµæ§‹
    - action: generate_directory_map
      name: ç”Ÿæˆåœ–è­œ
    - action: create_execution_plan
      name: å»ºç«‹è¨ˆç•«
    - action: execute_integration
      name: åŸ·è¡Œé›†æˆ
    - action: update_all_indexes
      name: æ›´æ–°ç´¢å¼•
    - action: validate_integration
      name: é©—è­‰çµæœ
    - action: generate_reports
      name: ç”Ÿæˆå ±å‘Š

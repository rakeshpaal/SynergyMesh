$schema: https://schema.superroot.kn/mndoc/entity/governance/v1
description: "SuperRoot 風格的十階段治理管道，確保所有配置和程式碼符合治理標準。\nTen-stage governance pipeline\
  \ ensuring all configurations and code meet \ngovernance standards.\n"
entity: Governance
evidence_ref:
  audit_log: governance/audit/pipeline-executions.yaml
  slsa_ref: .slsa/provenance/governance-pipeline.json
id: ten-stage-governance-pipeline
meta:
  policy_path: governance/policies/
  schema_path: governance/schemas/
  workflow_ref: .github/workflows/apply.yaml
owner: governance-team
pipeline:
  on_failure: rollback
  stages:
  - description: YAML/JSON 語法檢查
    id: stage-lint
    name: Lint
    on_failure: abort
    order: 1
    required: true
    timeout_seconds: 60
    tools:
    - yamllint
    - jsonlint
    type: lint
  - description: 格式化規則驗證
    id: stage-format
    name: Format
    on_failure: abort
    order: 2
    required: true
    timeout_seconds: 60
    tools:
    - prettier
    - black
    type: format
  - description: JSON Schema 驗證
    id: stage-schema
    name: Schema
    on_failure: abort
    order: 3
    required: true
    timeout_seconds: 120
    tools:
    - ajv
    - jsonschema
    type: schema
  - description: 測試向量驗證
    id: stage-vector-test
    name: Vector Test
    on_failure: abort
    order: 4
    required: true
    timeout_seconds: 300
    tools:
    - pytest
    - jest
    type: vector-test
  - description: OPA/Conftest 策略檢查
    id: stage-policy-gate
    name: Policy Gate
    on_failure: abort
    order: 5
    required: true
    timeout_seconds: 180
    tools:
    - opa
    - conftest
    type: policy-gate
  - description: Kubernetes 清單驗證
    id: stage-k8s-validation
    name: K8s Validation
    on_failure: abort
    order: 6
    required: true
    timeout_seconds: 120
    tools:
    - kubectl
    - kubeconform
    - kubeval
    type: k8s-validation
  - description: 軟體物料清單生成
    id: stage-sbom
    name: SBOM
    on_failure: continue
    order: 7
    required: true
    timeout_seconds: 300
    tools:
    - syft
    - cyclonedx
    type: sbom
  - description: SLSA L3 證據注入
    id: stage-provenance
    name: Provenance
    on_failure: abort
    order: 8
    required: true
    timeout_seconds: 180
    tools:
    - slsa-generator
    - in-toto
    type: provenance
  - description: Sigstore 無密鑰簽名
    id: stage-sign
    name: Cosign Sign
    on_failure: abort
    order: 9
    required: true
    timeout_seconds: 120
    tools:
    - cosign
    - sigstore
    type: sign
  - description: 審計事件記錄
    id: stage-audit
    name: Audit
    on_failure: alert
    order: 10
    required: true
    timeout_seconds: 60
    tools:
    - audit-logger
    type: audit
status: active
tags:
- governance
- pipeline
- slsa
- supply-chain
- compliance
title: Ten-Stage Governance Pipeline
type: pipeline

kind: island-bootstrap
metadata:
  description: Stage 0 skeleton & automation bootstrap for Island AI monorepo.
  project: src/ai
  stage: stage0
spec:
  automation:
    bootstrap_sequence:
    - id: init.git
      kind: shell
      run: 'git init

        git branch -M main

        '
    - from: scaffold
      id: scaffold.directories
      kind: scaffold
    - from: templates
      id: materialize.templates
      kind: materialize
    - id: chmod.hooks
      kind: shell
      run: 'chmod +x .git/hooks/post-commit

        chmod +x scripts/sync/watch-and-sync.sh

        '
    - id: git.initial-commit
      kind: shell
      run: 'git add .

        git commit -m "chore: bootstrap Island AI Stage 0 skeleton"

        '
    build_matrix:
      go:
        build: go build ./...
        test: go test ./...
        workdir: services
      java:
        build: mvn clean install -DskipTests
        test: mvn test
        workdir: integrations
      python:
        test: pytest || true
        workdir: .
      rust:
        build: cargo build --workspace
        test: cargo test --workspace
        workdir: core
      typescript:
        build: npm run build --workspaces --if-present
        test: npm run test --workspaces --if-present
        workdir: .
    validation:
      commands:
      - npm run lint
      - npm run test
      - cargo build --workspace
      - go build ./services/...
      required_paths:
      - README.md
      - LICENSE
      - .github/workflows/08-sync-subdirs.yml
      - core/runtime/src/lib.rs
      - services/api-gateway/cmd/server/main.go
      - agents/architect/src/index.ts
      - agents/security/src/__init__.py
      - applications/web-ui/src/main.tsx
      - infrastructure/terraform/main.tf
  repo:
    default_branch: main
    license: MIT
    visibility: private
  scaffold:
  - base: docs
    id: docs
    ordered_sections:
    - code: 00-GETTING_STARTED
      title: Getting Started
    - code: 01-PRODUCT
      title: Product
    - code: 02-ARCHITECTURE
      title: Architecture
    - code: 03-AGENTS
      title: Agents
    - code: 04-GOVERNANCE
      title: Governance
    - code: 05-COMPONENTS
      title: Core Components
    - code: 06-AUTONOMY
      title: Autonomy
    - code: 07-DEPLOYMENT
      title: Deployment
    - code: 08-API
      title: API
    - code: 09-TUTORIALS
      title: Tutorials
    type: tree
  - base: core
    id: core
    modules:
    - language: rust
      name: runtime
    - language: rust
      name: knowledge-base
    - language: rust
      name: decision-engine
    - language: rust
      name: workflow-orchestrator
    - language: rust
      name: storage-engine
    - language: rust
      name: network
    - language: rust
      name: monitoring
    type: tree
  - base: services
    id: services
    modules:
    - language: go
      name: api-gateway
    - language: go
      name: agent-service
    - language: go
      name: workflow-service
    - language: go
      name: auth-service
    - language: go
      name: notification-service
    - language: go
      name: shared
    type: tree
  - base: agents
    id: agents
    modules:
    - language: typescript
      name: architect
    - language: typescript
      name: developer
    - language: python
      name: security
    - language: typescript
      name: devops
    - language: typescript
      name: qa
    - language: python
      name: data-scientist
    - language: typescript
      name: product-manager
    - language: mixed
      name: shared
    type: tree
  - base: applications
    id: applications
    modules:
    - language: typescript
      name: web-ui
    - language: typescript
      name: cli
    - language: python
      name: ml-pipeline
    - language: typescript
      name: mobile
    type: tree
  - base: integrations
    id: integrations
    modules:
    - language: java
      name: legacy-bridge
    - language: java
      name: message-queue
    - language: java
      name: batch-processing
    - language: java
      name: enterprise-connectors
    type: tree
  - base: infrastructure
    id: infrastructure
    subsystems:
    - name: terraform
    - name: kubernetes
    - name: docker
    - name: ansible
    - name: monitoring
    type: tree
  - base: .
    extra_paths:
    - scripts
    - tools
    - tests
    - .github
    id: misc
    type: tree
  templates:
  - id: root.readme
    mode: 420
    source: templates/root/README.src/ai.v1.md
    target: README.md
  - id: root.license
    mode: 420
    source: templates/root/LICENSE.MIT.v1.txt
    target: LICENSE
  - id: root.gitignore
    mode: 420
    source: templates/root/gitignore.monorepo.v1.txt
    target: .gitignore
  - id: root.package-json
    mode: 420
    source: templates/root/package.src/ai.v1.json
    target: package.json
  - id: root.cargo-workspace
    mode: 420
    source: templates/root/Cargo.workspace.v1.toml
    target: Cargo.toml
  - id: root.go-work
    mode: 420
    source: templates/root/go.work.v1.txt
    target: go.work
  - id: root.pom
    mode: 420
    source: templates/root/integrations.pom.v1.xml
    target: pom.xml
  - id: gha.01-validate
    mode: 420
    source: templates/github/01-validate.v1.yml
    target: .github/workflows/01-validate.yml
  - id: gha.02-test
    mode: 420
    source: templates/github/02-test.v1.yml
    target: .github/workflows/02-test.yml
  - id: gha.03-build
    mode: 420
    source: templates/github/03-build.v1.yml
    target: .github/workflows/03-build.yml
  - id: gha.04-deploy-staging
    mode: 420
    source: templates/github/04-deploy-staging.v1.yml
    target: .github/workflows/04-deploy-staging.yml
  - id: gha.05-deploy-production
    mode: 420
    source: templates/github/05-deploy-production.v1.yml
    target: .github/workflows/05-deploy-production.yml
  - id: gha.06-security-scan
    mode: 420
    source: templates/github/06-security-scan.v1.yml
    target: .github/workflows/06-security-scan.yml
  - id: gha.07-dependency-update
    mode: 420
    source: templates/github/07-dependency-update.v1.yml
    target: .github/workflows/07-dependency-update.yml
  - id: gha.08-sync-subdirs
    mode: 420
    source: templates/github/08-sync-subdirs.v1.yml
    target: .github/workflows/08-sync-subdirs.yml
  - id: git.post-commit
    mode: 493
    source: templates/git-hooks/post-commit.src/ai.v1.sh
    target: .git/hooks/post-commit
  - id: sync.watch-and-sync
    mode: 493
    source: templates/sync/watch-and-sync.src/ai.v1.sh
    target: scripts/sync/watch-and-sync.sh
version: 1

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#                    System Module Map - Example Configuration
#                    ç³»çµ±æ¨¡çµ„æ˜ å°„ - æ¨™æº–ç¯„æœ¬
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
#
# Purpose: Standard template for module organization, boundaries, and refactoring rules
# ç›®çš„ï¼šæ¨¡çµ„çµ„ç¹”ã€é‚Šç•Œèˆ‡é‡æ§‹è¦å‰‡çš„æ¨™æº–ç¯„æœ¬
#
# This is a TEMPLATE for language governance, Phase 0â€“5, and 03_refactor playbooks.
# It should NOT override the real config/system-module-map.yaml without review.
# æ­¤ç‚ºç¯„æœ¬ç”¨æ–¼èªè¨€æ²»ç†ã€Phase 0â€“5 èˆ‡ 03_refactor åŠ‡æœ¬ã€‚
# ä¸æ‡‰åœ¨æœªç¶“å¯©æŸ¥çš„æƒ…æ³ä¸‹è¦†è“‹å¯¦éš›çš„ config/system-module-map.yamlã€‚
#
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ğŸ¤– For AI Agents / Copilot / LLMs:
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# IMPORTANT: Before making changes, read these documents:
#
# 1. AI Behavior Contract: .github/AI-BEHAVIOR-CONTRACT.md
#    - Defines how AI agents should work with this project
#    - å®šç¾© AI ä»£ç†å¦‚ä½•èˆ‡æ­¤å°ˆæ¡ˆå”ä½œ
#
# 2. Technical Guidelines: .github/copilot-instructions.md
#    - Repository structure and three-systems view
#    - å€‰åº«çµæ§‹èˆ‡ä¸‰ç³»çµ±è¦–åœ–
#
# 3. Code Standards: .github/island-ai-instructions.md
#    - Code style, testing, documentation standards
#    - ä»£ç¢¼é¢¨æ ¼ã€æ¸¬è©¦ã€æ–‡æª”æ¨™æº–
#
# Context Limits: If you receive truncated content, ask the user to:
# - Provide complete files via GitHub file upload or gist
# - Break the task into smaller chunks (2-3 subtasks)
# - Reference specific file paths instead of pasting full content
#
# ä¸Šä¸‹æ–‡é™åˆ¶ï¼šå¦‚æœæ”¶åˆ°æˆªæ–·çš„å…§å®¹ï¼Œè«‹ç”¨æˆ¶ï¼š
# - é€é GitHub æª”æ¡ˆä¸Šå‚³æˆ– gist æä¾›å®Œæ•´æª”æ¡ˆ
# - å°‡ä»»å‹™æ‹†è§£æˆè¼ƒå°çš„å€å¡Šï¼ˆ2-3 å€‹å­ä»»å‹™ï¼‰
# - å¼•ç”¨ç‰¹å®šæª”æ¡ˆè·¯å¾‘è€Œéè²¼ä¸Šå®Œæ•´å…§å®¹
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
#
# Usage:
# 1. Copy sections to your actual system-module-map.yaml
# 2. Adjust values to match your modules
# 3. Add/remove modules as needed
#
# Related Documentation:
# - Language Policy: config/language-policy.yaml
# - Refactor Playbooks: docs/refactor_playbooks/03_refactor/
# - System Manifest: config/system-manifest.yaml
# - Phase Documentation: docs/PHASE*.md
#
# Version: 1.0.0
# Last Updated: 2025-12-06
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

version: "1.0.0"
description: >
  Example system module map for ğŸï¸ Unmanned Island System.
  This file is a TEMPLATE for language governance, Phase 0â€“5,
  and 03_refactor playbooks. It should NOT override the real
  config/system-module-map.yaml without review.

# ============================================================================
# Defaults (é è¨­å€¼)
# ============================================================================
defaults:
  # Language policy defaults (èªè¨€ç­–ç•¥é è¨­å€¼)
  language_policy:
    high_level_languages:
      - TypeScript # apps, services (Node.js), tools, agents
      - Python # AI, automation, analysis pipelines
    low_level_languages:
      - Go # security / observability / infra agents
      - C++ # real-time / ROS2 / flight control
      - Rust # perf-critical / safety-critical cores
    infra_languages:
      - YAML # K8s manifests, governance schemas
      - HCL # IaC (Terraform ç­‰)
    forbidden_languages:
      - PHP
      - Perl

  # Quality thresholds defaults (å“è³ªé–€æª»é è¨­å€¼)
  quality_thresholds:
    language_violations_max: 0 # æ¯å€‹ module é è¨­ä¸å¾—æœ‰èªè¨€æ²»ç†é•è¦
    semgrep_high_max: 0 # é è¨­ä¸æ¥å— HIGH severity issue
    coverage_delta_min: 0.0 # é è¨­ä¸è¦è®“è¦†è“‹ç‡ä¸‹é™
    complexity_trend: "non_increasing" # é è¨­ä¸å…è¨±è¤‡é›œåº¦ä¸Šå‡

  # Phase defaults (éšæ®µé è¨­å€¼)
  phase_defaults:
    enabled_phases: [0, 1, 2, 3, 4, 5]
    phase0:
      name: "Inventory & Discovery"
      description: "æƒæç¾æœ‰èªè¨€/æª”æ¡ˆ/ä¾è³´ï¼Œç”¢ç”Ÿæ¸…å†Šã€‚"
    phase1:
      name: "Governance Baseline"
      description: "å»ºç«‹èªè¨€èˆ‡ä¾è³´æ²»ç†åŸºæº–ç·šï¼ˆé•è¦/ç†±é»/flowï¼‰ã€‚"
    phase2:
      name: "Refactor Planning"
      description: "ç‚ºå„ cluster ç”¢ç”Ÿé‡æ§‹åŠ‡æœ¬èˆ‡ P0/P1/P2 è¨ˆç•«ã€‚"
    phase3:
      name: "Safe Execution"
      description: "åœ¨åˆ†æ”¯ä¸­åŸ·è¡Œ Auto-Fix + äººå·¥å¯©æŸ¥ã€‚"
    phase4:
      name: "Consolidation"
      description: "åˆä½µè‡³ä¸»ç·šã€ç©©å®š CI/CDã€æ›´æ–°çŸ¥è­˜åº«ã€‚"
    phase5:
      name: "Continuous Governance"
      description: "æŒçºŒç›£æ§èªè¨€å¥åº·èˆ‡æ¶æ§‹æ¼‚ç§»ã€‚"

# ============================================================================
# Modules (æ¨¡çµ„å®šç¾©)
# ============================================================================
modules:
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # Module 1: core-architecture
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  core-architecture:
    # Basic identification
    id: "core-architecture"
    domain: "core"
    description: >
      Core platform architecture & stability for Unmanned Island:
      unified integration layer, mind matrix, lifecycle systems.
      æ ¸å¿ƒå¹³å°æ¶æ§‹èˆ‡ç©©å®šæ€§ï¼šçµ±ä¸€æ•´åˆå±¤ã€å¿ƒæ™ºçŸ©é™£ã€ç”Ÿå‘½é€±æœŸç³»çµ±ã€‚

    # Module roots (æ¨¡çµ„æ ¹ç›®éŒ„)
    roots:
      - "core/unified_integration"
      - "core/mind_matrix"
      - "core/safety_mechanisms"
      - "core/slsa_provenance"

    # Architecture constraints (æ¶æ§‹ç´„æŸ)
    architecture_constraints:
      allowed_dependencies:
        - "core/*"
        - "runtime/*"
        - "infrastructure/*"
      banned_dependencies:
        - "apps/**"
        - "services/**"
        - "automation/**"
      layering_rules:
        - "Core layer is the foundation"
        - "Cannot depend on upper layers (apps/services)"
        - "Can be consumed by all layers"
      skeleton_rules:
        - "architecture-stability"
        - "api-governance"
      notes: |
        Core å±¤æ˜¯ç³»çµ±åŸºç¤ï¼Œä¸å¯ä¾è³´ä¸Šå±¤ï¼ˆapps/servicesï¼‰ã€‚
        Core layer is the foundation, cannot depend on upper layers.

    # Quality thresholds (å“è³ªé–€æª») - æ›´åš´æ ¼
    quality_thresholds:
      language_violations_max: 0 # Stricter: zero violations for core
      semgrep_high_max: 0 # Zero tolerance
      coverage_delta_min: 0.0 # No coverage decrease
      complexity_trend: "non_increasing" # Complexity must not increase

    # Refactor configuration (é‡æ§‹é…ç½®)
    refactor:
      cluster_id: "core/architecture-stability"

      target_roots:
        - "core/unified_integration"
        - "core/mind_matrix"
        - "core/safety_mechanisms"

      allow_new_subdirs: false

      allowed_new_paths:
        - "core/unified_integration/plugins/*"
        - "core/mind_matrix/agents/*"

      include_globs:
        - "core/unified_integration/**/*.ts"
        - "core/unified_integration/**/*.py"
        - "core/mind_matrix/**/*.py"
        - "core/safety_mechanisms/**/*.ts"

      exclude_globs:
        - "**/tests/**"
        - "**/node_modules/**"
        - "**/__pycache__/**"
        - "**/dist/**"

      preferred_languages:
        - "TypeScript"
        - "Python"

      owners:
        - "@core-team"
        - "@architecture-reviewers"

      playbook_path: "docs/refactor_playbooks/03_refactor/core/core__architecture_refactor.md"

      phase_defaults:
        current_phase: "Phase-3-Execution"
        status: "active"
        priority: 1 # P0 - highest priority

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # Module 2: services-gateway
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  services-gateway:
    id: "services-gateway"
    domain: "services"
    description: >
      Services gateway layer - MCP servers, API gateway, service mesh.
      æœå‹™é–˜é“å±¤ - MCP ä¼ºæœå™¨ã€API é–˜é“ã€æœå‹™ç¶²æ ¼ã€‚

    roots:
      - "services/mcp"
      - "services/gateway"
      - "mcp-servers"

    architecture_constraints:
      allowed_dependencies:
        - "core/*"
        - "services/*"
        - "infrastructure/*"
      banned_dependencies:
        - "apps/**"
      layering_rules:
        - "Services layer provides APIs to apps"
        - "Can depend on core but not apps"
        - "Should use dependency injection"
      skeleton_rules:
        - "api-governance"
        - "security-observability"
      notes: |
        Services å±¤æä¾› API çµ¦ appsï¼Œå¯ä¾è³´ core ä½†ä¸å¯ä¾è³´ appsã€‚
        Services layer provides APIs to apps, can depend on core but not apps.

    quality_thresholds:
      language_violations_max: 0
      semgrep_high_max: 0
      coverage_delta_min: 0.0
      complexity_trend: "non_increasing"

    refactor:
      cluster_id: "services/gateway"

      target_roots:
        - "services/mcp"
        - "services/gateway"
        - "mcp-servers"

      allow_new_subdirs: true

      allowed_new_paths:
        - "services/mcp/servers/*"
        - "services/gateway/middlewares/*"

      include_globs:
        - "services/**/*.ts"
        - "services/**/*.js"
        - "mcp-servers/**/*.ts"

      exclude_globs:
        - "**/node_modules/**"
        - "**/dist/**"
        - "**/tests/**"

      preferred_languages:
        - "TypeScript"

      owners:
        - "@services-team"
        - "@integration-team"

      playbook_path: "docs/refactor_playbooks/03_refactor/services/services__gateway_refactor.md"

      phase_defaults:
        current_phase: "Phase-3-Execution"
        status: "active"
        priority: 1 # P1

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # Module 3: apps-web
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  apps-web:
    id: "apps-web"
    domain: "apps"
    description: >
      Web applications layer - React frontend, code analysis UI, language governance dashboard.
      Web æ‡‰ç”¨å±¤ - React å‰ç«¯ã€ä»£ç¢¼åˆ†æ UIã€èªè¨€æ²»ç†å„€è¡¨æ¿ã€‚

    roots:
      - "apps/web"
      - "apps/web/src"
      - "apps/web/public"

    architecture_constraints:
      allowed_dependencies:
        - "services/*"
        - "apps/*"
      banned_dependencies:
        - "core/unified_integration/**" # Must go through services
        - "automation/**"
      layering_rules:
        - "Apps layer is the top layer"
        - "Can call services but not core directly"
        - "Should consume APIs, not internal modules"
      skeleton_rules:
        - "frontend-consistency"
        - "security-observability"
      notes: |
        Apps å±¤æ˜¯æœ€ä¸Šå±¤ï¼Œæ‡‰é€é services API å­˜å–è³‡æºï¼Œä¸å¯ç›´æ¥å‘¼å« coreã€‚
        Apps layer is the top layer, should access resources via services API, not core directly.

    quality_thresholds:
      language_violations_max: 0
      semgrep_high_max: 0
      coverage_delta_min: 0.0
      complexity_trend: "non_increasing"

    refactor:
      cluster_id: "apps/web"

      target_roots:
        - "apps/web/src"
        - "apps/web/public"

      allow_new_subdirs: true

      allowed_new_paths:
        - "apps/web/src/components/*"
        - "apps/web/src/pages/*"
        - "apps/web/src/features/*"

      include_globs:
        - "apps/web/src/**/*.ts"
        - "apps/web/src/**/*.tsx"
        - "apps/web/src/**/*.jsx"

      exclude_globs:
        - "**/node_modules/**"
        - "**/dist/**"
        - "**/build/**"
        - "apps/web/public/data/**" # Generated data

      preferred_languages:
        - "TypeScript"

      owners:
        - "@frontend-team"
        - "@web-team"

      playbook_path: "docs/refactor_playbooks/03_refactor/apps/apps__web_refactor.md"

      phase_defaults:
        current_phase: "Phase-2-Planning"
        status: "active"
        priority: 2 # P1

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # Module 4: automation-autonomous
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  automation-autonomous:
    id: "automation-autonomous"
    domain: "automation"
    description: >
      Autonomous systems - five-skeleton architecture, drone control, ROS2 integration.
      è‡ªä¸»ç³»çµ± - äº”éª¨æ¶æ¶æ§‹ã€ç„¡äººæ©Ÿæ§åˆ¶ã€ROS2 æ•´åˆã€‚

    roots:
      - "automation/autonomous"
      - "automation/autonomous/architecture-stability"
      - "automation/autonomous/api-governance"

    architecture_constraints:
      allowed_dependencies:
        - "core/safety_mechanisms"
        - "core/slsa_provenance"
        - "automation/*"
      banned_dependencies:
        - "apps/**"
        - "services/**"
      layering_rules:
        - "Autonomous systems are independent"
        - "Can depend on core safety mechanisms"
        - "Should not depend on services or apps"
      skeleton_rules:
        - "architecture-stability"
        - "api-governance"
        - "security-observability"
      notes: |
        è‡ªä¸»ç³»çµ±ç¨ç«‹é‹ä½œï¼Œåƒ…ä¾è³´ core å®‰å…¨æ©Ÿåˆ¶ï¼Œä¸ä¾è³´ services æˆ– appsã€‚
        Autonomous systems operate independently, only depend on core safety, not services or apps.

    quality_thresholds:
      language_violations_max: 0
      semgrep_high_max: 0
      coverage_delta_min: 0.0
      complexity_trend: "non_increasing"

    refactor:
      cluster_id: "automation/autonomous"

      target_roots:
        - "automation/autonomous"

      allow_new_subdirs: true

      allowed_new_paths:
        - "automation/autonomous/architecture-stability/skeletons/*"
        - "automation/autonomous/api-governance/agents/*"

      include_globs:
        - "automation/autonomous/**/*.cpp"
        - "automation/autonomous/**/*.py"
        - "automation/autonomous/**/*.go"

      exclude_globs:
        - "**/tests/**"
        - "**/build/**"
        - "**/__pycache__/**"

      preferred_languages:
        - "C++" # For ROS2 nodes
        - "Python" # For high-level orchestration
        - "Go" # For API governance agents

      owners:
        - "@robotics-team"
        - "@autonomous-systems-team"

      playbook_path: "docs/refactor_playbooks/03_refactor/automation/automation__autonomous_refactor.md"

      phase_defaults:
        current_phase: "Phase-3-Execution"
        status: "active"
        priority: 0 # P0 - critical

  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  # Module 5: governance-schemas-policies
  # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  governance-schemas-policies:
    id: "governance-schemas-policies"
    domain: "governance"
    description: >
      Governance system - schema namespaces, policy definitions, compliance validation.
      æ²»ç†ç³»çµ± - Schema å‘½åç©ºé–“ã€ç­–ç•¥å®šç¾©ã€åˆè¦é©—è­‰ã€‚

    roots:
      - "governance/schemas"
      - "governance/policies"
      - "governance/rules"

    architecture_constraints:
      allowed_dependencies:
        - "governance/*"
      banned_dependencies:
        - "core/**"
        - "services/**"
        - "apps/**"
        - "automation/**"
      layering_rules:
        - "Governance is cross-cutting"
        - "Provides validation to all layers"
        - "Should not depend on implementation layers"
      skeleton_rules:
        - "configuration-governance"
        - "schema-validation"
      notes: |
        æ²»ç†ç³»çµ±æ˜¯è·¨å±¤çš„ï¼Œæä¾›é©—è­‰çµ¦æ‰€æœ‰å±¤ç´šï¼Œä¸æ‡‰ä¾è³´å¯¦ä½œå±¤ã€‚
        Governance is cross-cutting, provides validation to all layers, should not depend on implementation.

    quality_thresholds:
      language_violations_max: 0 # Very strict for governance
      semgrep_high_max: 0
      coverage_delta_min: 0.0
      complexity_trend: "non_increasing"

    refactor:
      cluster_id: "governance/schemas-policies"

      target_roots:
        - "governance/schemas"
        - "governance/policies"
        - "governance/rules"

      allow_new_subdirs: true

      allowed_new_paths:
        - "governance/schemas/mndoc/*"
        - "governance/policies/opa/*"
        - "governance/rules/custom/*"

      include_globs:
        - "governance/**/*.json"
        - "governance/**/*.yaml"
        - "governance/**/*.rego"
        - "governance/**/*.py"

      exclude_globs:
        - "**/tests/**"
        - "governance/registry/**" # Auto-generated

      preferred_languages:
        - "YAML" # For schemas
        - "Rego" # For OPA policies
        - "Python" # For validation scripts

      owners:
        - "@governance-team"
        - "@compliance-team"
        - "@architecture-reviewers"

      playbook_path: "docs/refactor_playbooks/03_refactor/governance/governance__schemas_policies_refactor.md"

      phase_defaults:
        current_phase: "Phase-4-Validation"
        status: "active"
        priority: 1 # P1

# ============================================================================
# Validation Rules (é©—è­‰è¦å‰‡)
# ============================================================================
validation:
  # Ensure no circular dependencies between modules
  check_circular_dependencies: true

  # Validate all referenced playbook paths exist
  check_playbook_paths: true

  # Ensure all owners are valid GitHub teams/users
  validate_owners: true

  # Check that architecture constraints are consistent
  validate_architecture_constraints: true

  # Verify quality thresholds are within acceptable ranges
  validate_quality_thresholds: true

# ============================================================================
# Notes (ä½¿ç”¨èªªæ˜)
# ============================================================================
#
# How to use this template:
# å¦‚ä½•ä½¿ç”¨æ­¤ç¯„æœ¬ï¼š
#
# 1. Copy the entire file to config/system-module-map.yaml
#    è¤‡è£½æ•´å€‹æª”æ¡ˆåˆ° config/system-module-map.yaml
#
# 2. Adjust the modules section to match your actual modules
#    èª¿æ•´ modules å€å¡Šä»¥ç¬¦åˆä½ çš„å¯¦éš›æ¨¡çµ„
#
# 3. Update roots, architecture_constraints, and quality_thresholds
#    æ›´æ–° rootsã€architecture_constraintsã€quality_thresholds
#
# 4. Ensure playbook_path points to actual refactor playbook files
#    ç¢ºä¿ playbook_path æŒ‡å‘å¯¦éš›çš„é‡æ§‹åŠ‡æœ¬æª”æ¡ˆ
#
# 5. Validate using: python tools/validate-module-map.py
#    é©—è­‰ä½¿ç”¨ï¼špython tools/validate-module-map.py
#
# Key Principles:
# é—œéµåŸå‰‡ï¼š
#
# - Core layer is foundation (ä¸å¯ä¾è³´ä¸Šå±¤)
# - Services layer mediates between core and apps (ä¸­ä»‹å±¤)
# - Apps layer is top layer (æœ€ä¸Šå±¤ï¼Œé€é API å­˜å–)
# - Automation is independent (ç¨ç«‹é‹ä½œ)
# - Governance is cross-cutting (è·¨å±¤é©—è­‰)
#
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

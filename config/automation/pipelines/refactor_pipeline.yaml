description: 完整的自動化重構週期：掃描 → 分析 → 規劃 → 執行 → 驗證
enabled: true
error_handling:
  on_stage_failure: continue_to_next
  retry:
    delay: 5
    max_attempts: 2
  rollback:
    auto_rollback_on_validation_failure: true
    enabled: true
name: 全自動重構管道
notifications:
  on_complete: true
  on_failure: true
  on_start: false
pipeline_id: refactor_full_cycle
stages:
- engine_type: execution
  name: 掃描分析
  on_failure: abort
  operation: scan
  params:
    deep: true
    target: docs/refactor_playbooks
  stage_id: scan
  timeout: 60
- depends_on:
  - scan
  engine_type: execution
  name: 生成計畫
  operation: plan
  params:
    priority_filter: all
  stage_id: plan
  timeout: 30
- depends_on:
  - plan
  engine_type: execution
  name: 執行重構
  on_failure: rollback
  operation: execute_plan
  params:
    dry_run: false
  stage_id: execute
  timeout: 300
- depends_on:
  - execute
  engine_type: validation
  name: 驗證結果
  operation: validate_all
  stage_id: validate
  timeout: 60
- depends_on:
  - validate
  engine_type: generation
  name: 生成報告
  operation: generate_report
  params:
    report_type: summary
  stage_id: report
  timeout: 30
triggers:
- schedule: 0 */6 * * *
  type: cron
- event: file.changed
  filter:
    path: docs/refactor_playbooks/**
  type: event
- type: manual

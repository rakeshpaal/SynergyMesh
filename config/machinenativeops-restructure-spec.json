{"$schema":"MachineNativeOps-Restructure-Spec-v4.0.0","metadata":{"projectName":"MachineNativeOps","displayName":"MachineNativeOps","legacyNames":["SynergyMesh","Unmanned Island System","無人島系統"],"version":"4.0.0","visionVersion":"1.0.0","configFile":"machinenativeops.yaml","repository":"https://github.com/MachineNativeOps/MachineNativeOps","description":"Next-Generation Cloud-Native Intelligent Automation Platform for zero-touch operations"},"namingConventions":{"contexts":[{"context":"display-branding","format":"PascalCase","example":"MachineNativeOps","usage":["page-titles","markdown-headings","config-name-field","class-names"]},{"context":"code-packages","format":"lowercase","example":"machinenativeops","usage":["npm-packages","python-modules","repository-names","@machinenativeops/*-imports"]},{"context":"files-paths","format":"kebab-case","example":"machine-native-ops","usage":["directories","filenames","url-routes","cli-flags","environment-paths"]}],"rules":{"allowedCharacters":"a-z0-9-","separator":"-","prohibited":["PascalCase-in-paths","camelCase-in-paths","underscores","spaces","special-symbols"],"synonymEliminationMap":{"infra":"src/autonomous/infrastructure","infrastructure":"src/autonomous/infrastructure","ai":"src/ai","src/ai":"src/ai","deployment":"src/autonomous/deployment","deploy":"src/autonomous/deployment","config":"config","configuration":"config",".config":"config"}},"replaceRules":[{"pattern":"SynergyMesh","replacement":"MachineNativeOps","scope":"display"},{"pattern":"@machinenativeops/*","replacement":"@machinenativeops/*","scope":"imports"},{"pattern":"machinenativeops.yaml","replacement":"machinenativeops.yaml","scope":"files"},{"pattern":"Synergy-Mesh","replacement":"machine-native-ops","scope":"paths"},{"pattern":"synergy-mesh","replacement":"machine-native-ops","scope":"paths"},{"pattern":"NamespaceTutorial","replacement":"namespace-tutorial","scope":"directories"}]},"directoryStructure":{"rootDirectories":[{"name":"src","description":"Application source code temple - executable code only","required":true,"subdirectories":[{"name":"ai","description":"AI decision engine, ML pipelines, intelligent agents","mergeFrom":["src/ai/","src/ai/"],"components":["inference-engine","model-lifecycle","confidence-scoring","event-processors"]},{"name":"core","description":"Core orchestration engine - central nervous system","mergeFrom":["core/"],"components":["workflow-engine","task-sequencing","api-gateway","scheduler"]},{"name":"governance","description":"Policy engine and compliance enforcement","mergeFrom":["governance/"],"components":["policy-validators","rule-engines","okr-tracking","audit-logging"]},{"name":"autonomous","description":"Autonomous operations and infrastructure management","mergeFrom":["autonomous/","deployment/","deploy/","infra/","infrastructure/","bridges/"],"subdirectories":[{"name":"infrastructure","description":"IaC scripts and infrastructure management"},{"name":"deployment","description":"Deployment automation code"},{"name":"agents","description":"Autonomous operation agents"}]}]},{"name":"config","description":"Centralized configuration storage","required":true,"subdirectories":[{"name":"dev","description":"Development environment configs"},{"name":"staging","description":"Staging environment configs"},{"name":"prod","description":"Production environment configs"}],"mergeFrom":[".config/","config/",".devcontainer/"]},{"name":"scripts","description":"Automation scripts","required":true,"subdirectories":[{"name":"dev","description":"Development scripts (build, start, test)"},{"name":"ci","description":"CI/CD pipeline scripts"},{"name":"ops","description":"Operations and maintenance scripts"},{"name":"governance","description":"Governance automation scripts"}]},{"name":"docs","description":"Project documentation","required":true},{"name":"examples","description":"Educational and tutorial content","required":false,"subdirectories":[{"name":"namespace-tutorial","description":"Namespace tutorial content"}]},{"name":"governance","description":"Governance content hub (non-code)","required":true,"subdirectories":[{"name":"policies","description":"Policy definitions and templates"},{"name":"strategies","description":"OKR frameworks and strategic goals"},{"name":"docs","description":"Governance documentation"},{"name":"tools","description":"Governance-specific tools"},{"name":"assets","description":"Diagrams and visual materials"}]},{"name":"tests","description":"Test suites","required":false,"subdirectories":[{"name":"unit","description":"Unit tests"},{"name":"e2e","description":"End-to-end tests"}]},{"name":".github","description":"GitHub workflows and configs","required":true}],"prohibitedAtRoot":["ai","src/ai","agent","automation","bridges","contracts","deployment","deploy","infra","infrastructure","NamespaceTutorial"]},"configurationManagement":{"singleSourceOfTruth":"machinenativeops.yaml","requiredFields":["version","vision_version","name","description","entrypoint","configs"],"versioningStrategy":{"format":"semver","pattern":"X.Y.Z","rules":[{"change":"breaking-api","action":"increment-major"},{"change":"new-feature","action":"increment-minor"},{"change":"bugfix","action":"increment-patch"}]},"gitTagFormat":"vX.Y.Z","schemaTemplate":{"version":"4.0.0","vision_version":"1.0.0","name":"MachineNativeOps","description":"Next-Generation Cloud-Native Intelligent Automation Platform","entrypoint":"./src/core/app.js","configs":{"environment":"config/${ENV:-dev}/app.yaml","ai_model":"config/${ENV:-dev}/ai-models.yaml","monitoring":"config/${ENV:-dev}/monitoring.yaml"}}},"microservicesArchitecture":{"services":[{"name":"ai-decision-engine","language":"Python","responsibilities":["real-time-inference","ml-model-lifecycle","confidence-scoring","explainability"],"dataStore":["Pinecone","Weaviate","MLflow"],"communication":"gRPC"},{"name":"core-orchestration","language":"Node.js/TypeScript","responsibilities":["workflow-execution","task-coordination","api-exposure","scheduling"],"dataStore":"PostgreSQL","communication":"REST/gRPC"},{"name":"governance-policy-engine","language":"Node.js/TypeScript","responsibilities":["policy-enforcement","compliance-evaluation","audit-logging","rbac-abac"],"dataStore":"Neo4j","communication":"gRPC"},{"name":"autonomous-ops-agent","language":"Node.js/Python","responsibilities":["zero-touch-operations","health-monitoring","self-healing","k8s-integration"],"dataStore":"SQLite/LevelDB","communication":"Events"},{"name":"configuration-management","language":"Node.js/TypeScript","responsibilities":["config-distribution","schema-validation","atomic-rollouts","canary-testing"],"dataStore":"ETCD/Consul","communication":"Streaming"},{"name":"observability-gateway","language":"Go","responsibilities":["log-aggregation","metrics-collection","distributed-tracing","alerting"],"dataStore":"Prometheus/Loki/Tempo","communication":"OpenTelemetry"}],"patterns":["event-driven","api-gateway","service-mesh","cqrs","gitops"],"messagingTopics":["ai.decisions","ops.events","governance.alerts"],"messagingPlatform":"Kafka/NATS"},"migrationProcedure":{"phases":[{"id":"phase-0","name":"backup-and-branch","required":true,"commands":["git checkout -b refactor/phase2-directory-restructure","git tag -a pre-restructure-backup-$(date +%Y%m%d-%H%M%S) -m 'Full backup before restructure'","git push origin --tags","git push origin refactor/phase2-directory-restructure"],"verification":["git branch --show-current","git tag -l 'pre-restructure-*'"]},{"id":"phase-2.1","name":"create-skeleton","required":true,"commands":["mkdir -p src/ai src/core src/governance src/autonomous/infrastructure src/autonomous/deployment src/autonomous/agents","mkdir -p config/dev config/staging config/prod","mkdir -p scripts/dev scripts/ci scripts/ops scripts/governance","mkdir -p governance/policies governance/strategies governance/docs governance/tools governance/assets","mkdir -p examples"],"verification":["tree -L 2 src config scripts governance examples"],"commit":"chore: create standard directory skeleton"},{"id":"phase-2.2","name":"migrate-non-dependent","required":true,"operations":[{"type":"rename","from":"NamespaceTutorial","to":"examples/namespace-tutorial","condition":"exists"},{"type":"move","from":"docs/*","to":"governance/docs/","filter":"governance-related"}],"verification":["git status --porcelain"],"commit":"refactor: migrate documentation and example directories"},{"id":"phase-2.3","name":"merge-duplicates","required":true,"operations":[{"type":"merge","sources":["src/ai/","src/ai/"],"target":"src/ai/","method":"rsync -av"},{"type":"merge","sources":["infra/","infrastructure/"],"target":"src/autonomous/infrastructure/","method":"rsync -av"},{"type":"merge","sources":["deployment/","deploy/"],"target":"src/autonomous/deployment/","method":"rsync -av"},{"type":"merge","sources":[".config/","config/"],"target":"config/","method":"rsync -av"}],"verification":["diff -qr","find target -type f | wc -l","git status"],"postMerge":["git rm -r source-directories"],"commit":"refactor: merge {source} into {target}"},{"id":"phase-2.4","name":"update-references","required":true,"operations":[{"type":"sed-replace","pattern":"([\"'])ai/","replacement":"$1src/ai/","files":"*.ts,*.js,*.tsx,*.jsx"},{"type":"sed-replace","pattern":"from ai import","replacement":"from src.ai import","files":"*.py"},{"type":"sed-replace","pattern":"from infrastructure import","replacement":"from src.autonomous.infrastructure import","files":"*.py"}],"verification":["npm run build --noEmit","python -c 'import src.ai.core'","npm test -- --passWithNoTests"],"commit":"refactor: update import paths"},{"id":"phase-2.5","name":"update-cicd","required":true,"operations":[{"type":"sed-replace","pattern":"src/ai/training.sh","replacement":"src/ai/training.sh","files":".github/workflows/*.yml"},{"type":"sed-replace","pattern":"script/deploy.sh","replacement":"scripts/deploy.sh","files":".github/workflows/*.yml"}],"verification":["yamllint .github/workflows/","trigger-test-workflow"],"commit":"ci: update paths in GitHub Actions"}],"rollbackProcedure":{"commands":["git revert HEAD --no-commit","git checkout pre-restructure-backup-* -- .","git clean -fd"]}},"validation":{"preFlightChecks":[{"name":"on-feature-branch","command":"git branch --show-current | grep -v '^main$'","required":true},{"name":"backup-tag-exists","command":"git tag -l 'pre-restructure-*' | head -1","required":true},{"name":"coverage-baseline","command":"test -f coverage-baseline.json","required":true}],"postPhaseChecks":[{"name":"git-clean","command":"git status --porcelain | wc -l","expected":"0"},{"name":"no-untracked","command":"git status --porcelain | grep '^??' | wc -l","expected":"0"}],"finalVerification":{"script":"verify-restructure.sh","checks":[{"name":"src-ai-exists","command":"test -d src/ai","required":true},{"name":"src-core-exists","command":"test -d src/core","required":true},{"name":"src-governance-exists","command":"test -d src/governance","required":true},{"name":"src-autonomous-exists","command":"test -d src/autonomous","required":true},{"name":"config-file-exists","command":"test -f machinenativeops.yaml","required":true},{"name":"build-passes","command":"npm run build","required":true},{"name":"tests-discoverable","command":"npm test -- --passWithNoTests","required":true},{"name":"dependency-graph","command":"npx madge --circular --extensions ts,js src/","output":"dependency-graph-final.txt"}]}},"safetyProtocols":{"backupStrategy":{"branchNaming":"refactor/phase2-directory-restructure","tagFormat":"pre-restructure-backup-YYYYMMDD-HHMMSS","remotePush":true},"executionRules":["never-operate-on-main","commit-after-each-phase","verify-before-proceed","incremental-changes-only"],"mergeStrategy":{"tool":"rsync","flags":"-av","preserves":["permissions","timestamps","hidden-files"],"preCheck":"diff -qr source target"},"dependencyTracking":{"tool":"madge","command":"npx madge --circular --extensions ts,js src/","compareBeforeAfter":true},"coverageProtection":{"baselineFile":"coverage-baseline.json","command":"npm test -- --coverage --json","comparison":"no-decrease-in-key-modules"}},"algorithmOptimization":{"pythonStrategies":["numpy-vectorization","lru_cache-memoization","cupy-gpu-acceleration","concurrent.futures-parallelism"],"nodejsStrategies":["Map-Set-over-objects","Promise.all-parallelism","worker_threads-cpu-tasks","streaming-json-parsers"],"goStrategies":["sync.Pool-object-reuse","slice-preallocation","avoid-interface{}"],"architecturalPatterns":["event-batching","cqrs-read-optimization","service-mesh-bulk-apis","vector-db-similarity-search"]},"documentationRequirements":{"readme":{"sections":["quick-start","project-structure","architecture-overview","configuration","contributing"]},"contributing":{"rules":["unit-tests-required","formatter-compliance","code-placement-rules","naming-convention-enforcement","version-change-protocol","git-workflow"]},"governanceHub":{"location":"governance/","entryPoint":"governance/docs/index.md","linkedFrom":["docs/index.md","README.md"]}},"executionChecklist":{"preExecution":[{"question":"Is current branch NOT main?","required":true},{"question":"Has backup tag been created and pushed?","required":true},{"question":"Has coverage baseline been saved?","required":true},{"question":"Has dependency graph baseline been generated?","required":true}],"postExecution":[{"question":"Do all verification checks pass?","required":true},{"question":"Is build successful?","required":true},{"question":"Are all tests discoverable?","required":true},{"question":"Is CONTRIBUTING.md complete?","required":true}]}}

apiVersion: machinenativeops.io/v2
containerdConfigPatches:
- "[plugins.\"io.containerd.grpc.v1.cri\".registry.mirrors.\"localhost:5000\"]\n \
  \ endpoint = [\"http://kind-registry:5000\"]"
featureGates:
  CSIMigration: true
  EphemeralContainers: true
kind: Cluster
name: governance-test
networking:
  apiServerAddress: 127.0.0.1
  apiServerPort: 6443
  podSubnet: 10.244.0.0/16
  serviceSubnet: 10.96.0.0/12
nodes:
- extraMounts:
  - containerPath: /var/run/docker.sock
    hostPath: /var/run/docker.sock
    readOnly: false
  extraPortMappings:
  - containerPort: 80
    hostPort: 80
    protocol: TCP
  - containerPort: 443
    hostPort: 443
    protocol: TCP
  image: kindest/node:v1.27.3@sha256:3966ac761ae0136263ffdb6cfd4db23ef8a83cba8a463690e98317add2c9ba72
  kubeadmConfigPatches:
  - "kind: InitConfiguration\nnodeRegistration:\n  kubeletExtraArgs:\n    node-labels:\
    \ \"ingress-ready=true\"\n"
  role: control-plane
- image: kindest/node:v1.27.3@sha256:3966ac761ae0136263ffdb6cfd4db23ef8a83cba8a463690e98317add2c9ba72
  labels:
    tier: worker
    zone: zone-a
  role: worker
- image: kindest/node:v1.27.3@sha256:3966ac761ae0136263ffdb6cfd4db23ef8a83cba8a463690e98317add2c9ba72
  labels:
    tier: worker
    zone: zone-b
  role: worker
